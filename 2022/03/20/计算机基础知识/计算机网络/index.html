<!DOCTYPE html>
<html lang="zh-CN">
    <head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/#5.8.0'>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="Volantis" content="5.8.0">
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
  <link rel="canonical" href="http://jay1060950003.github.io/2022/03/20/计算机基础知识/计算机网络/"/>
  <!-- 渲染优化 -->
    <meta http-equiv='x-dns-prefetch-control' content='on' />
      <link rel='dns-prefetch' href='https://unpkg.com'>
      <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Content-Security-Policy" content=" default-src 'self' https:; block-all-mixed-content; base-uri 'self' https:; form-action 'self' https:; worker-src 'self' https:; connect-src 'self' https: *; img-src 'self' data: https: *; media-src 'self' https: *; font-src 'self' data: https: *; frame-src 'self' https: *; manifest-src 'self' https: *; child-src https:; script-src 'self' https: 'unsafe-inline' *; style-src 'self' https: 'unsafe-inline' *; ">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <!-- import head_begin begin -->
  <!-- import head_begin end -->
  <!-- Custom Files headBegin begin-->
  <link rel="stylesheet" href="https://unpkg.com/katex@0.16.0/dist/katex.css" integrity="sha384-1IGr2Yb8xuHjwTG+WoGjj2+I/a/N6z0gDD5YIGCQxywPROOKc3+orbn/R7arWQxD" crossorigin="anonymous">
<script src="https://unpkg.com/katex@0.16.0/dist/katex.js" integrity="sha384-I2b1Pcl48X93GxEkGkaMo1hrd6n+IX8H2wgSsMimGbkZoGTve/87h1FjaDNvlpQi" crossorigin="anonymous"></script>
  <!-- Custom Files headBegin end-->
  <!-- front-matter head_begin begin -->
  <!-- front-matter head_begin end -->
    <link rel="shortcut icon" type='image/x-icon' href="https://gcore.jsdelivr.net/gh/jay1060950003/chartBed//favicon.ico">
  <link rel="preload" href="/css/style.css" as="style">
  <link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <!-- feed -->
  <!-- 页面元数据 -->
  <title>计算机网络 - CodingStudio</title>
  <meta name="keywords" content="Basic,C++,Java,Qt,OpenCV,后端,开发者,程序猿,极客,编程,代码,开源,IT网站,Developer,Programmer,Coder, 摄影">
  <meta desc name="description" content=" 引言

《计算机网络|自顶向下方法|第七版》学习笔记
 - jay1060950003 - CodingStudio">
  
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络">
<meta property="og:url" content="http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html">
<meta property="og:site_name" content="CodingStudio">
<meta property="og:description" content="引言  《计算机网络|自顶向下方法|第七版》学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
<meta property="article:published_time" content="2022-03-20T09:25:58.000Z">
<meta property="article:modified_time" content="2023-04-09T13:39:29.972Z">
<meta property="article:author" content="jay1060950003">
<meta property="article:tag" content="Basic">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
  <style>
    /* 首屏样式 */
    #safearea {
  display: none;
}
.post-story + .post-story {
  content-visibility: auto;
  contain-intrinsic-size: 10px 500px;
}
:root {
  --color-site-body: #f4f4f4;
  --color-site-bg: #f4f4f4;
  --color-site-inner: #fff;
  --color-site-footer: #666;
  --color-card: #fff;
  --color-text: #444;
  --color-block: #f6f6f6;
  --color-inlinecode: #c74f00;
  --color-codeblock: #fff7ea;
  --color-h1: #3a3a3a;
  --color-h2: #3a3a3a;
  --color-h3: #333;
  --color-h4: #444;
  --color-h5: #555;
  --color-h6: #666;
  --color-p: #444;
  --color-list: #666;
  --color-list-hl: #30ad91;
  --color-meta: #888;
  --color-read-bkg: #e0d8c8;
  --color-read-post: #f8f1e2;
  --color-copyright-bkg: #f5f5f5;
}
* {
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  outline: none;
  margin: 0;
  padding: 0;
}
*::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
*::-webkit-scrollbar-track-piece {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
*::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
html {
  color: var(--color-text);
  width: 100%;
  height: 100%;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  font-size: 16px;
}
html >::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
html >::-webkit-scrollbar-track-piece {
  background: transparent;
}
html >::-webkit-scrollbar-thumb {
  background: #54b5a0 linear-gradient(45deg, rgba(255,255,255,0.4) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.4) 75%, transparent 75%, transparent);
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
html >::-webkit-scrollbar-thumb:hover {
  background: #54b5a0 linear-gradient(45deg, rgba(255,255,255,0.4) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.4) 75%, transparent 75%, transparent);
}
body {
  background-color: var(--color-site-body);
  text-rendering: optimizelegibility;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  line-height: 1.6;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}
body.modal-active {
  overflow: hidden;
}
@media screen and (max-width: 680px) {
  body.modal-active {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
a {
  color: #2092ec;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
a:hover {
  color: #ff5722;
}
a:active,
a:hover {
  outline: 0;
}
ul,
ol {
  padding-left: 0;
}
ul li,
ol li {
  list-style: none;
}
header {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
img {
  border: 0;
  background: none;
  max-width: 100%;
}
svg:not(:root) {
  overflow: hidden;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  height: 0;
  border: 0;
  border-radius: 1px;
  -webkit-border-radius: 1px;
  border-bottom: 1px solid rgba(68,68,68,0.1);
}
button,
input {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
  text-transform: none;
  -webkit-appearance: button;
  cursor: pointer;
}
@supports (backdrop-filter: blur(20px)) {
  .blur {
    background: rgba(255,255,255,0.9) !important;
    backdrop-filter: saturate(200%) blur(20px);
  }
}
.shadow {
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.shadow.floatable {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.shadow.floatable:hover {
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
}
#l_cover {
  min-height: 64px;
}
.cover-wrapper {
  top: 0;
  left: 0;
  max-width: 100%;
  height: 100vh;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  align-self: center;
  align-content: center;
  color: var(--color-site-inner);
  padding: 0 16px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  position: relative;
  overflow: hidden;
  margin-bottom: -100px;
}
.cover-wrapper .cover-bg {
  position: absolute;
  width: 100%;
  height: 100%;
  background-position: center;
  background-size: cover;
  -webkit-background-size: cover;
  -moz-background-size: cover;
}
.cover-wrapper .cover-bg.lazyload:not(.loaded) {
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
}
.cover-wrapper .cover-bg.lazyload.loaded {
  animation-delay: 0s;
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-out;
  animation-name: fadeIn;
}
@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  z-index: 1;
  position: relative;
  width: 100%;
  height: 100%;
}
.cover-wrapper#full {
  height: calc(100vh + 100px);
  padding-bottom: 100px;
}
.cover-wrapper#half {
  max-height: 640px;
  min-height: 400px;
  height: calc(36vh - 64px + 200px);
}
.cover-wrapper #scroll-down {
  width: 100%;
  height: 64px;
  position: absolute;
  bottom: 100px;
  text-align: center;
  cursor: pointer;
}
.cover-wrapper #scroll-down .scroll-down-effects {
  color: #fff;
  font-size: 24px;
  line-height: 64px;
  position: absolute;
  width: 24px;
  left: calc(50% - 12px);
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  animation: scroll-down-effect 1.5s infinite;
  -webkit-animation: scroll-down-effect 1.5s infinite;
  -khtml-animation: scroll-down-effect 1.5s infinite;
  -moz-animation: scroll-down-effect 1.5s infinite;
  -o-animation: scroll-down-effect 1.5s infinite;
  -ms-animation: scroll-down-effect 1.5s infinite;
}
@-moz-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  margin-top: 64px;
  margin-bottom: 100px;
}
.cover-wrapper .cover-body,
.cover-wrapper .cover-body .top,
.cover-wrapper .cover-body .bottom {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  max-width: 100%;
}
.cover-wrapper .cover-body .bottom {
  margin-top: 32px;
}
.cover-wrapper .cover-body .title {
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
  font-size: 3.125rem;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cover-wrapper .cover-body .subtitle {
  font-size: 20px;
}
.cover-wrapper .cover-body .logo {
  max-height: 120px;
  max-width: calc(100% - 4 * 16px);
}
@media screen and (min-height: 1024px) {
  .cover-wrapper .cover-body .title {
    font-size: 3rem;
  }
  .cover-wrapper .cover-body .subtitle {
    font-size: 1.05rem;
  }
  .cover-wrapper .cover-body .logo {
    max-height: 150px;
  }
}
.cover-wrapper .cover-body .m_search {
  position: relative;
  max-width: calc(100% - 16px);
  width: 320px;
  vertical-align: middle;
}
.cover-wrapper .cover-body .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  width: 100%;
}
.cover-wrapper .cover-body .m_search .icon,
.cover-wrapper .cover-body .m_search .input {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.cover-wrapper .cover-body .m_search .icon {
  position: absolute;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  line-height: 2.5rem;
  width: 32px;
  top: 0;
  left: 5px;
  color: rgba(68,68,68,0.75);
}
.cover-wrapper .cover-body .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  height: 2.5rem;
  width: 100%;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  font-size: 0.875rem;
  -webkit-appearance: none;
  padding-left: 36px;
  border-radius: 1.4rem;
  -webkit-border-radius: 1.4rem;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(10px);
  border: none;
  color: var(--color-text);
}
@media screen and (max-width: 500px) {
  .cover-wrapper .cover-body .m_search .input {
    padding-left: 36px;
  }
}
.cover-wrapper .cover-body .m_search .input:hover {
  background: rgba(255,255,255,0.8);
}
.cover-wrapper .cover-body .m_search .input:focus {
  background: #fff;
}
.cover-wrapper .list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  -khtml-flex-wrap: wrap;
  -moz-flex-wrap: wrap;
  -o-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  align-items: stretch;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.cover-wrapper .list-h a {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 0;
  -ms-flex: 1 0;
  flex: 1 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  font-weight: 600;
}
.cover-wrapper .list-h a img {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  border-radius: 2px;
  -webkit-border-radius: 2px;
  margin: 4px;
  min-width: 40px;
  max-width: 44px;
}
@media screen and (max-width: 768px) {
  .cover-wrapper .list-h a img {
    min-width: 36px;
    max-width: 40px;
  }
}
@media screen and (max-width: 500px) {
  .cover-wrapper .list-h a img {
    margin: 2px 4px;
    min-width: 32px;
    max-width: 36px;
  }
}
@media screen and (max-width: 375px) {
  .cover-wrapper .list-h a img {
    min-width: 28px;
    max-width: 32px;
  }
}
.cover-wrapper {
  max-width: 100%;
}
.cover-wrapper.search .bottom .menu {
  margin-top: 16px;
}
.cover-wrapper.search .bottom .menu .list-h a {
  white-space: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  align-items: baseline;
  padding: 2px;
  margin: 4px;
  color: var(--color-site-inner);
  opacity: 0.75;
  -webkit-opacity: 0.75;
  -moz-opacity: 0.75;
  text-shadow: 0 1px 2px rgba(0,0,0,0.05);
  border-bottom: 2px solid transparent;
}
.cover-wrapper.search .bottom .menu .list-h a i {
  margin-right: 4px;
}
.cover-wrapper.search .bottom .menu .list-h a p {
  font-size: 0.9375rem;
}
.cover-wrapper.search .bottom .menu .list-h a:hover,
.cover-wrapper.search .bottom .menu .list-h a.active,
.cover-wrapper.search .bottom .menu .list-h a:active {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
  border-bottom: 2px solid var(--color-site-inner);
}
.cover-wrapper #parallax-window {
  position: absolute;
  width: 100%;
  height: 100%;
  background: transparent;
}
.parallax-mirror {
  animation-delay: 0s;
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-out;
  animation-name: fadeIn;
}
@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --color-mode: 'dark';
  }
  :root:not([color-scheme]) {
    --color-site-body: #121212;
    --color-read-bkg: #1f1f1f;
    --color-read-post: #262626;
    --color-site-bg: #1f1f1f;
    --color-site-inner: rgba(238,238,238,0.871);
    --color-site-footer: rgba(170,170,170,0.871);
    --color-card: #262626;
    --color-text: rgba(238,238,238,0.871);
    --color-block: #434343;
    --color-codeblock: #1f1f1f;
    --color-inlinecode: #d56d28;
    --color-h1: rgba(255,255,255,0.871);
    --color-h2: rgba(255,255,255,0.871);
    --color-h3: rgba(255,255,255,0.6);
    --color-h4: rgba(255,255,255,0.6);
    --color-h5: rgba(255,255,255,0.6);
    --color-h6: rgba(255,255,255,0.6);
    --color-p: rgba(217,217,217,0.871);
    --color-list: rgba(217,217,217,0.871);
    --color-list-hl: #63e0c4;
    --color-meta: rgba(191,191,191,0.871);
    --color-link: rgba(191,191,191,0.871);
    --color-copyright-bkg: #21252b;
  }
  :root:not([color-scheme]) img {
    filter: brightness(70%) !important;
  }
  :root:not([color-scheme]) .blur {
    background: rgba(31,31,31,0.9) !important;
  }
  :root:not([color-scheme]) .white-box.blur {
    background: rgba(38,38,38,0.9) !important;
  }
  :root:not([color-scheme]) .nav-main .u-search-input {
    background: var(--color-card) !important;
  }
  :root:not([color-scheme]) #l_main .article .prev-next>a {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) #l_main .article .prev-next>a:hover {
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) .article blockquote {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .article-title a {
    color: var(--color-h1) !important;
  }
  :root:not([color-scheme]) details>summary {
    color: var(--color-p) !important;
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) details {
    border: 1px solid var(--color-site-bg) !important;
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) #u-search .modal,
  :root:not([color-scheme]) #u-search .modal-header,
  :root:not([color-scheme]) #u-search .modal-body {
    background: var(--color-card) !important;
  }
  :root:not([color-scheme]) #u-search .modal-body .modal-results .result:hover {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .u-search-input:hover {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .u-search-input:focus {
    background: var(--color-site-body) !important;
  }
}
[color-scheme='dark'] {
  --color-site-body: #121212;
  --color-read-bkg: #1f1f1f;
  --color-read-post: #262626;
  --color-site-bg: #1f1f1f;
  --color-site-inner: rgba(238,238,238,0.871);
  --color-site-footer: rgba(170,170,170,0.871);
  --color-card: #262626;
  --color-text: rgba(238,238,238,0.871);
  --color-block: #434343;
  --color-codeblock: #1f1f1f;
  --color-inlinecode: #d56d28;
  --color-h1: rgba(255,255,255,0.871);
  --color-h2: rgba(255,255,255,0.871);
  --color-h3: rgba(255,255,255,0.6);
  --color-h4: rgba(255,255,255,0.6);
  --color-h5: rgba(255,255,255,0.6);
  --color-h6: rgba(255,255,255,0.6);
  --color-p: rgba(217,217,217,0.871);
  --color-list: rgba(217,217,217,0.871);
  --color-list-hl: #63e0c4;
  --color-meta: rgba(191,191,191,0.871);
  --color-link: rgba(191,191,191,0.871);
  --color-copyright-bkg: #21252b;
}
[color-scheme='dark'] img {
  filter: brightness(70%) !important;
}
[color-scheme='dark'] .blur {
  background: rgba(31,31,31,0.9) !important;
}
[color-scheme='dark'] .white-box.blur {
  background: rgba(38,38,38,0.9) !important;
}
[color-scheme='dark'] .nav-main .u-search-input {
  background: var(--color-card) !important;
}
[color-scheme='dark'] #l_main .article .prev-next>a {
  background: var(--color-block) !important;
}
[color-scheme='dark'] #l_main .article .prev-next>a:hover {
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] .article blockquote {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .article-title a {
  color: var(--color-h1) !important;
}
[color-scheme='dark'] details>summary {
  color: var(--color-p) !important;
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] details {
  border: 1px solid var(--color-site-bg) !important;
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] #u-search .modal,
[color-scheme='dark'] #u-search .modal-header,
[color-scheme='dark'] #u-search .modal-body {
  background: var(--color-card) !important;
}
[color-scheme='dark'] #u-search .modal-body .modal-results .result:hover {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .u-search-input:hover {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .u-search-input:focus {
  background: var(--color-site-body) !important;
}
@media screen and (max-width: 500px) {
  [color-scheme='dark'] .l_header .m_search {
    background: var(--color-site-bg) !important;
  }
}
@font-face {
  font-family: 'UbuntuMono';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
@font-face {
  font-family: 'Varela Round';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
.l_header {
  position: fixed;
  z-index: 1000;
  top: 0;
  width: 100%;
  height: 64px;
  background: var(--color-card);
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.l_header.auto {
  transition: opacity 0.4s ease;
  -webkit-transition: opacity 0.4s ease;
  -khtml-transition: opacity 0.4s ease;
  -moz-transition: opacity 0.4s ease;
  -o-transition: opacity 0.4s ease;
  -ms-transition: opacity 0.4s ease;
  visibility: hidden;
}
.l_header.auto.show {
  opacity: 1 !important;
  -webkit-opacity: 1 !important;
  -moz-opacity: 1 !important;
  visibility: visible;
}
.l_header .container {
  margin-left: 16px;
  margin-right: 16px;
}
.l_header #wrapper {
  height: 100%;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.l_header #wrapper .nav-main,
.l_header #wrapper .nav-sub {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  justify-content: space-between;
  -webkit-justify-content: space-between;
  -khtml-justify-content: space-between;
  -moz-justify-content: space-between;
  -o-justify-content: space-between;
  -ms-justify-content: space-between;
  align-items: center;
}
.l_header #wrapper .nav-main {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.l_header #wrapper.sub .nav-main {
  transform: translateY(-64px);
  -webkit-transform: translateY(-64px);
  -khtml-transform: translateY(-64px);
  -moz-transform: translateY(-64px);
  -o-transform: translateY(-64px);
  -ms-transform: translateY(-64px);
}
.l_header #wrapper .nav-sub {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
  height: 64px;
  width: calc(100% - 2 * 16px);
  position: absolute;
}
.l_header #wrapper .nav-sub ::-webkit-scrollbar {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (min-width: 2048px) {
  .l_header #wrapper .nav-sub {
    max-width: 55vw;
    margin: auto;
  }
}
.l_header #wrapper.sub .nav-sub {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
}
.l_header #wrapper .title {
  position: relative;
  color: var(--color-text);
  padding-left: 24px;
  max-height: 64px;
}
.l_header #wrapper .nav-main .title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  line-height: 64px;
  padding: 0 24px;
  font-size: 1.25rem;
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
}
.l_header #wrapper .nav-main .title img {
  height: 64px;
}
.l_header .nav-sub {
  max-width: 1080px;
  margin: auto;
}
.l_header .nav-sub .title {
  font-weight: bold;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  line-height: 1.2;
  max-height: 64px;
  white-space: normal;
  flex-shrink: 1;
}
.l_header .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  line-height: 64px;
  align-items: center;
}
.l_header .switcher .s-toc {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (max-width: 768px) {
  .l_header .switcher .s-toc {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
  }
}
.l_header .switcher >li {
  height: 48px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  margin: 2px;
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li {
    margin: 0 1px;
    height: 48px;
  }
}
.l_header .switcher >li >a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  align-items: center;
  width: 48px;
  height: 48px;
  padding: 0.85em 1.1em;
  border-radius: 100px;
  -webkit-border-radius: 100px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  color: #3dd9b6;
}
.l_header .switcher >li >a:hover {
  border: none;
}
.l_header .switcher >li >a.active,
.l_header .switcher >li >a:active {
  border: none;
  background: var(--color-site-bg);
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li >a {
    width: 36px;
    height: 48px;
  }
}
.l_header .nav-sub .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
}
.l_header .m_search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  height: 64px;
  width: 240px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (max-width: 1024px) {
  .l_header .m_search {
    width: 44px;
    min-width: 44px;
  }
  .l_header .m_search input::placeholder {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
  }
  .l_header .m_search:hover {
    width: 240px;
  }
  .l_header .m_search:hover input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (min-width: 500px) {
  .l_header .m_search:hover .input {
    width: 100%;
  }
  .l_header .m_search:hover .input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search {
    min-width: 0;
  }
  .l_header .m_search input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.l_header .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  width: 100%;
  align-items: center;
}
.l_header .m_search .icon {
  position: absolute;
  width: 36px;
  left: 5px;
  color: var(--color-meta);
}
@media screen and (max-width: 500px) {
  .l_header .m_search .icon {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
.l_header .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: 1.3;
  width: 100%;
  color: var(--color-text);
  background: #fafafa;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding-left: 40px;
  font-size: 0.875rem;
  border-radius: 8px;
  -webkit-border-radius: 8px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (min-width: 500px) {
  .l_header .m_search .input:focus {
    box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
    -webkit-box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search .input {
    background: var(--color-block);
    padding-left: 8px;
    border: none;
  }
  .l_header .m_search .input:hover,
  .l_header .m_search .input:focus {
    border: none;
  }
}
@media (max-width: 500px) {
  .l_header .m_search {
    left: 0;
    width: 0;
    overflow: hidden;
    position: absolute;
    background: #fff;
    transition: all 0.28s ease;
    -webkit-transition: all 0.28s ease;
    -khtml-transition: all 0.28s ease;
    -moz-transition: all 0.28s ease;
    -o-transition: all 0.28s ease;
    -ms-transition: all 0.28s ease;
  }
  .l_header .m_search .input {
    border-radius: 32px;
    -webkit-border-radius: 32px;
    margin-left: 16px;
    padding-left: 16px;
  }
  .l_header.z_search-open .m_search {
    width: 100%;
  }
  .l_header.z_search-open .m_search .input {
    width: calc(100% - 120px);
  }
}
ul.m-pc >li>a {
  color: inherit;
  border-bottom: 2px solid transparent;
}
ul.m-pc >li>a:active,
ul.m-pc >li>a.active {
  border-bottom: 2px solid #3dd9b6;
}
ul.m-pc li:hover >ul.list-v,
ul.list-v li:hover >ul.list-v {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.nav-list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  align-items: stretch;
}
ul.nav-list-h>li {
  position: relative;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  height: 100%;
  line-height: 2.4;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
ul.nav-list-h>li >a {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 600;
}
ul.list-v {
  z-index: 1;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: absolute;
  background: var(--color-card);
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  margin-top: -6px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  padding: 8px 0;
}
ul.list-v.show {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.list-v hr {
  margin-top: 8px;
  margin-bottom: 8px;
}
ul.list-v >li {
  white-space: nowrap;
  word-break: keep-all;
}
ul.list-v >li.header {
  font-size: 0.78125rem;
  font-weight: bold;
  line-height: 2em;
  color: var(--color-meta);
  margin: 8px 16px 4px;
}
ul.list-v >li.header i {
  margin-right: 8px;
}
ul.list-v >li ul {
  margin-left: 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: -40px;
}
ul.list-v .aplayer-container {
  min-height: 64px;
  padding: 6px 16px;
}
ul.list-v >li>a {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  color: var(--color-list);
  font-size: 0.875rem;
  font-weight: bold;
  line-height: 36px;
  padding: 0 20px 0 16px;
  text-overflow: ellipsis;
  margin: 0 4px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
@media screen and (max-width: 1024px) {
  ul.list-v >li>a {
    line-height: 40px;
  }
}
ul.list-v >li>a >i {
  margin-right: 8px;
}
ul.list-v >li>a:active,
ul.list-v >li>a.active {
  color: var(--color-list-hl);
}
ul.list-v >li>a:hover {
  color: var(--color-list-hl);
  background: var(--color-site-bg);
}
.l_header .menu >ul>li>a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding: 0 8px;
}
.l_header .menu >ul>li>a >i {
  margin-right: 4px;
}
.l_header ul.nav-list-h>li {
  color: var(--color-list);
  line-height: 64px;
}
.l_header ul.nav-list-h>li >a {
  max-height: 64px;
  overflow: hidden;
  color: inherit;
}
.l_header ul.nav-list-h>li >a:active,
.l_header ul.nav-list-h>li >a.active {
  color: #3dd9b6;
}
.l_header ul.nav-list-h>li:hover>a {
  color: var(--color-list-hl);
}
.l_header ul.nav-list-h>li i.music {
  animation: rotate-effect 1.5s linear infinite;
  -webkit-animation: rotate-effect 1.5s linear infinite;
  -khtml-animation: rotate-effect 1.5s linear infinite;
  -moz-animation: rotate-effect 1.5s linear infinite;
  -o-animation: rotate-effect 1.5s linear infinite;
  -ms-animation: rotate-effect 1.5s linear infinite;
}
@-moz-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-webkit-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-o-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
.menu-phone li ul.list-v {
  right: calc(100% - 0.5 * 16px);
}
.menu-phone li ul.list-v ul {
  right: calc(100% - 0.5 * 16px);
}
#wrapper {
  max-width: 1080px;
  margin: auto;
}
@media screen and (min-width: 2048px) {
  #wrapper {
    max-width: 55vw;
  }
}
#wrapper .menu {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
  margin: 0 16px 0 0;
}
#wrapper .menu .list-v ul {
  left: calc(100% - 0.5 * 16px);
}
.menu-phone {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: 16px;
  right: 8px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.menu-phone ul {
  right: calc(100% - 0.5 * 16px);
}
@media screen and (max-width: 500px) {
  .menu-phone {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: block;
  }
}
.l_header {
  max-width: 65vw;
  left: calc((100% - 65vw) * 0.5);
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
@media screen and (max-width: 2048px) {
  .l_header {
    max-width: 1112px;
    left: calc((100% - 1112px) * 0.5);
  }
}
@media screen and (max-width: 1112px) {
  .l_header {
    left: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    max-width: 100%;
  }
}
@media screen and (max-width: 500px) {
  .l_header .container {
    margin-left: 0;
    margin-right: 0;
  }
  .l_header #wrapper .nav-main .title {
    padding-left: 16px;
    padding-right: 16px;
  }
  .l_header #wrapper .nav-sub {
    width: 100%;
  }
  .l_header #wrapper .nav-sub .title {
    overflow-y: scroll;
    margin-top: 2px;
    padding: 8px 16px;
  }
  .l_header #wrapper .switcher {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
    margin-right: 8px;
  }
  .l_header .menu {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
@media screen and (max-width: 500px) {
  .list-v li {
    max-width: 270px;
  }
}
#u-search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 60px 20px;
  z-index: 1001;
}
@media screen and (max-width: 680px) {
  #u-search {
    padding: 0px;
  }
}
@media screen and (prefers-color-scheme: dark) and (max-width: 500px) {
  .l_header .m_search {
    background: var(--color-site-bg) !important;
  }
}

  </style>
  <link rel="stylesheet" href="/css/style.css" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.css"></noscript>
    <script>
      let userColorScheme=localStorage.getItem("color-scheme")
      if(userColorScheme){
        document.documentElement.setAttribute("color-scheme", userColorScheme);
      }
    </script>
  
<script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
    '.kill-t{'+
      'font-size: 2rem;'+
    '}'+
    '.kill-c{'+
      'font-size: 1.2rem;'+
    '}'+
		'#l_header,#l_body{'+
			'display: none;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        `<span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>`+
        `<span class="kill-c">微软已经于2016年终止了对 Internet Explorer (IE) 10 及更早版本的支持，<br/>继续使用存在极大的安全隐患，请使用当代主流的浏览器进行访问。</span><br/>`+
        `<a target="_blank" rel="noopener" href="https://blogs.windows.com/windowsexperience/2021/05/19/the-future-of-internet-explorer-on-windows-10-is-in-microsoft-edge/"><strong>了解详情 ></strong></a>`+
    '</div>');
</script>


<noscript>
	<style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
    .kill-t{
      font-size: 2rem;
    }
    .kill-c{
      font-size: 1.2rem;
    }
		#l_header,#l_body{
			display: none;
		}
	</style>
    <div class="kill-noscript">
        <span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>
        <span class="kill-c">本页面需要浏览器支持（启用）JavaScript</span><br/>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a>
    </div>
</noscript>


  <script>
  /************这个文件存放不需要重载的全局变量和全局函数*********/
  window.volantis = {}; // volantis 全局变量
  volantis.debug = "false"; // 调试模式
  volantis.dom = {}; // 页面Dom see: /source/js/app.js etc.

  volantis.GLOBAL_CONFIG ={
    debug: false,
    cdn: {"js":{"app":"/js/app.js","parallax":"/js/plugins/parallax.js","rightMenu":"/js/plugins/rightMenu.js","rightMenus":"/js/plugins/rightMenus.js","sites":"/js/plugins/tags/sites.js","friends":"/js/plugins/tags/friends.js","contributors":"/js/plugins/tags/contributors.js","search":"/js/search/hexo.js"},"css":{"style":"/css/style.css"}},
    default: {"avatar":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg","link":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/link/8f277b4ee0ecd.svg","cover":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg","image":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/image/2659360.svg"},
    lastupdate: new Date(1683557398440),
    sidebar: {
      for_page: ["blogger","category","tagcloud","webinfo","lastupdate","donate"],
      for_post: ["toc"],
      webinfo: {
        lastupd: {
          enable: true,
          friendlyShow: true
        },
        runtime: {
          data: "2021/09/20",
          unit: "天"
        }
      }
    },
    plugins: {
      message: {"enable":true,"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/css/iziToast.min.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/js/iziToast.min.js","icon":{"default":"fa-light fa-info-circle light-blue","quection":"fa-light fa-question-circle light-blue"},"time":{"default":5000,"quection":20000},"position":"topRight","transitionIn":"bounceInLeft","transitionOut":"fadeOutRight","titleColor":"var(--color-text)","messageColor":"var(--color-text)","backgroundColor":"var(--color-card)","zindex":2147483647,"copyright":{"enable":true,"title":"知识共享许可协议","message":"请遵守 CC BY-NC-SA 4.0 协议。","icon":"fa-brands fa-creative-commons light-blue"},"aplayer":{"enable":true,"play":"fa-light fa-play light-blue","pause":"fa-light fa-pause light-blue","error":"fa-light fa-exclamation-square red"},"rightmenu":{"enable":true,"notice":true}},
      fancybox: {"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.umd.js"},
      
      aplayer: {
        id: 5062959861,
        enable:true
      },
      
      
      
      rightmenus: {"enable":true,"order":["plugins.navigation","hr","plugins.inputBox","plugins.seletctText","plugins.elementCheck","plugins.elementImage","hr","menus.darkMode","hr","plugins.articlePage","hr","music"],"options":{"iconPrefix":"fa-duotone PETERRIVE","articleShowLink":true,"musicAlwaysShow":true},"plugins":{"navigation":[{"id":"left","name":"转到上一页","icon":"fa-duotone fa-arrow-left PETERRIVE","event":"history.back()","group":"navigation"},{"id":"right","name":"转到下一页","icon":"fa-duotone fa-arrow-right PETERRIVE","event":"history.forward()","group":"navigation"},{"id":"redo","name":"刷新当前页面","icon":"fa-duotone fa-redo PETERRIVE","event":"window.location.reload()","group":"navigation"},{"id":"home","name":"回到首页","icon":"fa-duotone fa-home PETERRIVE","link":"/","group":"navigation"},{"id":"up","name":"回到顶部","icon":"fa-duotone fa-arrow-up PETERRIVE","event":"VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)","group":"navigation"}],"inputBox":[{"id":"copyPaste","name":"粘贴文本","icon":"fa-duotone PETERRIVE fa-paste","event":"copyPaste","group":"inputBox"},{"id":"copyAll","name":"全选文本","icon":"fa-duotone PETERRIVE fa-object-ungroup","event":"copyAll","group":"inputBox"},{"id":"copyCut","name":"剪切文本","icon":"fa-duotone PETERRIVE fa-cut","event":"copyCut","group":"inputBox"}],"seletctText":[{"id":"copyText","name":"复制文本","icon":"fa-duotone PETERRIVE fa-copy","event":"copyText","group":"seletctText"},{"id":"searchWord","name":"站内搜索","icon":"fa-duotone PETERRIVE fa-search","event":"OpenSearch(__text__)","group":"seletctText"},{"id":"bingSearch","name":"必应搜索","icon":"fa-duotone PETERRIVE fa-search","event":"window.open(`https://cn.bing.com/search?q=${__text__}`)","group":"seletctText"}],"elementCheck":[{"id":"openTab","name":"新标签页打开","icon":"fa-duotone PETERRIVE fa-external-link-square-alt","event":"window.open(__link__)","group":"elementCheck"},{"id":"copyLink","name":"复制链接地址","icon":"fa-duotone PETERRIVE fa-link","event":"copyLink","group":"elementCheck"}],"elementImage":[{"id":"copyImg","name":"复制图片","icon":"fa-duotone PETERRIVE fa-image","event":"copyImg","group":"elementImage"},{"id":"googleImg","name":"谷歌识图","icon":"fa-duotone PETERRIVE fa-images","event":"window.open(`https://www.google.com/searchbyimage?image_url=${__link__}`)","group":"elementImage"}],"articlePage":[{"id":"printMode","name":"打印页面","icon":"fa-duotone fa-print TURQUOISE","event":"printMode","group":"articlePage"},{"id":"readMode","name":"阅读模式","icon":"fa-duotone fa-book-open EMERALD","event":"readMode","group":"articlePage"}]},"menus":{"link":[{"id":"help","name":"常见问题","icon":"fa-solid fa-question","link":"https://volantis.js.org/faqs/","group":"link"},{"id":"examples","name":"示例博客","icon":"fa-solid fa-rss","link":"https://volantis.js.org/examples/","group":"link"},{"id":"contributors","name":"加入社区","icon":"fa-solid fa-fan","link":"https://volantis.js.org/contributors/","group":"link"},"hr",{"id":"source_docs","name":"本站源码","icon":"fa-solid fa-code-branch","link":"https://github.com/volantis-x/volantis-docs/","group":"link"},{"id":"source_theme","name":"主题源码","icon":"fa-solid fa-code-branch","link":"https://github.com/volantis-x/hexo-theme-volantis/","group":"link"}],"darkMode":[{"id":"darkMode","name":"暗黑模式","icon":"fa-duotone fa-eclipse-alt WISTERIA","event":"volantis.dark.toggle()","group":"darkMode"}]}}
      
    }
  }

  /******************** volantis.EventListener ********************************/
  // 事件监听器 see: /source/js/app.js
  volantis.EventListener = {}
  // 这里存放pjax切换页面时将被移除的事件监听器
  volantis.EventListener.list = []
  //构造方法
  function volantisEventListener(type, f, ele) {
    this.type = type
    this.f = f
    this.ele = ele
  }
  // 移除事件监听器
  volantis.EventListener.remove = () => {
    volantis.EventListener.list.forEach(function (i) {
      i.ele.removeEventListener(i.type, i.f, false)
    })
    volantis.EventListener.list = []
  }
  /******************** volantis.dom.$ ********************************/
  // 注：这里没有选择器，也没有forEach一次只处理一个dom，这里重新封装主题常用的dom方法，返回的是dom对象，对象包含了以下方法，同时保留dom的原生API
  function volantisDom(ele) {
    if (!ele) ele = document.createElement("div")
    this.ele = ele;
    // ==============================================================
    this.ele.find = (c) => {
      let q = this.ele.querySelector(c)
      if (q)
        return new volantisDom(q)
    }
    // ==============================================================
    this.ele.hasClass = (c) => {
      return this.ele.className.match(new RegExp('(\\s|^)' + c + '(\\s|$)'));
    }
    this.ele.addClass = (c) => {
      this.ele.classList.add(c);
      return this.ele
    }
    this.ele.removeClass = (c) => {
      this.ele.classList.remove(c);
      return this.ele
    }
    this.ele.toggleClass = (c) => {
      if (this.ele.hasClass(c)) {
        this.ele.removeClass(c)
      } else {
        this.ele.addClass(c)
      }
      return this.ele
    }
    // ==============================================================
    // 参数 r 为 true 表示pjax切换页面时事件监听器将被移除，false不移除
    this.ele.on = (c, f, r = 1) => {
      this.ele.addEventListener(c, f, false)
      if (r) {
        volantis.EventListener.list.push(new volantisEventListener(c, f, this.ele))
      }
      return this.ele
    }
    this.ele.click = (f, r) => {
      this.ele.on("click", f, r)
      return this.ele
    }
    this.ele.scroll = (f, r) => {
      this.ele.on("scroll", f, r)
      return this.ele
    }
    // ==============================================================
    this.ele.html = (c) => {
      // if(c=== undefined){
      //   return this.ele.innerHTML
      // }else{
      this.ele.innerHTML = c
      return this.ele
      // }
    }
    // ==============================================================
    this.ele.hide = (c) => {
      this.ele.style.display = "none"
      return this.ele
    }
    this.ele.show = (c) => {
      this.ele.style.display = "block"
      return this.ele
    }
    // ==============================================================
    return this.ele
  }
  volantis.dom.$ = (ele) => {
    return !!ele ? new volantisDom(ele) : null;
  }
  /******************** RunItem ********************************/
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = ()=>{
          volantis.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) =>{
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index,1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }
  /******************** Pjax ********************************/
  // /layout/_plugins/pjax/index.ejs
  // volantis.pjax.send(callBack[,"callBackName"]) 传入pjax:send回调函数
  // volantis.pjax.push(callBack[,"callBackName"]) 传入pjax:complete回调函数
  // volantis.pjax.error(callBack[,"callBackName"]) 传入pjax:error回调函数
  volantis.pjax = {};
  volantis.pjax.method = {
    complete: new RunItem(),
    error: new RunItem(),
    send: new RunItem(),
  };
  volantis.pjax = Object.assign(volantis.pjax, {
    push: volantis.pjax.method.complete.push,
    error: volantis.pjax.method.error.push,
    send: volantis.pjax.method.send.push,
  });
  /******************** RightMenu ********************************/
  // volantis.rightmenu.handle(callBack[,"callBackName"]) 外部菜单项控制
  // 可在 volantis.mouseEvent 处获取右键事件
  volantis.rightmenu = {};
  volantis.rightmenu.method = {
    handle: new RunItem(),
  }
  volantis.rightmenu = Object.assign(volantis.rightmenu, {
    handle: volantis.rightmenu.method.handle.push,
  });
  /********************  Dark Mode  ********************************/
  // /layout/_partial/scripts/darkmode.ejs
  // volantis.dark.mode 当前模式 dark or light
  // volantis.dark.toggle() 暗黑模式触发器
  // volantis.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  volantis.dark = {};
  volantis.dark.method = {
    toggle: new RunItem(),
  };
  volantis.dark = Object.assign(volantis.dark, {
    push: volantis.dark.method.toggle.push,
  });
  /********************  Message  ********************************/
  // VolantisApp.message
  /********************  isMobile  ********************************/
  // /source/js/app.js
  // volantis.isMobile
  // volantis.isMobileOld
  /********************脚本动态加载函数********************************/
  // volantis.js(src, cb)  cb 可以传入onload回调函数 或者 JSON对象 例如: volantis.js("src", ()=>{}) 或 volantis.js("src", {defer:true,onload:()=>{}})
  // volantis.css(src)

  // 返回Promise对象，如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载
  // (async () => {
  //     await volantis.js("...theme.plugins.aplayer.js.aplayer...")
  //     await volantis.js("...theme.plugins.aplayer.js.meting...")
  // })();

  // 已经加入了setTimeout
  volantis.js = (src, cb) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }
  volantis.css = (src) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  }
  /********************按需加载的插件********************************/
  // volantis.import.jQuery().then(()=>{})
  volantis.import = {
    jQuery: () => {
      if (typeof jQuery == "undefined") {
        return volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/jquery/dist/jquery.min.js")
      } else {
        return new Promise(resolve => {
          resolve()
        });
      }
    }
  }
  /********************** requestAnimationFrame ********************************/
  // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
  // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
  volantis.requestAnimationFrame = (fn)=>{
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
    }
    window.requestAnimationFrame(fn)
  }
  /************************ layoutHelper *****************************************/
  volantis.layoutHelper = (helper, html, opt)=>{
    opt = Object.assign({clean:false, pjax:true}, opt)
    function myhelper(helper, html, clean) {
      volantis.tempDiv = document.createElement("div");
      volantis.tempDiv.innerHTML = html;
      let layoutHelper = document.querySelector("#layoutHelper-"+helper)
      if (layoutHelper) {
        if (clean) {
          layoutHelper.innerHTML = ""
        }
        layoutHelper.append(volantis.tempDiv);
      }
    }
    myhelper(helper, html, opt.clean)
    if (opt.pjax) {
      volantis.pjax.push(()=>{
        myhelper(helper, html, opt.clean)
      },"layoutHelper-"+helper)
    }
  }
  /****************************** 滚动事件处理 ****************************************/
  volantis.scroll = {
    engine: new RunItem(),
    unengine: new RunItem(),
  };
  volantis.scroll = Object.assign(volantis.scroll, {
    push: volantis.scroll.engine.push,
  });
  // 滚动条距离顶部的距离
  volantis.scroll.getScrollTop = () =>{
    let scrollPos;
    if (window.pageYOffset) {
      scrollPos = window.pageYOffset;
    } else if (document.compatMode && document.compatMode != 'BackCompat') {
      scrollPos = document.documentElement.scrollTop;
    } else if (document.body) {
      scrollPos = document.body.scrollTop;
    }
    return scrollPos;
  }
  // 使用 requestAnimationFrame 处理滚动事件
  // `volantis.scroll.del` 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率. 数值为正数时, 表示向下滚动. 数值为负数时, 表示向上滚动.
  volantis.scroll.handleScrollEvents = () => {
    volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop()
    function loop() {
      const scrollTop = volantis.scroll.getScrollTop();
      if (volantis.scroll.lastScrollTop !== scrollTop) {
        volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop;
        volantis.scroll.lastScrollTop = scrollTop;
        // if (volantis.scroll.del > 0) {
        //   console.log("向下滚动");
        // } else {
        //   console.log("向上滚动");
        // }
        // 注销过期的unengine未滚动事件
        volantis.scroll.unengine.list=[]
        volantis.scroll.engine.start();
      }else{
        volantis.scroll.unengine.start();
      }
      volantis.requestAnimationFrame(loop)
    }
    volantis.requestAnimationFrame(loop)
  }
  volantis.scroll.handleScrollEvents()
  volantis.scroll.ele = null;
  // 触发页面滚动至目标元素位置
  volantis.scroll.to = (ele, option = {}) => {
    if (!ele) return;
    volantis.scroll.ele = ele;
    // 默认配置
    opt = {
      top: ele.getBoundingClientRect().top + document.documentElement.scrollTop,
      behavior: "smooth"
    }
    // 定义配置
    if ("top" in option) {
      opt.top = option.top
    }
    if ("behavior" in option) {
      opt.behavior = option.behavior
    }
    if ("addTop" in option) {
      opt.top += option.addTop
    }
    if (!("observerDic" in option)) {
      option.observerDic = 100
    }
    // 滚动
    window.scrollTo(opt);
    // 监视器
    // 监视并矫正元素滚动到指定位置
    // 用于处理 lazyload 引起的 cls 导致的定位失败问题
    // option.observer = false
    if (option.observer) {
      setTimeout(() => {
        if (volantis.scroll.ele != ele) {
          return
        }
        volantis.scroll.unengine.push(() => {
          let me = ele.getBoundingClientRect().top
          if(!(me >= -option.observerDic && me <= option.observerDic)){
            volantis.scroll.to(ele, option)
          }
          volantis.scroll.unengine.remove("unengineObserver")
        },"unengineObserver")
      },1000)
    }
  }
  /********************** Content Visibility ********************************/
  // 见 source/css/first.styl 如果遇到任何问题 删除 .post-story 即可
  // 一个元素被声明 content-visibility 属性后 如果元素不在 viewport 中 浏览器不会计算其后代元素样式和属性 从而节省 Style & Layout 耗时
  // content-visibility 的副作用: 锚点失效 等等(实验初期 暂不明确), 使用此方法清除样式
  volantis.cleanContentVisibility = ()=>{
    if (document.querySelector(".post-story")) {
      console.log("cleanContentVisibility");
      document.querySelectorAll(".post-story").forEach(e=>{
        e.classList.remove("post-story")
      })
    }
  }
  /******************************************************************************/
  /******************************************************************************/
  /******************************************************************************/
  //图像加载出错时的处理
  function errorImgAvatar(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg";
    img.onerror = null;
  }
  function errorImgCover(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg";
    img.onerror = null;
  }
  /******************************************************************************/
</script>

  <!-- import head_end begin -->
  <!-- import head_end end -->
  <!-- Custom Files headEnd begin-->
  
  <!-- Custom Files headEnd end-->
  <!-- front-matter head_end begin -->
  <!-- front-matter head_end end -->
</head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <!-- import body_begin begin-->
    <!-- import body_begin end-->
    <!-- Custom Files bodyBegin begin-->
    
    <!-- Custom Files bodyBegin end-->
    <!-- front-matter body_begin begin -->
    <!-- front-matter body_begin end -->
    <header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow floatable blur " style='opacity: 0' >
  <div class='container'>
  <div id='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a id="s-comment" class="fa-solid fa-comments fa-fw" target="_self"  href="/" onclick="return false;" title="comment"></a></li>
        
          <li><a id="s-toc" class="s-toc fa-solid fa-list fa-fw" target="_self"  href="/" onclick="return false;" title="toc"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
            CodingStudio <sup style="color:#ff9800">alpha</sup>
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="文档"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fa-duotone fa-book faa-tada fa-fw'></i>文档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="分类"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fa-duotone fa-play-circle faa-tada fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fa-duotone fa-question-circle faa-tada fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fa-duotone fa-heart fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                 href="/" onclick="return false;" title="更多"
                  
                  
                  >
                  <i class='fa-duotone fa-ellipsis-v fa-fw'></i>更多
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box header toggle-mode-btn">
                  <i class='fa-solid fa-moon fa-fw'></i>暗黑模式
                </a>
              <li>
            
          
                    
                      
            
              
                <li>
                  <a class="menuitem flat-box">
                    <i class='fa-solid fa-compact-disc fa-fw music'></i>背景音乐
                  </a>
                  <ul class="list-v">
                    <li>
                      <div class="aplayer-container">
                        

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.4'
      loop='all'
      order='random'
      fixed='false'
      list-max-height='320px'
      server='netease'
      type='playlist'
      id='5062959861'
      list-folded='true'>
    </meting-js>
  


                      </div>
                    </li>
                  </ul>
                <li>
              
            
          
                    
                  </ul>
                
              </li>
            
          
          
				</ul>
			</div>
      
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fa-solid fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>
      

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fa-solid fa-search fa-fw" target="_self" href="/" onclick="return false;" title="search"></a></li>
				
				<li>
          <a class="s-menu fa-solid fa-bars fa-fw" target="_self" href="/" onclick="return false;" title="menu"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="文档"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fa-duotone fa-book faa-tada fa-fw'></i>文档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="分类"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fa-duotone fa-play-circle faa-tada fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fa-duotone fa-question-circle faa-tada fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fa-duotone fa-heart fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                 href="/" onclick="return false;" title="更多"
                  
                  
                  >
                  <i class='fa-duotone fa-ellipsis-v fa-fw'></i>更多
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box header toggle-mode-btn">
                  <i class='fa-solid fa-moon fa-fw'></i>暗黑模式
                </a>
              <li>
            
          
                    
                      
            
              
            
          
                    
                  </ul>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>

      <!-- Custom Files header begin -->
      
      <!-- Custom Files header end -->
		</div>
	</div>
  </div>
</header>

    <div id="l_body">
      <div id="l_cover">
  
    
      <!-- see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs -->
      <div id="half" class='cover-wrapper post search' style="display: ;">
        
  <div id="parallax-window"></div>

<div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">CodingStudio</p>
    
    
      <p class="subtitle">努力进步</p>
    
  </div>
  <div class='bottom'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="搜一下" />
          <i class="icon fa-solid fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <div class='list-h'>
        
      </div>
    </div>
  </div>
</div>

        <div id="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
    
  
</div>

      <div id="safearea">
        <div class="body-wrapper">
          
<div id="l_main" class=''>
  <article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow floatable blur article-type-post" id="post" itemscope itemprop="blogPost">
  <link itemprop="mainEntityOfPage" href="http://jay1060950003.github.io/2022/03/20/计算机基础知识/计算机网络/">
  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="CodingStudio">
  </span>
  <span hidden itemprop="post" itemscope itemtype="http://schema.org/Post">
    <meta itemprop="name" content="CodingStudio">
    <meta itemprop="description" content="自己的创作及学习空间">
  </span>
  


  
    <span hidden>
      <meta itemprop="image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
    </span>
  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title" itemprop="name headline">
        计算机网络
      </h1>
      <div class='new-meta-box'>
        
          
            
<div class='new-meta-item author' itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a itemprop="url" class='author' target="_blank" href="https://github.com/jay1060950003" rel="nofollow noopener">
    <img itemprop="image" src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/apple-touch-icon.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/apple-touch-icon.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
    <p itemprop="name">jay1060950003</p>
  </a>
</div>

          
        
          
            
  <div class='new-meta-item category'>
    <i class="fa-solid fa-folder-open fa-fw" aria-hidden="true"></i>
    <a class="category-link" href="/categories/Basic/">Basic</a>
    
      <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing">
        <a href="/categories/Basic/" itemprop="url"><span itemprop="name">Basic</span></a>
      </span>
    
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateCreated datePublished" datetime="2022-03-20T17:25:58+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2022年3月20日</p>
  </a>
</div>

          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fa-solid fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>字数：31.5k 字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fa-solid fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>时长：110 分钟</p>
    </a>
  </div>


          
        
          
            


<div class="new-meta-item browse">
  <a class='notlink'>
    <p>
      <i class="fa-solid fa-eye fa-fw" aria-hidden="true"></i>
      
      <span id="busuanzi_value_page_pv"><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span>
      
      <span>次浏览</span>
    </p>
  </a>
</div>


          
        
        <!-- Custom Files topMeta begin-->
        
        <!-- Custom Files topMeta end-->
      </div>
    
  </div>


  <div id="layoutHelper-page-plugins"></div>
  <div id="post-body" itemprop="articleBody">
    <h1 id="引言"><a class="markdownIt-Anchor" href="#引言"></a> 引言</h1>
<ul>
<li>《计算机网络|自顶向下方法|第七版》学习笔记</li>
</ul>
<span id="more"></span>
<hr />
<h1 id="1-计算机网络和因特网"><a class="markdownIt-Anchor" href="#1-计算机网络和因特网"></a> 1. 计算机网络和因特网</h1>
<div class="story post-story"><h2 id="11-什么是因特网"><a class="markdownIt-Anchor" href="#11-什么是因特网"></a> 1.1 什么是因特网</h2>
<h3 id="111-具体构成描述"><a class="markdownIt-Anchor" href="#111-具体构成描述"></a> 1.1.1 具体构成描述</h3>
<ul>
<li><strong>节点</strong>:
<ul>
<li>主机及其上运行的应用程序</li>
<li>路由器,交换机等网络交换设备</li>
</ul>
</li>
<li><strong>边</strong>:<strong>通信链路</strong>
<ul>
<li>接入网链路:主机连接到互联网的链路</li>
<li>主干链路:路由器间的链路</li>
</ul>
</li>
<li><strong>主机</strong>或<strong>端系统</strong>
<ul>
<li>端系统通过<strong>通信链路</strong>和<strong>分组交换机</strong>连接到一起</li>
<li>不同的链路能够以不同的速率传输数据,链路的传输速率以**比特/秒(bit/s,bps)**度量</li>
<li><strong>分组</strong>:当一台端系统要向另一台端系统发送数据时,发送端系统将数据分段,并为每段加上首部字节</li>
<li><strong>分组交换机</strong>:转发分组
<ul>
<li><strong>分组交换机包括</strong>:<strong>路由器</strong>和<strong>链路层交换机</strong></li>
<li>链路层交换机通常用于接入网中,而路由器通常用于网络核心中</li>
</ul>
</li>
</ul>
</li>
<li>端系统,分组交换机和其他因特网部件需要运行一系列协议
<ul>
<li>TCP/IP为因特网的主要协议</li>
<li>Internet标准
<ul>
<li>RFC:IETF的标准文档</li>
<li>IETF:因特网工程任务组</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="112-服务描述"><a class="markdownIt-Anchor" href="#112-服务描述"></a> 1.1.2 服务描述</h3>
<ul>
<li><strong>分布式应用程序</strong>:应用程序涉及多个相互交换数据的端系统
<ul>
<li>因特网应用程序运行在端系统上,即它们并不运行在网络核心中的分组交换机中</li>
<li>尽管分组交换机能够加速端系统之间的数据交换,但它们并不在意作为数据的源或宿的应用</li>
</ul>
</li>
<li>与因特网相连的端系统提供了一个<strong>套接字接口</strong>,该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式</li>
</ul>
<h3 id="113-什么是协议"><a class="markdownIt-Anchor" href="#113-什么是协议"></a> 1.1.3 什么是协议</h3>
<ul>
<li>协议定义了在两个或多个通信实体之间交换的报文格式和次序,以及在报文传输和/或接收或其他事件方面所采取的动作</li>
</ul>
</div><div class="story post-story"><h2 id="12-网络边缘"><a class="markdownIt-Anchor" href="#12-网络边缘"></a> 1.2 网络边缘</h2>
<ul>
<li>通常把与因特网相连的计算机和其他设备称为<strong>端系统</strong>
<ul>
<li>位于网络的边缘,故称为<strong>端系统</strong></li>
<li>划分为:<strong>客户和服务器两大类</strong></li>
</ul>
</li>
<li><strong>接入网</strong>:是指将端系统屋里连接到其边缘路由器的网络
<ul>
<li><strong>边缘路由器</strong>:是指端系统到任何其他远程端系统的路径上的第一台路由器</li>
</ul>
</li>
<li><strong>采用网络设施的面向连接服务</strong>:TCP——传输控制协议</li>
<li><strong>采用基础设施的无连接服务</strong>:UDP——用户数据报协议</li>
</ul>
</div><div class="story post-story"><h2 id="13-网络核心"><a class="markdownIt-Anchor" href="#13-网络核心"></a> 1.3 网络核心</h2>
<h3 id="131-分组交换"><a class="markdownIt-Anchor" href="#131-分组交换"></a> 1.3.1 分组交换</h3>
<ul>
<li>在各种网络应用中,端系统彼此交换报文</li>
<li>为了系统向目的端系统发送一个报文,源将长报文划分为较小的数据块,称之为<strong>分组</strong></li>
<li>在源和目的地之间,每个分组都通过通信链路和<strong>分组交换机</strong>(路由器或链路层交换机)传送</li>
<li>分组以等于该链路最大传输速率的速度传输通过通信链路</li>
<li>1 存储转发传输
<ul>
<li>多数分组交换机在<strong>链路的输入端</strong>使用<strong>存储转发传输机制</strong></li>
<li>存储转发传输是指在交换机能够开始向输出链路传输该分组的第一个比特之前,必须接受到整个分组</li>
<li>通过由N条速率均为R的链路组成的路径,从源到目的地发送一个分组,端到端时延为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mtext>端到端</mtext></msub><mo>=</mo><mi>N</mi><mfrac><mi>L</mi><mi>R</mi></mfrac></mrow><annotation encoding="application/x-tex">d_{端到端} = N \frac{L}{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">端</span><span class="mord cjk_fallback mtight">到</span><span class="mord cjk_fallback mtight">端</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
</li>
<li>2 排队时延和分组丢失
<ul>
<li>对于每条相连的链路,该分组交换机具有一个输出缓存(输出队列),用于存储路由器准备发往那条链路的分组,除了存储转发时延之外,分组还需要承受输出缓存的<strong>排队时延</strong></li>
<li>缓存空间的大小有限,一个到达分组可能发现该缓存已被完全充满,此情况下会出现<strong>丢包</strong>,到达的分组或已经排队的分组之一会被丢弃</li>
</ul>
</li>
<li>3 转发表和路由选择协议
<ul>
<li>路由器从相连的一条通信链路得到分组,然后向相连的另一条通信链路转发该分组</li>
<li>在因特网中,每个端系统都具有IP地址,当源主机向目的端系统发送分组时,源在该分组的首部包含了目的地的IP地址.当一个分组到达网络中的路由器时,路由器会检查该分组的目的地址的一部分,并向一台相邻的路由器转发该分组.每台路由器都有一个<strong>转发表</strong>,用于将目的地址映射成输出链路.当某分组到达一台路由器时,路由器会检查该地址,并用这个目的地址搜索其转发表,以发现适当的出链路,路由器将分组导向该出链路</li>
</ul>
</li>
</ul>
<h3 id="132-电路交换"><a class="markdownIt-Anchor" href="#132-电路交换"></a> 1.3.2 电路交换</h3>
<ul>
<li>通过网络链路和交换机移动数据有两种基本方法:<strong>电路交换</strong>和<strong>分组交换</strong></li>
<li>在电路交换网络中,在端系统间通信会话期间,预留了端系统沿路径通信所需要的资源,在分组交换网络中,这些资源不需要预留</li>
<li><strong>端到端连接</strong>:网络在两台主机之间创建的一条专用连接</li>
<li>电路交换网络中的复用:链路中的电路时通过频分复用或时分复用来实现的</li>
</ul>
<h3 id="133-网络的网络"><a class="markdownIt-Anchor" href="#133-网络的网络"></a> 1.3.3 网络的网络</h3>
<ul>
<li>网络结构1,用单一的全球传输ISP互联所有接入ISP</li>
<li>网络结构2,由数十万接入ISP和多个全球传输ISP组成
<ul>
<li>是一种两层的等级结构,其中全球传输供应商位于顶层,而接入ISP位于底层</li>
</ul>
</li>
<li>网络结构3,多等级结构</li>
<li>在等级化网络结构3上增加存在点(PoP),多宿,对等和因特网交换点就与今天的因特网相似
<ul>
<li>PoP存在于等级结构的所有层次,但底层等级除外,一个PoP只是提供商网络中的一台或多台路由器群组</li>
<li>任何ISP(除了第一层)可以选择<strong>多宿</strong>,即可以与两个或更多提供商ISP连接</li>
<li>位于相同等级结构层次的邻近一对ISP能都<strong>对等</strong>,能直接将网络连在一起,使它们之间的所有流量经直接连接而不是通过上游的中间ISP传输</li>
<li>沿着相同线路,第三方公司能创建一个<strong>因特网交换点(IXP)</strong>,IXP是一个因特网汇合点,多个ISP在IXP一起对等</li>
<li><mark>网络结构4:由接入ISP,区域ISP,第一层ISP,PoP,多宿,对等和IXP组成</mark></li>
</ul>
</li>
<li>网络结构5:在网络结构4顶部增加内容提供商网络</li>
</ul>
</div><div class="story post-story"><h2 id="14-分组交换网中的时延丢包和吞吐量"><a class="markdownIt-Anchor" href="#14-分组交换网中的时延丢包和吞吐量"></a> 1.4 分组交换网中的时延,丢包和吞吐量</h2>
<h3 id="141-分组交换网中的时延概念"><a class="markdownIt-Anchor" href="#141-分组交换网中的时延概念"></a> 1.4.1 分组交换网中的时延概念</h3>
<ul>
<li>时延包括:<strong>节点处理时延</strong>,<strong>排队时延</strong>,<strong>传输时延</strong>和<strong>传播时延</strong>
<ul>
<li>时延总体累加起来是<strong>节点总时延</strong></li>
<li>处理时延
<ul>
<li>检查分组首部和决定分组导向何处所需要的时间是处理时延的一部分,还包括其他因素</li>
</ul>
</li>
<li>排队时延
<ul>
<li>在队列中,当分组在链路上等待传输时,经受排队时延</li>
<li>一个特定分组的排队时延却决于先期到达的正在排队等待向链路传输的分组数量</li>
</ul>
</li>
<li>传输时延
<ul>
<li>假定分组以先到线服务方式传输,用L比特表示该分组的长度,用R bps表示从路由器A到路由器B的链路传输速率,传输时延是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">L/R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span></li>
</ul>
</li>
<li>传播时延
<ul>
<li>从链路的起点到路由器B传播所需要的时间是传播时延,该传播时延等于两台路由器之间的距离除以传播速率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">d/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal">s</span></span></span></span></li>
<li>该比特以该链路的传播速率传播.传播速率取决于链路的物体媒体</li>
</ul>
</li>
</ul>
</li>
<li>传输时延和传播时延的比较
<ul>
<li>传输时延是路由器推出该分组所需要的时间,是分组长度和链路传播速率的函数,与两路由器之间的距离无关</li>
<li>传播时延是一个比特从一台路由器传播到另一台路由器所需要的时间,是两台路由器之间距离函数,与分组长足或链路传输速率无关</li>
</ul>
</li>
<li><mark>处理时延通常是微不足道的,但对路由器的最大吞吐量有影响</mark>,最大吞吐量是一台路由器能够转发分组的最大速率</li>
</ul>
<h3 id="142-排队时延和丢包"><a class="markdownIt-Anchor" href="#142-排队时延和丢包"></a> 1.4.2 排队时延和丢包</h3>
<ul>
<li>令a表示分组到达队列的平均速率,R为传输速率,假定所有分组都是L比特组成的,则比特到达队列的平均速率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>a</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">La bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">b</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span></span></span></span>,流量强度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>a</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">La/R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>,若流量强度大于1则比特到达队列的平均速率超过从该队列传输出去的速率</li>
<li><mark>设计系统时流量强度不能大于1</mark></li>
<li>丢包
<ul>
<li>由于路由器没有地方存储信道的分组,路由器将丢弃该分组</li>
<li>一个节点的性能场不仅根据时延来度量,而且根据丢包的概率来度量</li>
</ul>
</li>
</ul>
<h3 id="143-端到端时延"><a class="markdownIt-Anchor" href="#143-端到端时延"></a> 1.4.3 端到端时延</h3>
<ul>
<li>端到端时延
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>e</mi><mi>n</mi><mi>d</mi><mo>−</mo><mi>e</mi><mi>n</mi><mi>d</mi></mrow></msub><mo>=</mo><mi>N</mi><mo stretchy="false">(</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>c</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi></mrow></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>d</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>=</mo><mi>L</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">d_{end-end} = N(d_{proc}+d_{trans}+d_{prop}), d_{trans}=L/R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span></li>
</ul>
</li>
</ul>
<h3 id="144-计算机网络中的吞吐量"><a class="markdownIt-Anchor" href="#144-计算机网络中的吞吐量"></a> 1.4.4 计算机网络中的吞吐量</h3>
<ul>
<li>在任何时间瞬间的<strong>瞬时吞吐量</strong>是主机接受到文件的速率</li>
<li>若文件由F比特组成,主机接受到所有F比特用去T秒,则文件传输的<strong>平均吞吐量</strong>为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi mathvariant="normal">/</mi><mi>T</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">F/T bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">b</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span></span></span></span></li>
<li>令服务器的与路由器之间的链路速率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">R_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,路由器与客户之间的速率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">R_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,对于简单的两链路网络,其吞吐量是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">{</mo><msub><mi>R</mi><mi>s</mi></msub><mo separator="true">,</mo><msub><mi>R</mi><mi>c</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">min\{R_s,R_c\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>,是<strong>瓶颈链路</strong>的传输速率</li>
</ul>
</div><div class="story post-story"><h2 id="15-协议层次及其服务模型"><a class="markdownIt-Anchor" href="#15-协议层次及其服务模型"></a> 1.5 协议层次及其服务模型</h2>
<h3 id="151-分层的体系结构"><a class="markdownIt-Anchor" href="#151-分层的体系结构"></a> 1.5.1 分层的体系结构</h3>
<ul>
<li>为了给网络协议的设计提供一个结构,网络设计者以<strong>分层</strong>的方式组织协议以及实现这些协议的网络硬件和软件
<ul>
<li>协议分层具有概念化和结构化的优点,分层提供了一种结构化方式来讨论系统组件.模块化使更新系统组件更为容易</li>
<li>分层的缺点是一层可能冗余较低层的功能,某层的功能可能需要可能需要仅在其他某层才出现的信息,违反层次分离的目标</li>
</ul>
</li>
<li>各层的所有协议被称为<strong>协议栈</strong>,目前由5层组成:<strong>物理层,链路层,网络层,运输层和应用层</strong>
<ul>
<li>ISO OSI参考模型为7层:<strong>物理层,链路层,网络层,运输层,会话层,表示层和应用层</strong>
<ul>
<li>表示层的作用是使通信的应用程序能够解释交换数据的含义,包括数据压缩,数据加密和数据描述</li>
<li>会话层提供了数据交换的定界和同步功能,包括了建立检查点和恢复方案的方法</li>
</ul>
</li>
</ul>
</li>
<li>应用层
<ul>
<li>应用层是网络引用程序以及它的应用层协议存留的地方</li>
<li>应用层协议分布在多个端系统上,而一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息分组,把这种位于应用层的信息分组称为<strong>报文</strong></li>
</ul>
</li>
<li>运输层
<ul>
<li>因特网的运输层在应用程序端点之间传送应用层报文</li>
<li>在因特网中,有两种运输层协议,即TCP和UDP
<ul>
<li>TCP向它的应用程序提供了面向连接的服务,包括了应用层报文向目的地的确保传递和流量控制,并提供拥塞控制机制</li>
<li>UDP协议向它的应用程序提供无连接服务,不提供不必要服务的服务,没有可靠性,没有流量控制,也没有拥塞控制</li>
</ul>
</li>
<li><strong>运输层的分组称为报文段</strong></li>
</ul>
</li>
<li>网络层
<ul>
<li>网络层负责将称为<strong>数据报</strong>的网络层分组从一台主机移动到另一台主机</li>
<li>在一台源主机中的因特网运输层协议向网络层递交运输层报文段和目的地址</li>
<li>网络层包括IP协议,定义了在数据报中各个字段以及端系统和路由器如何作用于这些字段,也包括决定路由的路由选择协议,根据该路由将数据报从源传输给目的地</li>
<li><strong>网络层简单地称为IP层</strong></li>
</ul>
</li>
<li>链路层
<ul>
<li>因特网的网络层通过源和目的地之间的一系列路由器路由数据报</li>
<li>为了将分组从一个节点移动到路径上的下一个节点,网络层必须依靠该链路层的服务.特别是在每个节点,网络层将数据报下传给链路层,链路层沿着路径将数据报传递给下一个节点,在该下一个节点,链路层将数据包上传至网络层</li>
<li><strong>链路层的分组称为帧</strong></li>
</ul>
</li>
<li>物理层
<ul>
<li>物理层的任务是将该帧的一个个比特从一个节点移动到下一个节点,在这层中的协议仍然是链路相关的,并且进一步与该链路的实际传输媒体相关</li>
</ul>
</li>
</ul>
<h3 id="152-封装"><a class="markdownIt-Anchor" href="#152-封装"></a> 1.5.2 封装</h3>
<ul>
<li>链路层交换机实现了第一层和第二层</li>
<li>路由器实现了第一层到第三层</li>
<li>封装:
<ul>
<li>在发送主机端,一个<strong>应用层报文</strong>被传给运输层.在最简单的情况下,运输层收取报文并附上附加信息,该首部将被接收端的运输层使用,应用层报文和传输层首部信息一道构成了<strong>运输层报文段</strong>,运输层报文段因此封装了应用层报文</li>
<li>运输层向网络层传输该报文段,网络层增加了如源和目的端系统地址等网络层首部信息,生成了<strong>网络层数据报</strong></li>
<li>该数据包被传递给链路层,链路层增加了它自己链路层首部信息并生成<strong>链路层帧</strong></li>
<li><mark>在每一个层中,一个分组具有两个类型的字段:首都字段和有效载荷字段,有效载荷通常使来自上一层的分组</mark></li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="16-面对攻击网络"><a class="markdownIt-Anchor" href="#16-面对攻击网络"></a> 1.6 面对攻击网络</h2>
<ul>
<li>拒绝服务攻击(DDOs)
<ul>
<li>弱点攻击</li>
<li>带宽洪泛</li>
<li>连接洪泛</li>
</ul>
</li>
<li>分组嗅探器:记录每个流经的分组副本的被动接收机</li>
<li>IP哄骗:将具有虚假源地址的分组注入因特网的能力</li>
</ul>
<hr />
<h1 id="2-应用层"><a class="markdownIt-Anchor" href="#2-应用层"></a> 2 应用层</h1>
</div><div class="story post-story"><h2 id="21-应用层协议原理"><a class="markdownIt-Anchor" href="#21-应用层协议原理"></a> 2.1 应用层协议原理</h2>
<ul>
<li>研发的网络应用程序是写出能够运行在不同的端系统和通过网络彼此通信的程序</li>
<li>网络核心设备并不是在应用层上起作用,而仅在较低层起作用,特别是在网络层及下面层次起作用,这种基本设计,即将应用软件限制在端系统的方法,促进了大量的网络应用程序的迅速研发和部署</li>
</ul>
<h3 id="211-网络应用程序体系结构"><a class="markdownIt-Anchor" href="#211-网络应用程序体系结构"></a> 2.1.1 网络应用程序体系结构</h3>
<ul>
<li>应用程序体系结构由应用程序研发者设计,规定了如何在各种端系统上组织该应用程序.在选择应用程序体系结构时,应用程序研发者利用两种主流结构之一:客户-服务器体系或对等(P2P)体系结构
<ul>
<li>在客户-服务器体系结构中,有一个总是打开打主机称为服务器,它服务于来自许多其他称为客户的主机的请求
<ul>
<li>客户相互之间不直接通信</li>
<li>服务器具有固定的,周知的地址称为IP地址</li>
</ul>
</li>
<li>在P2P体系结构中,对位于数据中心的专用服务器有最小的依赖,相反应用程序在间断连接的主机对之间使用直接通信,主机称为<strong>对等方</strong>
<ul>
<li>P2P的自扩展性,尽管每个对等方都由于请求文件产生工作负载,但每个对等方通过向其他对等方分发文件也为系统增加服务能力</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="212-进程通信"><a class="markdownIt-Anchor" href="#212-进程通信"></a> 2.1.2 进程通信</h3>
<ul>
<li>进行通信的实际上是<strong>进程</strong></li>
<li>在两个不同端系统的进程,通过跨越计算机网络交换报文而相互通信
<ul>
<li>发送进程生成并向网络中发送报文</li>
<li>接受进程接受报文并可能通过会送报文进行相应</li>
</ul>
</li>
<li>客户和服务器进程
<ul>
<li>网络应用程序由成对的进程组成,这些进程通过网络相互发送报文,发起通信的进程被标识为<strong>客户</strong>,在会话开始时等待联系的进程称为<strong>服务器</strong></li>
</ul>
</li>
<li>进程和计算机网络之间的接口
<ul>
<li>多数应用程序是由通信进程对组成的,每对中的两个进程互相发送报文</li>
<li>进程通过一个称为<strong>套接字</strong>的软件接口向网络发送报文和从网络接受报文</li>
<li>套接字是同一台主机内应用层与运输层之间的接口,套接字也称为应用程序和网络之间的应用程序编程接口(API)</li>
</ul>
</li>
<li>进程寻址
<ul>
<li>在因特网中,主机由IP地址标识,目的地端口号指定了接受主机上的接受进程</li>
<li>web服务器用端口号80来标识,邮件服务器进程用端口号25来标识</li>
</ul>
</li>
</ul>
<h3 id="213-可供应用程序使用的运输服务"><a class="markdownIt-Anchor" href="#213-可供应用程序使用的运输服务"></a> 2.1.3 可供应用程序使用的运输服务</h3>
<ul>
<li>在发送端的应用程序将报文推进该套接字,在套接字的另一侧运输层协议负责从接受进程的套接字得到该报文</li>
<li>一个运输层协议能够为调用它的应用程序提供<strong>可靠的数据传输,吞吐量,定时和安全性</strong>服务</li>
<li>可靠的数据传输
<ul>
<li>可靠的数据传输:一个协议提供了确保数据交付服务</li>
<li>运输层协议能够潜在的向应用程序提供的一个重要服务是进程到进程的可靠数据传输.当一个运输协议提供这种服务时,发送进程只要将其数据传递进该套接字,就可以完全相信该数据能无差错的到达接收进程</li>
<li><strong>容忍丢失的应用</strong>可以接收运输层协议不提供可靠数据传输时,发送进程发送的某些数据可能到达不了的接收进程</li>
</ul>
</li>
<li>吞吐量
<ul>
<li><strong>带宽敏感的应用</strong>:具有吞吐量要求的应用程序</li>
<li><strong>弹性应用</strong>:能够根据当时可用的带宽或多或少地利用使用的吞吐量</li>
</ul>
</li>
<li>定时:运输层协议能提供定时保证</li>
<li>安全性:运输层协议能为应用程序提供一种或多种安全性服务</li>
</ul>
<h3 id="214-因特网提供的运输服务"><a class="markdownIt-Anchor" href="#214-因特网提供的运输服务"></a> 2.1.4 因特网提供的运输服务</h3>
<ul>
<li>TCP服务
<ul>
<li>TCP服务模型包括面向连接服务和可靠数据传输服务
<ul>
<li>面向连接的服务</li>
<li>可靠的数据传输服务</li>
<li>拥塞控制机制</li>
<li>TCP安全性
<ul>
<li>安全套接字层(SSL)加强后的TCP不仅能做传统TCP的一切,而且能提供关键的进程到进程的安全性服务,包括加密,数据完整性和端点检测</li>
<li>在应用层实现的</li>
<li>当一个应用使用SSL时,发送进程向SSL套接字传输明文数据;在发送主机中的SSL则加密该数据并将加密的数据传递给TCP套接字</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>UDP服务
<ul>
<li>不提供不必要服务的轻量级运输协议,仅提供最小服务,无连接的(没有握手过程),没有拥塞控制机制</li>
</ul>
</li>
</ul>
<h3 id="215-应用层协议"><a class="markdownIt-Anchor" href="#215-应用层协议"></a> 2.1.5 应用层协议</h3>
<ul>
<li>应用层协议定义了运行在不同端系统上的应用程序进程如何相互传递报文</li>
<li>应用层协议规定了
<ul>
<li>交换的报文类型</li>
<li>各种报文类型的语法</li>
<li>字段的语义</li>
<li>确定了一个进程何时以及如何发送报文,对报文进行响应的规则</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="22-web和http"><a class="markdownIt-Anchor" href="#22-web和http"></a> 2.2 Web和HTTP</h2>
<h3 id="221-http概况"><a class="markdownIt-Anchor" href="#221-http概况"></a> 2.2.1 HTTP概况</h3>
<ul>
<li>Web的应用层协议是<strong>超文本传输协议(HTTP)</strong></li>
<li>HTTP由两个程序实现:一个客户程序和一个服务器程序.客户程序和服务器程序运行在不同的端系统中,通过交换HTTP报文进行会话
<ul>
<li>HTTP定义了报文的结构以及客户和服务器进行报文交换的方式
<ul>
<li>HTTP定义了Web客户向Web服务器请求Web页面的方式,以及服务器向客户传送Web页面的方式</li>
</ul>
</li>
<li>HTTP是一个<strong>无状态协议</strong>
<ul>
<li>不保存关于客户的任何信息,服务器在接收相同对象第二次请求时,重新发送对象</li>
</ul>
</li>
<li>HTTP使用TCP作为它的支撑运输协议</li>
</ul>
</li>
<li>Web页面由对象组成
<ul>
<li>多个Web页面含有一个HTML基本文件以及几个引用对象</li>
<li>Web浏览器实现了HTTP的客户端</li>
<li>Web服务器实现了HTTP的服务器端,用于存储Web对象,每个对象由URL寻址</li>
</ul>
</li>
</ul>
<h3 id="222-非持续连接和持续连接"><a class="markdownIt-Anchor" href="#222-非持续连接和持续连接"></a> 2.2.2 非持续连接和持续连接</h3>
<ul>
<li><strong>非持续连接</strong>:每个请求是经一个单独的TCP连接发送</li>
<li><strong>持续连接</strong>:所有的请求及其响应经相同的TCP发送
<ul>
<li><mark>HTTP默认情况下为持续连接</mark></li>
</ul>
</li>
<li>采用非持续连接的HTTP
<ol>
<li>HTTP客户进程在端口号80发起服务器的TCP连接,该端口号是HTTP默认的端口.在客户和服务器上分别有一个套接字与该连接相关联</li>
<li>HTTP客户经它的套接字向该服务器发送一个HTTP请求报文</li>
<li>HTTP服务器进程经它的套接字接收该请求报文,从其存储器检出对象,在一个HTTP响应报文中封装对象,并通过其套接字向客户发送响应报文</li>
<li>HTTP服务器进程通知TCP断开该TCP连接</li>
<li>HTTP客户接收响应报文,TCP连接关闭</li>
<li>对每个引用的对象重复前4个步骤</li>
</ol>
</li>
<li>非持续连接的作用
<ul>
<li>每个TCP连接在服务器发送一个对象后关闭,即该连接并不为其他的对象而持续下来</li>
<li>每个TCP连接只传输一个请求报文和响应报文</li>
</ul>
</li>
<li>HTML的<strong>往返时间(RTT)</strong>:包括分组传播时延,分组在中间路由器和交换机上的排队时延以及分组处理时延
<ul>
<li><mark>总的响应时间是两个RTT加上服务器传输HTML文件的时间</mark></li>
</ul>
</li>
<li>非持续连接的缺点
<ul>
<li>必须为每一个请求的对象建立和维护一个全新的连接</li>
<li>每一个对象经受两倍RTT的交付时延,即一个RTT用于创建TCP,一个RTT用于请求和接收一个对象</li>
</ul>
</li>
<li>采用HTTP1.1持续连接的情况下,在相同的客户与服务器之间,后续的请求和相应报文通过相同的连接进行传送
<ul>
<li>如果一条连接经过一定时间间隔未被使用,HTTP服务器将关闭连接</li>
</ul>
</li>
</ul>
<h3 id="223-http报文格式"><a class="markdownIt-Anchor" href="#223-http报文格式"></a> 2.2.3 HTTP报文格式</h3>
<ul>
<li><strong>HTTP请求报文</strong>,报文由ASCII文本书写
<ul>
<li>请求报文的第一行叫做<strong>请求行</strong>,后继的行称为<strong>首部行</strong></li>
<li>请求行有3个字段:方法字段,URL字段和HTTP版本字段
<ul>
<li>方法字段包括:GET,POST,HEAD,PUT,DELETE
<ul>
<li>使用GET方法时实体体为空,而使用POST方法时才使用该实体体</li>
<li>方法字段是POST时,实体体中包含的是用于在表单字段中的输入值</li>
<li>HTML表单经常使用GET方法,并在所请求的URL中包括的输入的数据</li>
<li>HEAD方法类似GET方法,服务器受到HEAD请求时,将会用一个HTTP报文进行相应,但是并不返回请求对象</li>
<li>PUT方法常与WEB发行工具联合使用,允许用户上传对象到指定的WEB服务器上指定的路径</li>
<li>DELETE方法允许用户或应用程序删除WEB服务器上的对象</li>
</ul>
</li>
</ul>
</li>
<li>首部行提供信息是Web代理高速缓存所要求的
<ul>
<li>Connection:close首部行,该浏览器告诉服务器不要麻烦地使用持续连接,要求服务器在发送完请求后就关闭该连接</li>
<li>User-agent首部行,指明用户代理,即浏览器地类型</li>
<li>Accept-lanuage首部行(协商首部之一):用户想得到该对象的法语版本</li>
</ul>
</li>
</ul>
</li>
<li><strong>HTTP响应报文</strong>
<ul>
<li>有三部分:初始状态行,6个首部行,实体体</li>
<li>状态行有3个字段:协议版本字段,状态码和相应状态信息</li>
<li>首部行
<ul>
<li>Connection:close首部行,告诉客户发送完报文后将关闭该TCP连接</li>
<li>Data首部行,指示服务器产生并发生该响应报文的日期和时间(服务器从文件系统中检索到该对象,将该对象插入响应报文,并发送该响应报文的时间)</li>
<li>server首部行,类似HTTP请求报文中的User-agent首部行</li>
<li>Last-Modified首部行,指示对象创建或最后修改的日期和时间</li>
<li>Content-length首部行,指示被发送对象中的字节数</li>
<li>COntent-Type首部行,指示实体体中的对象是HTML文本</li>
</ul>
</li>
<li>状态码
<ul>
<li>200 oK,请求成功,信息在返回的响应报文中</li>
<li>301 Moved Permanently,请求的对象已经被永久转移了,新的URL定义在响应报文的Location首部行中</li>
<li>400 Bad Reauest,通用差错代码,指示该请求不能被服务器理解</li>
<li>404 Not Found,被请求的文芳不在服务器上</li>
<li>505 HTTP Version Not Supported,服务器不支持请求报文使用的HTTP协议版本</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="224-用户与服务器的交互cookie"><a class="markdownIt-Anchor" href="#224-用户与服务器的交互cookie"></a> 2.2.4 用户与服务器的交互:cookie</h3>
<ul>
<li>cookie在RFC6265中定义,允许站点对用户进行跟踪</li>
<li>有4个组件:
<ul>
<li>在HTTP响应报文中的一个cookie首部行</li>
<li>在HTTP请求报文中的一个cookie首部行</li>
<li>在用户端系统中保留一个cookie文件,并由用户的浏览器进行管理</li>
<li>位于web站点的一个后端数据库</li>
</ul>
</li>
<li>HTTP报文的Set-cookie首部含有识别码,该识别码用于跟踪用户</li>
<li>cookie可以用于标识一个用户,用户首次访问一个站点时,可能需要提供一个用户标识,在后继会话中,浏览器向服务器传递一个cookie首部,从而向该服务器标识了用户
<ul>
<li>cookie可以在无状态的HTTP之上建立一个用户会话层</li>
</ul>
</li>
</ul>
<h3 id="225-web缓存"><a class="markdownIt-Anchor" href="#225-web缓存"></a> 2.2.5 Web缓存</h3>
<ul>
<li>Web缓存器也叫<strong>代理服务器(proxy server)</strong>
<ul>
<li>能够代表初始web服务器来满足http请求的网络实体</li>
<li>web缓存器由自己的磁盘存储空间,并在存储空间中保存最近请求过的对象的副本</li>
</ul>
</li>
<li>假设浏览器正在请求对象,会发生以下情况
<ol>
<li>浏览器创建一个到Web缓存器的TCP连接,并向缓存服务器中的对象发送一个HTTP请求</li>
<li>web缓存器进行检查,看本地是否存储了该对象的副本,若有则向客户浏览器用http响应报文返回该对象</li>
<li>若没有该对象,则打开一个与该对象的初始服务器的tcp连接.web浏览器则在这个缓存器到服务器的tcp连接上送一个对象的http请求,收到请求后,初始服务器向该web缓存器发送具有该对象的http响应</li>
<li>web缓存器接收该对象时,在本地存储空间存储一份副本,并向客户用http响应报文发送该副本</li>
</ol>
</li>
<li>在因特网部署web缓存器的两个原因
<ul>
<li>web缓存器可以大大减少对客户请求的响应时间
<ul>
<li>总的响应时间即从浏览器请求一个对象到接收到该对象为止的时间,时局域网时延,接入时延和因特网时延之和</li>
<li>通过CDN,web缓存器在因特网发挥重要的作用</li>
</ul>
</li>
<li>web缓存器可以大大减少一个机构的接入链路到因特网的通信量</li>
</ul>
</li>
</ul>
<h3 id="226-条件get方法"><a class="markdownIt-Anchor" href="#226-条件get方法"></a> 2.2.6 条件GET方法</h3>
<ul>
<li>允许缓存器正式它的对象是最新的机制为<strong>条件GET</strong>
<ul>
<li>如果请求报文使用GET方法,并且请求报文包含If-Modified-Since首部行,则这个报文iu是条件GET方法</li>
</ul>
</li>
<li>GET方法操作方式
<ul>
<li>代理缓存器代表一个请求浏览器,向某web服务器发送一个请求报文</li>
<li>该web服务器向缓存器发送具有被请求的对象的响应报文</li>
<li>该缓存器在将对象发到请求的浏览器的同时,也在本地缓存该对象</li>
<li>若If-Modified-Since首部行的值等于Last-Modified首部行的值,条件GET报文告诉服务器,仅当指定日期之后该对象被修改过,才发送该对象；假定该对象没有修改,接下来,web服务器向该缓存器发送一个响应报文</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="23-因特网中的电子邮件"><a class="markdownIt-Anchor" href="#23-因特网中的电子邮件"></a> 2.3 因特网中的电子邮件</h2>
<ul>
<li>电子邮件系统具有3个主要组成部分:<strong>用户代理</strong>,<strong>邮件服务器</strong>和<strong>简单邮件传输协议(SMTP)</strong>
<ul>
<li>用户代理又叫邮件阅读器,撰写,边集和阅读邮件</li>
<li>邮件服务器
<ul>
<li>邮件中管理和维护发送给用户的邮件</li>
<li>输出报文队列保持发送邮件报文</li>
<li>邮件服务器之间的SMTP协议:发送email报文
<ul>
<li>客户:发送方邮件服务器</li>
<li>服务器:接收端邮件服务器</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>SMTP
<ul>
<li>使用TCP在客户端和服务器之间传送报文,端口号为25</li>
<li>直接传输:从发送方服务器到接收方服务器</li>
<li>传输的3个阶段
<ul>
<li>握手</li>
<li>传输报文(报文必须为7为ASCII码)</li>
<li>关闭</li>
</ul>
</li>
<li>命令/响应交互
<ul>
<li>命令:ASCII文本</li>
<li>响应:状态码和状态信息</li>
</ul>
</li>
<li><mark>SMTP使用持久连接</mark></li>
</ul>
</li>
<li>SMTP与HTTP比较
<ul>
<li>HTTP:拉(pull)</li>
<li>SMTP:推(push)</li>
<li>两者都是ASCII形式的命令/响应交互,状态码</li>
<li>HTTP:每个对象封装在各自的响应报文中</li>
<li>SMTP:多个对象包含在一个报文中</li>
</ul>
</li>
<li>邮件报文格式:每个首部必须含有一个From首部行和一个TO首部行,可能需要Subject首部行,报文主体为ASCII码字符</li>
<li>邮件访问协议
<ul>
<li>SMTP:传送到接收方的邮件服务器</li>
<li>邮件访问协议:从服务器访问邮件
<ul>
<li>POP:用户身份确认并下载</li>
<li>IMAP:更多特性,在服务器上处理存储的报文</li>
<li>HTTP</li>
</ul>
</li>
</ul>
</li>
<li>POP3协议(本地管理文件夹)
<ul>
<li>用户确认阶段
<ul>
<li>客户端命令:user声明用户名,pass口令</li>
<li>服务器响应:+OK,-ERR</li>
</ul>
</li>
<li>事务处理阶段,客户端:
<ul>
<li>list报文号列表</li>
<li>retr根据报文号检索报文</li>
<li>dele删除</li>
<li>quit</li>
</ul>
</li>
<li><strong>下载并保留</strong>,不用客户机上为报文的拷贝</li>
<li><mark>POP3在会话中是无状态的</mark></li>
</ul>
</li>
<li>IMAP(远程管理文件夹)
<ul>
<li>IMAP服务器将每个报文与一个文件夹联系起来</li>
<li>允许用户用目录来组织报文</li>
<li>允许用户读取报文组件</li>
<li>IMAP在会话过程中保留用户状态
<ul>
<li>目录名,报文ID与目录名之间映射</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="24-dns因特网的目录服务"><a class="markdownIt-Anchor" href="#24-dns因特网的目录服务"></a> 2.4 DNS:因特网的目录服务</h2>
<ul>
<li>主机的一种标识方法是用<strong>主机名</strong>,而主机名难以被路由器处理,使用<strong>IP地址</strong>进行标识</li>
</ul>
<h3 id="241-dns提供的服务"><a class="markdownIt-Anchor" href="#241-dns提供的服务"></a> 2.4.1 DNS提供的服务</h3>
<ul>
<li>**域名系统(DNS)**的任务:进行主机名到IP地址转换的目录服务
<ul>
<li>一个由分层的DNS服务器实现的分布式数据库</li>
<li>一个使得主机能够查询分布式数据库的应用层协议
<ul>
<li><mark>DNS协议运行在UDP上,使用53号端口</mark></li>
</ul>
</li>
</ul>
</li>
<li>DNS协议是应用层协议的原因
<ul>
<li>使用客户-服务器模式运行在通信的端系统之间</li>
<li>在通信的端系统之间通过下面的端到端运输层协议来传送DNS报文</li>
</ul>
</li>
<li>DNS服务器的做法
<ol>
<li>同一台用户主机上运行着DNS应用的客户端</li>
<li>浏览器上URL中抽取出主机名,并将这台主机名传给DNS应用的客户端</li>
<li>DNS客户向DNS服务器发送一个包含主机名的请求</li>
<li>DNS客户最终会受到一份回答报文,其中包含对应于该主机名的IP地址</li>
<li>一旦浏览器接收到来自DNS的该IP地址,它能够向位于该IP地址的80端口的HTTP服务器进程发起一个TCP连接</li>
</ol>
</li>
<li>DNS提供的其他服务:
<ul>
<li>主机别名</li>
<li>邮件服务器别名</li>
<li>负载分配</li>
</ul>
</li>
</ul>
<h3 id="242-dns工作机理概述"><a class="markdownIt-Anchor" href="#242-dns工作机理概述"></a> 2.4.2 DNS工作机理概述</h3>
<ul>
<li>假设运行在用户主机上的某些应用程序需要将主机名转换为IP地址
<ul>
<li>应用程序将调用DNS的客户端,并指明需要被转换的主机名.用户主机上的DNS接收到后,向网络中发送一个DNS查询报文.所有的DNS请求和回答报文使用UDP数据报经端口53发送.经过若干毫秒到若干秒的时延后,用户主机上的DNS接收到一个提供所希望映射的DNS回答报文.这个映射结果则被传递到调用DNS的应用程序</li>
</ul>
</li>
<li>集中式设计的问题:单点故障,通信容量,远距离的集中式数据库,维护
<ul>
<li>在单一DNS服务器上运行集中式数据库没有可扩展能力,故采用分布式的方案</li>
</ul>
</li>
<li>分布式,层次数据库
<ul>
<li><strong>根DNS服务器,顶级域DNS服务器和权威服务器</strong></li>
<li><mark>本地DNS服务器不属于该服务器的层次结构,但它对DNS层次结构至关重要</mark></li>
</ul>
</li>
<li>在查询时,使用递归查询和迭代查询
<ul>
<li><mark>从请求主机到本地DNS服务器的查询是递归的,其余的查询时迭代的</mark></li>
</ul>
</li>
<li>DNS缓存
<ul>
<li>为了改善时延性能并减少在因特网上到处传播的DNS报文数量</li>
<li>在一个请求链中,当某DNS服务器接收一个DNS回答时,能将映射缓存在本地存储器中</li>
<li>由于主机和主机名与IP地址间的映射并不是永久的,DNS服务器在一段事件后将丢弃缓存的信息</li>
</ul>
</li>
</ul>
<h3 id="243-dns记录和报文"><a class="markdownIt-Anchor" href="#243-dns记录和报文"></a> 2.4.3 DNS记录和报文</h3>
<ul>
<li>共同实现DNS分布式数据库的所有DNS服务器存储了资源记录(RR),RR提供了主机名到IP地址的映射</li>
<li>资源记录是一个4元组, (Name, Value, Type, TTL)
<ul>
<li>TTL是该记录的生存时间,决定了资源记录应当从缓存中删除的时间</li>
<li>若Type=A,则Name是主机名,Value是主机名对应的IP地址,一条类型为A的资源记录提供了标准的主机名到IP地址的映射</li>
<li>若Type=NS,则Name是一个域,Value是获得域中主机IP地址的权威DNS服务器的主机名,这个记录用于沿着查询链来路由DNS查询</li>
<li>若Type=CNAME,则Value是别名Name的主机对应的规范主机名</li>
<li>若Type=MX,则Value是个别名为Name的邮件服务器的规范主机名</li>
</ul>
</li>
<li>如果一台DNS服务器是用于某特定主机名的权威DNS服务器,那该DNS服务器会有一条包含用于该主机名的类型A记录
<ul>
<li>如果服务器不是用于主机名的权威服务器,那么该服务器将包含一条类型NS记录,该记录对应于包含主机名的域,<strong>还将包括一条类型A记录,该记录提供了在NS记录的Value字段中的DNS服务器IP地址</strong></li>
</ul>
</li>
<li>DNS报文
<ul>
<li>DNS查询和回答报文具有相同的格式</li>
<li>前12个字节是首部区域
<ul>
<li>第一个字段标识符是16比特的数,用于标识该查询,会被复制到对查询的回答报文中,以便客户用它匹配发送的请求和接收到的回答</li>
<li>标志字段含有若干个标志,查询/回答标志用0标识查询报文1标识回答报文
<ul>
<li>若希望执行递归查询,将设置1比特的希望递归标志位</li>
</ul>
</li>
</ul>
</li>
<li>问题区域包含正在查询的信息
<ul>
<li>名字字段,包含正在被查的主机名</li>
<li>类型字段,指出有关该名字的正被询问的问题类型</li>
</ul>
</li>
<li>回答区域包含了对最初请求的名字的资源记录,包含多条RR</li>
</ul>
</li>
<li>使用nslookup程序从工作的主机直接向某些DNS服务器发送DNS查询报文</li>
</ul>
</div><div class="story post-story"><h2 id="25-p2p文件分发"><a class="markdownIt-Anchor" href="#25-p2p文件分发"></a> 2.5 P2P文件分发</h2>
<ul>
<li>在P2P文件分发中,每个对等方能够向任何其他对等方重新分发它已经收到的该文件的任何部分,从而在分发过程中协助该服务器</li>
</ul>
</div><div class="story post-story"><h2 id="26-视频流和内容分发网"><a class="markdownIt-Anchor" href="#26-视频流和内容分发网"></a> 2.6 视频流和内容分发网</h2>
<ul>
<li>视频的一个重要特性:能被压缩,因而可用比特率来权衡视频质量</li>
</ul>
<h3 id="262-http流和dash"><a class="markdownIt-Anchor" href="#262-http流和dash"></a> 2.6.2 HTTP流和DASH</h3>
<ul>
<li>HTTP流具有严重缺陷,即所有客户接收到相同编码的视频,尽管对不同的客户或者对于相同客户的不同时间而言,客户可用的带宽大小有很大不同</li>
<li><strong>经HTTP的动态适应性流(DASH)</strong>:
<ul>
<li>在DASH中,视频编码为几个不同的版本,其中每个版本具有不同的比特率,对应于不同的质量水平.客户动态地请求来自不同版本且长度为几秒的视频段数据块.当可用带宽量较高时,客户自然地选择来自高速率版本的块；当可用带宽量较低时,客户自然地选择来自低速率版本的块.客户用HTTP GET请求报文一次选择一个不同的块</li>
<li>使用DASH后,每个视频版本存储在HTTP服务器中,每个版本都有一个不同的URL</li>
<li>HTTP服务器也有一个告示文件,为每个版本提供了一个URL及其比特率</li>
</ul>
</li>
</ul>
<h3 id="263-内容分发网"><a class="markdownIt-Anchor" href="#263-内容分发网"></a> 2.6.3 内容分发网</h3>
<ul>
<li>CDN两种不同的服务器安置原则
<ul>
<li>深入</li>
<li>邀请做客</li>
</ul>
</li>
<li>许多CDN 没有将视频推入它们的集群,而是使用一种简单的拉策略
<ul>
<li>如果客户向一个未存储该视频的集群请求某视频,则该集群检索该视频(从某中心仓库或者从另一个集群),向客户流式传输视频时的同时在本地存储一个副本</li>
</ul>
</li>
<li>集群选择策略:动态地将客户定向到CDN中的某个服务器集群或数据中心机制
<ul>
<li>地理上最为临近</li>
<li>为了基于当前流量条件为客户决定最好的集群,CDN能够对其集群和客户之间的时延和丢包性能能进行周期性的<strong>实时测量</strong></li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="27-套接字编程生成网络应用"><a class="markdownIt-Anchor" href="#27-套接字编程生成网络应用"></a> 2.7 套接字编程:生成网络应用</h2>
<ul>
<li>当生成一个套接字时,就为它分配一个<strong>端口号</strong>的标识符
<ul>
<li>分组的目的地址包括该套接字的端口号,发送进程为分组附上目的地址,该目的地址是由目的主机IP地址和目的地套接字的端口号组成的</li>
</ul>
</li>
</ul>
<hr />
<h1 id="3-运输层"><a class="markdownIt-Anchor" href="#3-运输层"></a> 3 运输层</h1>
<ul>
<li>运输层位于应用层和网络层之间,是分层的网络体系结构的重要部分
<ul>
<li>该层为运行在不同主机上的应用进程提供直接的通信服务起着至关重要的作用</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="31-概述和运输层服务"><a class="markdownIt-Anchor" href="#31-概述和运输层服务"></a> 3.1 概述和运输层服务</h2>
<ul>
<li>运输层协议为运行在不同主机上的应用进程之间提供了逻辑通信功能</li>
<li>运输层协议是在端系统中而不是在路由器中实现的
<ul>
<li>在发送端,运输层将从发送应用程序进程接收到的报文转换成运输层分组,该分组称为运输层报文段</li>
<li>实现的方法是将应用报文划分为较小的块,并为每块加上一个运输层首部以生成运输层报文段.然后,在发送端系统中,运输层将这些报文段传递给网络层,网路层将其封装成网络层分组并向目的地发送</li>
<li>网络路由器仅作用于该数据报的网络层字段；即它们不检查封装在该数据报的运输层报文段的字段.在接收端,网络层从数据报中提取运输层报文段,并将该报文段向上交给运输层.运输层则处理接收到的报文段,使该报文段中的数据为接收应用进程使用.</li>
</ul>
</li>
</ul>
<h3 id="311-运输层和网络层的关系"><a class="markdownIt-Anchor" href="#311-运输层和网络层的关系"></a> 3.1.1 运输层和网络层的关系</h3>
<ul>
<li>网络层提供了主机之间的逻辑通信,运输层为运行在不同主机上的进程之间提供了逻辑通信</li>
<li>即使底层网络协议不能在网络层提供响应的服务,运输层协议也能提供某些服务
<ul>
<li>即使底层网络协议是不可靠的,也就是说网络层协议会使分组丢失,篡改和冗余,运输协议也能为应用程序提供可靠的数据传输服务</li>
</ul>
</li>
</ul>
<h3 id="312-因特网运输层概述"><a class="markdownIt-Anchor" href="#312-因特网运输层概述"></a> 3.1.2 因特网运输层概述</h3>
<ul>
<li>UDP(用户数据报协议),为调用它的应用程序提供了一种不可靠,无连接的服务</li>
<li>TCP(传输控制协议),为调用它的应用程序提供一种可靠的,面向连接的服务</li>
<li><mark>将运输层分组称为报文段</mark></li>
<li>网络层包括IP协议,其服务模型为<strong>尽力而为交付服务</strong>,为<strong>不可靠服务</strong></li>
<li>UDP和TCP的服务模型
<ul>
<li>基本责任是将两个端系统间IP的交付服务扩展为运行在端系统上的两个进程之间的交付服务
<ul>
<li>将主机间交付扩展到进程间交付被称为运输层的<strong>多路复用</strong>与<strong>多路分解</strong></li>
</ul>
</li>
<li>UDP和TCP可以通过在其报文段首部中包括差错检查字段而提供完整性检查</li>
<li>进程到进程的数据交付和差错检查是两种最低限度的传输层服务,也是<strong>UDP仅能提供的两种服务</strong>,<strong>UDP也是一种不可靠的服务</strong></li>
<li>TCP提供可靠数据传输,通过流量控制,序号,确认和定时器,确保正确地,按序地将数据从发送进程交付给接收进程
<ul>
<li>提供拥塞控制机制,防止任何一条TCP连接用过多流量来淹没通信主机之间的链路和交换设备
<ul>
<li>通过控制发送端的流量速率来力求为每一个通过一条拥塞网络链路的连接平等地共享网络链路带宽</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="32-多路复用与多路分解"><a class="markdownIt-Anchor" href="#32-多路复用与多路分解"></a> 3.2 多路复用与多路分解</h2>
<ul>
<li>运输层的多路复用与多路分解:将由网络层提供的主机到主机交付服务延伸到为运行在主机上的应用程序提供进程到进程到交付服务
<ul>
<li>在目的主机,运输层从紧邻其下的网络层接收报文段,运输层负责将这些报文段中的数据交付给主机上运行的适当的应用程序进程</li>
<li>一个进程有一个或多个<strong>套接字</strong>,相当于从网络向进程传递数据和从进程向网络传递数的用户</li>
<li>在接收主机中的运输层实际上并没有直接将数据交付给进程,而是将数据交给了中间的套接字</li>
<li>套接字具有唯一的标识符,标识符的格式取决于是TCP还是UDP的套接字</li>
</ul>
</li>
<li><strong>多路分解</strong>:在接收端,运输层检查这些字段,标识出接受套接字,进而将报文段定向到该套接字.将运输层报文段中的数据交付到正确的套接字的工作</li>
<li><strong>多路复用</strong>:在源主机从不用套接字中收集数据块,并为每个数据块封装上首部信息从而生成报文段,然后将报文段传递到网络</li>
<li>运输层多路复用要求
<ul>
<li>套接字由唯一标识符</li>
<li>每个报文段由特殊字段来指示该报文段所要交付的套接字
<ul>
<li><strong>特殊字段是端口号字段和目的端口号字段</strong>
<ul>
<li>端口号是一个16比特的数,范围为0~65535之间</li>
<li>0~1023范围内的端口号是周知端口号,是受限制的</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>在运输层实现分解服务
<ul>
<li>在主机上的每个套接字能够分配一个端口号,当报文段到达主机时,运输层检查报文段中的目的端口号,并将其定向到相应的套接字.然后报文段中的数据通过套接字进入其所连接的进程</li>
</ul>
</li>
<li>UDP套接字由二元组全面表示的,该二元组包含一个目的IP地址和一个目的端口号</li>
<li>TCP套接字由四元组(源IP地址,源端口号,目的IP地址,目的端口号)来标识</li>
<li>web服务器和tcp
<ul>
<li>连接套接字与进程之间并非总是有着一一对应的关系</li>
<li>事实上,当今的高性能web服务器使用一个进程,但是为每个新的客户连接创建一个具有新连接套接字的新线程(线程为轻量级的子进程)</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="33-无连接服务udp"><a class="markdownIt-Anchor" href="#33-无连接服务udp"></a> 3.3 无连接服务:UDP</h2>
<ul>
<li>UDP从应用进程得到数据,附加上用于多路复用/分解服务的源和目的端口号字段,以及两个其他的小字段,然后将形成的报文段交给网络层.网络层将该运输层报文段封装到一个IP数据报中,然后尽力而为地尝试将此报文段交付给接收主机.如果该报文段到达接收主机,UDP使用目的端口号将报文段中的数据交付给正确的应用进程.值得注意的是,使用UDP时,在发送报文段之前,发送方和接收方的运输层实体之间没有握手</li>
<li>许多应用更适合UDP的原因
<ul>
<li>关于发送什么数据以及何时发送的应用层控制更加精细
<ul>
<li>采用UDP时,只要应用进程将数据传递给UDP,UDP就会将此数据打包进UDP报文段并立即将其传递给网络层</li>
</ul>
</li>
<li>无需连接建立
<ul>
<li>DNS运行在UDP之上的原因</li>
</ul>
</li>
<li>无连接状态
<ul>
<li>TCP需要在端系统中维护连接状态.此连接状态包括接收和发送缓存,拥塞控制参数以及序号与确认号的参数</li>
</ul>
</li>
<li>分组首部开销小
<ul>
<li>每个TCP报文段都有20字节的首部开销,UDP仅有8字节的开销</li>
</ul>
</li>
</ul>
</li>
<li>由无控制的UDP发送发引入的高丢包率将引起TCP发送方大大减小它们的速率
<ul>
<li>因此UDP中缺乏拥塞控制导致UDP发送方和接收方之间的高丢包率,并挤垮了TCP会话</li>
</ul>
</li>
<li><mark>使用UDP的应用是可能实现可靠数据传输的,应用层自身保证可靠性</mark></li>
</ul>
<h3 id="332-udp检验和"><a class="markdownIt-Anchor" href="#332-udp检验和"></a> 3.3.2 UDP检验和</h3>
<ul>
<li><mark>发送方的UDP对报文段中的所有16比特字的和进行反码运算,求和时遇到的任何溢出都被回卷</mark></li>
<li>许多链路层协议提供差错检测的原因:是不能保证源和目的之间的所有链路都提供差错检测
<ul>
<li><mark>如果端到端数据传输服务要提供差错检测,UDP就必须在端到端基础上再运输层提供差错检测</mark></li>
<li><strong>端到端原则</strong>:因为某种功能必须基于端到端实现</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="34-可靠数据传输原理"><a class="markdownIt-Anchor" href="#34-可靠数据传输原理"></a> 3.4 可靠数据传输原理</h2>
<ul>
<li><strong>可靠数据传输协议(rdt)</strong></li>
</ul>
<h3 id="341-构造可靠数据传输协议"><a class="markdownIt-Anchor" href="#341-构造可靠数据传输协议"></a> 3.4.1 构造可靠数据传输协议</h3>
<ul>
<li><strong>经完全可靠信道的可靠数据传输:rdt1.0:底层信道完全可靠</strong>
<ul>
<li><strong>有限状态机(FSM)</strong>
<ul>
<li>箭头指示了协议从一个状态变迁到另一个状态</li>
<li>引起变迁的时间显示在标识变迁的横线的上方</li>
<li>事件发生时所采取的动作显式再横线下方</li>
<li>如果对一个时间没有动作,或没有就事件发生而采取一个动作,横线上方或下方使用符号明确表示缺少动作或事件</li>
<li>初始状态用虚线表示</li>
</ul>
</li>
</ul>
</li>
<li><strong>经具有比特差错信道的可靠数据传输:rdt2.0:停等协议</strong>
<ul>
<li>控制报文使得接收方可以让发送方直到哪些内容被正确接收</li>
<li>基于重传机制的可靠数据传输协议称为**自动重传(ARQ)**协议</li>
<li>ARQ协议中三种协议功能来处理存在比特差错的情况
<ul>
<li>差错检测</li>
<li>接收方反馈
<ul>
<li>反馈ACK或NAK</li>
</ul>
</li>
<li>重传</li>
</ul>
</li>
</ul>
</li>
<li><strong>有比特差错信道上实现的一个无NAK的可靠数据传输协议:rdt2.2</strong>
<ul>
<li>解决ACK或NAK可能出错的问题:在数据分组中添加一个新字段,让发送方对其数据分组编号,即将发送数据分组的<strong>序号</strong>放在该字段,接收方检查序号即可确定收到的分组是否一次重传</li>
<li>如果收到受损的分组,则接收方将发送一个否定确认,对上次正确接收的分组发送一个ACK,发送方接收到对同一个分组的两个ACK,就知道接收方没有正确接收</li>
<li>接收方必须包括有一个ACK报文所确认的分组序号,发送方此时必须检查接收到的ACK报文中被确认的分组序号</li>
</ul>
</li>
<li><strong>经具有比特差错的丢包信道的可靠数据传输:rdt3.0</strong>
<ul>
<li>发送方与接收方之间的一个往返时延加上接收方处理一个分组所需的时间,等待这样长的时间确定分组已被丢失</li>
<li>基于时间的重传机制,需要一个<strong>倒计数定时器</strong></li>
<li>分组在0和1之间交替,rdt3.0被称为比特交换协议</li>
</ul>
</li>
</ul>
<h3 id="342-流水线可靠数据传输协议"><a class="markdownIt-Anchor" href="#342-流水线可靠数据传输协议"></a> 3.4.2 流水线可靠数据传输协议</h3>
<ul>
<li>发送方(或信道)的利用率:发送方实际忙于将发送比特送进信道的那部分时间与发送时间的之比<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>L</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">U_{sender} = \frac{L/R}{RTT+L/R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">L</span><span class="mord mtight">/</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mord mtight">/</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li><strong>流水线(pipelining)技术</strong>:不以停等方式运行,允许发送方发送多个分组而无需等待确认</li>
<li>对可靠数据传输协议的影响
<ul>
<li>必须增加序号范围</li>
<li>协议的发送方和接收方缓存多个分组</li>
</ul>
</li>
<li>解决流水线的差错恢复的两种基本方法:<strong>回退N步</strong>和<strong>选择重传</strong></li>
</ul>
<h3 id="343-回退n步"><a class="markdownIt-Anchor" href="#343-回退n步"></a> 3.4.3 回退N步</h3>
<ul>
<li><strong>回退N步(GBN)协议,滑动窗口协议</strong>
<ul>
<li>基序号(base):最早未确认分组的序号</li>
<li>下一个序号(nextseqnum):最小的未使用序号(下一个待发送分组的序号)</li>
<li>窗口长度:N</li>
<li>已被发送但还未被确认的分组需要序号范围可看作是一个需要范围内长度为N的窗口.随着协议的运行,该窗口在序号空间向前滑动</li>
</ul>
</li>
<li>在实践中,一个分组的序号承载在分组首部的一个固定长度的字段中,若分组序号的比特数是k,则序号范围是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 2^k-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>
<ul>
<li>在一个有限的序号范围内,所涉及序号的运算必须使用模<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>运算</li>
</ul>
</li>
<li>GBN发送方必须响应三种类型的事件
<ul>
<li>上层的调用</li>
<li>收到一个ACK
<ul>
<li>在GBN协议中,对序号为n的分组的确认采取累计确认的方式,表明接收方已正确接收到序号为n的以前且包括n在内的所有分组</li>
</ul>
</li>
<li>超时事件
<ul>
<li>如果出现超时,发送方重传所有已发送但还未被确认过的分组</li>
</ul>
</li>
</ul>
</li>
<li>在GBN中,接收方的动作简单,如果一个序号为n的分组被正确接收到,并且按需,则接收方为分组n发送一个ACK,并将该分组中的数据部分交付到上层.在所有其他情况下,接收方丢弃该分组,并为最近按序接收的分组重新发送ACK</li>
<li>GBN重传机制的优点是接收缓存简单,即接收方不需要缓存任何失序妇女组.虽然发送方必须维护窗口的上下边界及nextseqnum在该窗口中的位置,但是接收方需要维护唯一信息就是下一个按序接收的分组的序号</li>
</ul>
<h3 id="344-选择重传"><a class="markdownIt-Anchor" href="#344-选择重传"></a> 3.4.4 选择重传</h3>
<ul>
<li>选择重传(SR)协议通过让发送方仅重传那些它怀疑在接收方出错的分组而避免了不必要的重传</li>
<li>SR接收方将确认一个正确接收的分组而不管其是否按序
<ul>
<li>失序的分组将被缓存直到所有丢弃分组皆被收到位置,这时可以将一批分组按序交付给上层</li>
</ul>
</li>
<li><mark>发送方和接收方的窗口并不总是一致的</mark></li>
<li><mark>窗口长度必须小于或等于序号空间大小的一半</mark></li>
</ul>
</div><div class="story post-story"><h2 id="35-面向连接的运输tcp"><a class="markdownIt-Anchor" href="#35-面向连接的运输tcp"></a> 3.5 面向连接的运输:TCP</h2>
<h3 id="351-tcp连接"><a class="markdownIt-Anchor" href="#351-tcp连接"></a> 3.5.1 TCP连接</h3>
<ul>
<li>TCP被称为面向连接的</li>
<li>TCP提供的是全双工服务</li>
<li>TCP连接总是点对点的</li>
<li>TCP建立的过程:<strong>三次挥手</strong>
<ul>
<li>客户首先发送一个特殊的TCP报文段,服务器用另一个特殊的TCP报文段来响应.最后,客户再用第三个特殊报文段作为响应</li>
<li>前两个报文不包含应用层数据,第三个报文段可以承载有效载荷</li>
</ul>
</li>
<li>TCP可以从缓存中取出并放入报文段中的数据数量受限于<strong>最大报文段长度(MSS)</strong>
<ul>
<li>MSS通常根据最初确定的由本地发送主机的最大链路层帧长度(所谓的<strong>最大传输单元(MTU)</strong>)来设置</li>
<li>设置MSS要保证一个TCP报文段(当封装在IP数据报中)加上**TCP/IP首部长度(通常为40字节)**将适合单个链路层帧</li>
<li>以太网和PPP链路层协议都具有1500字节的MTU,因此MSS典型值为1460字节</li>
<li><mark>MSS是指在报文段里应用层数据的最大长度,而不是指包括首部TCP报文段的最大长度</mark></li>
</ul>
</li>
<li>TCP为每块客户数据配上一个TCP首部,从而形成多个TCP报文段,这些报文段被下传到网络层,网络层将其封装在网络层IP数据报中,然后数据报将被发送到网络中.当TCP在另一端接收到一个报文段后,该报文段的数据就被放入该TCP连接的接收缓存中</li>
</ul>
<h3 id="352-tcp报文段结构"><a class="markdownIt-Anchor" href="#352-tcp报文段结构"></a> 3.5.2 TCP报文段结构</h3>
<ul>
<li>首部包括源端口号和目的端口号,被用于多路复用/分解来自或送到上层应用的数据据</li>
<li>首部包括检验和字段</li>
<li>32比特的序号字段和32比特的确认号字段:被TCP发送方和接收方用来实现可靠数据传输服务</li>
<li>16比特的接收窗口字段,用于流量控制</li>
<li>4比特的首部长度字段,指示了以32比特的字为单位的TCP的首部长度</li>
<li>可选与变长的选项字段,用于发送方与接收方协商最大报文段长度(MSS),或在高速网络下用作窗口调节因子使用</li>
<li>6比特的标志字段
<ul>
<li>ACK比特用于指示确认字段中的值是有效的</li>
<li>RST,SYN,FIN比特用于连接建立和拆除</li>
<li>CWR,ECE比特用于明确拥塞通告</li>
<li>PSH被置位时,就指示接收方应立即将数据交给上层</li>
<li>URG比特指示报文段里存在着被发送端的上层实体置为“紧急”的数据
<ul>
<li>紧急数据的最后一个字节由16比特的紧急数据指针字段指出</li>
<li>当紧急数据存在并给出指向紧急数据尾指针时,TCP必须通知接收端的上层实体</li>
</ul>
</li>
</ul>
</li>
<li>序号和确认号
<ul>
<li>TCP把数据看成一个无结构,有序的字节流
<ul>
<li>序号建立在传送的字节流上,而不是建立在传送的报文段的序列之上</li>
<li><mark>一个报文段的序号因此是该报文段首字节的字节流编号</mark></li>
<li>主机A填充仅报文段的确认号是主机A期望从主机B收到的下一字节的序号</li>
</ul>
</li>
</ul>
</li>
<li><strong>TCP提供累积确认</strong></li>
<li>一条TCP连接的双方均可随机地选择初始序号,可以减少将那些仍在网络中存在地两台主机之间先前已终止的连接报文段,误认为是后来这两台主机之间新建连接所产生的有效报文段的可能性</li>
<li>对客户到服务器的数据确认被装载在一个承载服务器到客户的数据的报文段中,这种确认被称为是被捎带</li>
</ul>
<h3 id="353-往返时间的估计与超时"><a class="markdownIt-Anchor" href="#353-往返时间的估计与超时"></a> 3.5.3 往返时间的估计与超时</h3>
<ul>
<li>估计往返时间
<ul>
<li>大多数TCP的实现仅在某个时刻做一次SampleRTT测量,而不是为每个发送的报文段测量一个SampleRTT</li>
</ul>
</li>
<li>一旦获得一个新的SampleRTT时,TCP就会根据公式来更新EstimatedRTT(SampleRTT均值)
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>α</mi><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">EstimatedRTT = (1-\alpha) EstimatedRTT+\alpha SampleRTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">a</span><span class="mord mathnormal">m</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></li>
<li>RFC中的推荐值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mn>0.125</mn></mrow><annotation encoding="application/x-tex">\alpha = 0.125</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span></span></span></span></li>
</ul>
</li>
<li>RFC定义了RTT偏差DevRTT,用于估算SampleRTT一般会偏离EstimateRTT的程度:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>β</mi><mi mathvariant="normal">∣</mi><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>−</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">DevRTT = (1-\beta) DevRTT + \beta |SampleRTT - EstimatedRTT|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">a</span><span class="mord mathnormal">m</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">∣</span></span></span></span>
<ul>
<li>RFC中的推荐值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.25</mn></mrow><annotation encoding="application/x-tex">\beta = 0.25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span></span></span></span></li>
</ul>
</li>
<li>设置和管理重传超市时间间隔
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mn>4</mn><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TimeoutInterval = EstimatedRTT + 4 DevRTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></li>
<li>推荐的初始值TimeoutInterval值为1秒.同时当出现超时后,TimeoutInterval值将加倍,以免即将被确认的后继报文段过早出现超时</li>
</ul>
</li>
</ul>
<h3 id="354-可靠数据传输"><a class="markdownIt-Anchor" href="#354-可靠数据传输"></a> 3.5.4 可靠数据传输</h3>
<ul>
<li>IP不保证数据报的交付,不保证数据报的按序交付,也不保证数据报中数据的完整性</li>
<li>TCP的可靠数据传输服务确保一个进程从其接收缓存中读出的数据流时无损坏,无间隔,非冗余和按序的数据流
<ul>
<li>字节流与连接的另一方端系统发送出的字节流是完全相同</li>
</ul>
</li>
<li>TCP发送方有3个与发送和重传有关的主要事件:
<ul>
<li>从上层应用程序接收数据；定时器超时和收到ACK
<ul>
<li>一旦第一个主要事件发生,TCP从应用程序接收数据,将数据封装在一个报文段中,并把该报文段交给IP,每个报文段含有一个序号,该序号为该报文段第一个数据字节的字节流编号.若定时器还没有为某些其他报文段而运行,则当报文段被传给IP时,TCP就启动该定时器</li>
</ul>
</li>
<li>超时
<ul>
<li>TCP重传引起超时的报文段来响应超时事件,然后TCP重启定时器</li>
</ul>
</li>
<li>到达一个来自接收方的确认报文段(ACK)
<ul>
<li>当该事件发生时,TCP将ACK的值y与变量SendBase进行比较.TCP状态变量SendBase是最早未被确认的字节的序号</li>
<li>TCP采取累积确认,y确认了字节编号在y之前的所有字节都已经收到</li>
<li>若<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>&gt;</mo><mi>S</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>B</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">y&gt;SendBase</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">e</span></span></span></span>,则该ACK是在确认一个或多个先前未被确认的报文段,发送方更新SendBase变量；若当前有未被确认的报文段,TCP还要重启定时器</li>
</ul>
</li>
</ul>
</li>
<li><strong>超时间隔加倍</strong>
<ul>
<li>每次TCP重传时都会将下一次的超时间隔设为先前的两倍,而不是从EstimatedRTT和DevRTT更新</li>
<li>超时间隔在每次重传后会呈指数型增长
<ul>
<li>然而,每当定时器在另两个事件中的任意一个启动时,TimeoutInterval由最近的EstimatedRTT与DevRTT值推算得到</li>
</ul>
</li>
</ul>
</li>
<li><strong>快速重传</strong>
<ul>
<li>当一个报文段丢失时,这种长超时周期迫使发送方延迟重传丢失的分组,因此增加了<strong>端到端时延</strong></li>
<li>冗余ACK就是再次确认某个报文段的ACK,而发送方先前已经收到对该报文段的确认</li>
<li>当TCP接收方收到一个具有序号大于下一个所期望的,按序的报文段,它检测到了数据流的一个间隔,着就是说有报文段丢失</li>
<li>如果TCP发送方接收到对相同数据的3个冗余ACK,说明这个被确认过3次的报文段已经丢失
<ul>
<li>一旦收到3个冗余ACK,TCP就执行<strong>快速重传</strong>,在该报文段的定时器过期之前重传丢失的报文段</li>
</ul>
</li>
</ul>
</li>
<li><strong>回退N步还是选择重传</strong>
<ul>
<li>TCP采用<strong>选择确认</strong></li>
<li>允许TCP接收方有选择地确认失序报文段,而不是累积的确认最后一个正确接收地有序报文段</li>
</ul>
</li>
</ul>
<h3 id="355-流量控制"><a class="markdownIt-Anchor" href="#355-流量控制"></a> 3.5.5 流量控制</h3>
<ul>
<li>TCP为应用程序提供了流量控制服务
<ul>
<li>流量控制是一个<strong>速度匹配服务</strong></li>
<li>TCP发送方也可能因为IP网络的拥塞控制而被抑制,这种形式的发送方控制称为拥塞控制</li>
<li>TCP通过让发送方维护一个称为<strong>接收窗口</strong>的变量来提供流量控制</li>
</ul>
</li>
<li>定义变量
<ul>
<li>LastByteRead:主机B上的应用进程从缓存读出的数据流的最后一个字节的编号</li>
<li>LastByteRcvd:从网络中到达的并且已经放入主机B接收缓存中的数据流的最后一个字节的编号</li>
<li><mark>TCP不允许已分配的缓存溢出,故<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>c</mi><mi>v</mi><mi>d</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo>&lt;</mo><mo>=</mo><mi>R</mi><mi>c</mi><mi>v</mi><mi>B</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>e</mi><mi>r</mi><mo separator="true">,</mo><mi>r</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>R</mi><mi>c</mi><mi>v</mi><mi>B</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>e</mi><mi>r</mi><mo>−</mo><mo stretchy="false">[</mo><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>c</mi><mi>v</mi><mi>d</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">LaseByteRcvd-LastByteRead&lt;=RcvBuffer,rwnd=RcvBuffer-[LastByteRcvd-LastByteRead]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mclose">]</span></span></span></span></mark></li>
</ul>
</li>
<li>使用rwnd来提供流量控制机制
<ul>
<li>主机B通过把当前的rwnd值放入它发送给主机A的报文段接收窗口字段中,通知主机A它在该连接的缓存中还有多少可用空间</li>
<li>开始时,主机B设定rwnd=RcvBuffer</li>
<li>主机A轮流跟踪两个变量LastByteSent和LastByteAcked,主机A发送到连接中但未被确认的数据量LastByteSent-LastByteAcked.通过将未确认的数据量控制在值rwnd以内,就可能保证主机A不会使主机B溢出,主机A在整个生命周期内保证<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>S</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>A</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>d</mi><mo>&lt;</mo><mo>=</mo><mi>r</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">LastByteSent-LastByteAcked&lt;=rwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span></li>
<li>TCP仅当在它有数据或有确认要发时才会发送报文段该主机A</li>
<li>当主机B的接收窗口为0时,主机A继续发送只有一个字节数据的报文段
<ul>
<li>报文段将会被接收方确认,最终缓存将开始清空,并且确认报文里将包含一个非0的rwnd值</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="356-tcp连接管理"><a class="markdownIt-Anchor" href="#356-tcp连接管理"></a> 3.5.6 TCP连接管理</h3>
<ul>
<li><strong>通过TCP建立连接(三次握手)</strong>
<ul>
<li>第一步:客户端的TCP首先向服务器端的TCP发送一个特殊的TCP报文段.该报文段中不包含应用层数据.但是在报文段的首部中的一个标志位(即SYN比特)被置为1.因此,这个特殊报文段被称为SYN报文段.另外,客户会随机地选择一个初始序号(client_isn),并将此编号放置于该起始的TCP SYN报文段的序号字段中.该报文段会被封装在一个IP数据报中,并发送给服务器</li>
<li>第二步:一旦包含TCP SYN报文段的IP数据报到达服务器主机()假定它的确到达了),服务器会从该数据报中提取出TCP SYN报文段,为该TCP连接分配TCP缓存和变量,并向该客户TCP发送允许连接的报文段.(在完成三次握手的第三步之前分配这些缓存和变量,使得TCP易于受到称为SYN洪泛的拒绝服务攻击)这个允许连接的报文段也不包含应用层数据
<ul>
<li>但是,在报文段的首部却包含3个重要的信息
<ul>
<li>首先,SYN比特被置为1</li>
<li>其次,该TCP报文段首部的确认号字段被置为client_isn＋1</li>
<li>服务器选择自己的初始序号(server_isn),并将其放置到TCP报文段首部的序号字段中</li>
</ul>
</li>
</ul>
</li>
<li>第三步:在收到SYNACK报文段后,客户也要给该连接分配缓存和变量.客户主机则向服务器发送另外一个报文段；这最后一个报文段对服务器的允许连接的报文段进行了确认(该客户通过将值server_isn＋1放置到TCP报文段首部的确认字段中来完成此项工作)
<ul>
<li>因为连接已经建立了,所以该SYN比特被置为0.该三次握手的第三个阶段可以在报文段负载中携带客户到服务器的数据</li>
<li>在以后的每一个报文段,SYN比特都i将将被置为0</li>
</ul>
</li>
</ul>
</li>
<li>关闭连接
<ul>
<li>客户应用进程发出一个关闭连接命令,引起客户TCP向服务器进程发送一个特殊的TCP报文段.这个特殊的报文段让其首部中的一个标志位即 FIN比特被设置为1.当服务器接收到该报文段后,就向发送方回送一个确认报文段.然后,服务器发送它自己的终止报文段,其FIN比特被置为1.最后,该客户对这个服务器的终止报文段进行确认.此时,在两台主机上用于该连接的所有资源都被释放了</li>
</ul>
</li>
<li>TCP状态变迁
<ul>
<li>客户的应用程序发起一个新的TCP连接,引起客户中的TCP向服务器中TCP发送一个SYN报文段.在发送过SYN报文段后,客户TCP进入了SYN_SENT状态.当客户TCP处于SYN_SENT状态时,它等待来自服务器TCP的对客户所发报文段文段进行确认且SYN比特被置为1的一个报文段.收到这样一个报文段之后,客户TCP进入ESTABLISHED(已建立)状态.当处在ESTABLISHED状态时,TCP客户就能发送和接收包含有效载荷数据(即应用层产生的数据)的TCP报文段了</li>
<li>假设客户应用程序决定要关闭该连接.这引起客户TCP发送一个带有FIN比特被置为1的TCP报文段,并进入FIN_WAIT_1状态.当处在FIN_WAIT1状态时,客户TCP等待一个来自服务器的带有确认的TCP报文段.当它收到该报文段时,客户TCP进入FIN_WAIT_2状态.当处在FIN_WAIT_2状态时,客户等待来自服务器的FIN比特被置为1的另一个报文段；当收到该报文段后,客户TCP对服务器的报文段进行确认,并进入TIME_WAIT状态.假定ACK丢失,TIME_WAIT状态使TCP客户重传最后的确认报文.在TIME_WAIT状态中所消耗的时间是与具体实现有关的,而典型的值是30秒、1分钟或2分钟.经过等待后,连接就正式关闭,客户端所有资源(包括端口号)将被释放</li>
</ul>
</li>
<li>考虑主机接收一个tCP报文段,其端口号或源IP地址与该主机上进行中的套接字都不匹配的情况
<ul>
<li>该主机将向源发送一个特殊重置报文段,该TCP报文段将RST标志位置为1</li>
<li>当一台主机接收一个UDP分组,它的目的端口与进行中的UDP套接字不匹配,该主机发送一个特殊的ICMP数据报</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="36-拥塞控制机制"><a class="markdownIt-Anchor" href="#36-拥塞控制机制"></a> 3.6 拥塞控制机制</h2>
<h3 id="361-拥塞原因与代价"><a class="markdownIt-Anchor" href="#361-拥塞原因与代价"></a> 3.6.1 拥塞原因与代价</h3>
<ul>
<li>情况1:两个发送方和一个具有无穷大缓存的路由器
<ul>
<li>当分组的到达速率接近链路容量时,分组经历巨大的排队时延</li>
</ul>
</li>
<li>情况2:两个发送方和一台具有有限缓存的路由器
<ul>
<li>发送方必须执行重传以补偿因为缓存溢出而丢弃的分组</li>
<li>发送方在遇到大时延时所进行的不必要重传会引起路由器利用其链路带宽来转发不必要的分组</li>
</ul>
</li>
<li>情况3:4个发送方和具有有限缓存的多台路由器及多跳路径
<ul>
<li>一个分组沿一条路径被丢弃时,每个上有路由器用于转发该分组到丢弃该分组而使用的传输容器最终被浪费掉了</li>
</ul>
</li>
</ul>
<h3 id="362-拥塞控制方法"><a class="markdownIt-Anchor" href="#362-拥塞控制方法"></a> 3.6.2 拥塞控制方法</h3>
<ul>
<li>端到端拥塞控制
<ul>
<li>网络层没有为运输层拥塞控制提供显式支持</li>
<li>网络中存在拥塞,端系统也必须通过对网络行为的观察来推断</li>
</ul>
</li>
<li>网络辅助的拥塞控制
<ul>
<li>路由器向发送方提供关于网络中拥塞状态的显式反馈</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="37-tcp拥塞控制"><a class="markdownIt-Anchor" href="#37-tcp拥塞控制"></a> 3.7 TCP拥塞控制</h2>
<ul>
<li>TCP所采用的方法是让每一个发送方格局所感知到的网络拥塞程序来限制其能向连接发送流量的速率
<ul>
<li>TCP连接的每一段都是由一个接收缓存,一个发送缓存和几个变量组成</li>
<li>运行在发送方的TCP拥塞控制机制跟踪一个额外的变量,即拥塞控制窗口cwnd,对一个TCP发送方能向网络中发送流量的速率进行了限制</li>
<li>发送方的发送概率大概是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mi mathvariant="normal">/</mi><mi>R</mi><mi>T</mi><mi>T</mi><mtext>字节</mtext><mi mathvariant="normal">/</mi><mtext>秒</mtext></mrow><annotation encoding="application/x-tex">cwnd/RTT 字节/秒</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord cjk_fallback">字</span><span class="mord cjk_fallback">节</span><span class="mord">/</span><span class="mord cjk_fallback">秒</span></span></span></span>,通过调节cwnd的值,发送方因此能调整它向连续发送数据的速率</li>
<li>当出现过度的拥塞时,在沿着这条路径上的一台路由器的缓存会溢出,引起一个数据报被丢弃.丢弃的数据报接着会引起发送方的丢包事件,发送方就认为在发送方到接收方的路径上出现了拥塞的指示</li>
</ul>
</li>
<li><strong>TCP是自计时的</strong>:TCP使用确认来触发增大它的拥塞窗口长度</li>
<li>TCP的指导性原则来设置发送速率
<ul>
<li>一个丢弃的报文段表意味着拥塞,因此当丢弃报文段时应当降低TCP发送方的速率
<ul>
<li>从拥塞控制的观点,该问题是TCP发送方应当如何减小它的拥塞控制窗口长度,即减小其发送速率,以应对这种推测的丢包事件</li>
</ul>
</li>
<li>一个确认报文段指示网络正向接收方交付发送方的报文段
<ul>
<li>因此,当对先前未确认报文段的确认到达时,能够增加发送方的速率</li>
</ul>
</li>
<li>带宽探测
<ul>
<li>给定ACK指示源到目的地路径无拥塞,而丢包事件指示路径拥塞,TCP调节其传输速率的策略是增加其速率以响应到达的ACK,除非出现丢包事件,此时才减小传输速率</li>
</ul>
</li>
</ul>
</li>
<li><strong>TCP拥塞控制算法</strong>
<ul>
<li><strong>慢启动</strong>
<ul>
<li>当一条TCP连接开始时,cwnd的值通常初始置为一个MSS较小值,使得初始发送速率大约为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mi>S</mi><mi mathvariant="normal">/</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">MSS/RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></li>
<li>在慢启动状态,cwnd的值以1个MSS开始并且每当传输的报文段首次被确认就增加1个MSS</li>
<li>每过一个RTT,发送速率就翻翻番
<ul>
<li><mark>TCP发送速率起始慢,在慢启动阶段以指数增长</mark></li>
</ul>
</li>
<li>结束指数增长
<ul>
<li>如果存在一个由超时指示的丢包事件,TCP发送方将cwnd设置为1并重新开始慢启动过程</li>
<li>并且将ssthresh(慢启动阈值的速记)设置为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">cwnd/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord">2</span></span></span></span>,即当检测到拥塞时将ssthresh置为拥塞窗口的一半</li>
<li>当cwnd等于ssthresh时,结束慢启动并且TCP转移到拥塞避免模式</li>
<li>进入拥塞避免模式时,TCP更加谨慎地增加cwnd</li>
<li>当检测到3个冗余ACK时,TCP执行快速重传并进入快速恢复状态</li>
</ul>
</li>
</ul>
</li>
<li><strong>拥塞避免</strong>
<ul>
<li>一旦进入拥塞避免状态,cwnd的值大约是上次遇到拥塞时的值的一半,即距离拥塞可能并不遥远</li>
<li>TCP无法每过一个RTT再将cwnd的值翻番,而是每个RTT只将cwnd的值增加一个MSS</li>
<li>一种通用的方法是对于TCP发送方无论何时到达一个新的确认,就将cwnd增加一个MSS(MSS/cwnd)字节</li>
<li>何时应当结束拥塞避免的线性增长?
<ul>
<li>当出现超时时,TCP的拥塞避免算法行为相同.与慢启动的情况一样,cwnd的值被设置为1个MSS,当丢包事件出现时,ssthresh的值被更新为cwnd值的一半</li>
<li>丢包事件也能由一个三个冗余ACK事件触发.在这种情况下,网络继续从发送方向接收方交付报文段,TCP将cwnd的值减半,并且当收到3个冗余的ACK,将ssthresh的值记录为cwnd的值的一半.接下来进入快速恢复状态</li>
</ul>
</li>
</ul>
</li>
<li><strong>快速恢复</strong>
<ul>
<li>在快速恢复中,对于引起TCP进入快速恢复状态的缺失报文段,对收到的每个冗余的ACK,cwnd的值增加一个MSS.最终,当对丢失报文段的一个ACK到达时,TCP在降低cwnd后进入拥塞避免状态.如果出现超时事件,快速恢复在执行如同在慢启动和拥塞免中相同的动作后,迁移到慢启动状态:当丢包事件出现时,cwnd的值被设置为1个MSS,并且 ssthresh的值设置为cwnd值的一半</li>
<li>快速恢复是TCP推荐的而非必需的构件.一种称为TCP的TCP早期版本,不管是发生超时指示的丢包事件,还是发生3个冗余ACK指示的天包事件,都无条件地将其拥塞窗口减至1个MSS,并进人慢启动阶段</li>
</ul>
</li>
<li><strong>TCP拥塞控制:回顾</strong>
<ul>
<li>每个RTT内cwnd线性(加性)增加1MSS,然后出现3个冗余ACK事件时,cwnd减半(乘性减)</li>
<li>TCP拥塞控制称为<strong>加性增,乘性减</strong></li>
<li>TCP线性增加它的拥塞窗口长度,直到出现3个冗余ACK事件,然后以2个因子来减少它的拥塞窗口长度,然后又开始了线性增长,探测是否还有另外地可用带宽</li>
</ul>
</li>
</ul>
</li>
<li>对TCP吞吐量地宏观描述
<ul>
<li>在分析中,将忽略在超时事件后出现的慢启动阶段(这些阶段通常非常短,因为发送方很快就以指数增长离开该阶段)
<ul>
<li>在一个特定的往返间隔内,TCP发送数据的速率是拥塞窗口与当前RTT的函数.当窗口长度是w字节,且当前往返时间是RTT秒时,则TCP的发送速率大约是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi mathvariant="normal">/</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">w/RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></li>
<li>TCP通过每经过1个RTT将w增加1个MSS探测出额外的带宽,直到一个丢包事件发生为止.当一个丢包事件发生时,用W表示w的值.
<ul>
<li>假设在连接持续期间RTT和W几乎不变,TCP的传输速率在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W/(2RTT)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span>到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi mathvariant="normal">/</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">W/RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>之间变化</li>
</ul>
</li>
</ul>
</li>
<li>TCP稳态行为的一个高度简化的宏观模型
<ul>
<li>当速率增长至W/RTT时,网络丢弃来自连接的分组；然后发送速率就会减半,进而每过一个RTT就发送速率增加MSS/RTT,直到再次达到W/RTT为止</li>
<li>这一过程不断地自我重复.因为TCP吞吐量(即速率)在两个极值之间线性增长</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>一条连接地平均吞吐量</mtext><mo>=</mo><mfrac><mrow><mn>0.75</mn><mi>W</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">一条连接地平均吞吐量=\frac{0.75W}{RTT}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">条</span><span class="mord cjk_fallback">连</span><span class="mord cjk_fallback">接</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">平</span><span class="mord cjk_fallback">均</span><span class="mord cjk_fallback">吞</span><span class="mord cjk_fallback">吐</span><span class="mord cjk_fallback">量</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">.</span><span class="mord mtight">7</span><span class="mord mtight">5</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
</li>
</ul>
</li>
<li>经高带宽路径地TCP
<ul>
<li>丢包率为L,往返事件RTT和最大报文长度MSS</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>一条连接地平均吞吐量</mtext><mo>=</mo><mfrac><mrow><mn>1.22</mn><mi>M</mi><mi>S</mi><mi>S</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi><msqrt><mi>L</mi></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">一条连接地平均吞吐量=\frac{1.22MSS}{RTT \sqrt{L}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">条</span><span class="mord cjk_fallback">连</span><span class="mord cjk_fallback">接</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">平</span><span class="mord cjk_fallback">均</span><span class="mord cjk_fallback">吞</span><span class="mord cjk_fallback">吐</span><span class="mord cjk_fallback">量</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.410331em;vertical-align:-0.538em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.537397em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322900000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathnormal mtight">L</span></span></span><span style="top:-2.89229em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.10770999999999997em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">.</span><span class="mord mtight">2</span><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
</li>
</ul>
<h3 id="371-公平性"><a class="markdownIt-Anchor" href="#371-公平性"></a> 3.7.1 公平性</h3>
<ul>
<li>考虑K条TCP连接,每条都有不用的端到端路径,但是都经过一段传输速率为R bps的瓶颈链路
<ul>
<li>瓶颈链路:指对于每条连接,沿着该连接路径上所有其他段链路都不拥塞,而且与该瓶颈链路的传输容量相比,都有充足的传输容量</li>
<li>如果每条连接的平均传输速率接近<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi mathvariant="normal">/</mi><mi>K</mi></mrow><annotation encoding="application/x-tex">R/K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>,即每条连接都得有相同份额的链路带宽</li>
</ul>
</li>
<li>从TCP的观点看,运行在UDP上的多媒体运用时不公平的
<ul>
<li>它们不与其他连接合作,也不适合地调整其传输速率,因此TCP拥塞控制在面临拥塞增加时,将降低其传输速率,而UDP源则不必这样做</li>
<li><mark>UDP源有可能压制TCP流量</mark></li>
</ul>
</li>
</ul>
<hr />
<h1 id="4-网络层数据平面"><a class="markdownIt-Anchor" href="#4-网络层数据平面"></a> 4 网络层:数据平面</h1>
<ul>
<li>网络层能够分解成两个相互作用的部分：<strong>数据平面</strong>和<strong>控制平面</strong></li>
</ul>
</div><div class="story post-story"><h2 id="41-网络层概述"><a class="markdownIt-Anchor" href="#41-网络层概述"></a> 4.1 网络层概述</h2>
<ul>
<li>每台路由器的数据平面的主要作用是从其输入链路向其输出链路转发数据报</li>
<li>控制平面的主要作用是协调一些本地的每台路由器转发动作，使得数据报沿着源和目的地主机之间的路由器路径最终进行端到端传送</li>
</ul>
<h3 id="411-转发和路由选择数据平面和控制平面"><a class="markdownIt-Anchor" href="#411-转发和路由选择数据平面和控制平面"></a> 4.1.1 转发和路由选择:数据平面和控制平面</h3>
<ul>
<li><strong>转发</strong>:指将分组从一个输入链路接口转移到适当的输出链路接口的路由器本地动作
<ul>
<li>当一个分组到达某路由器的一条输入链路时，该路由器必须将该分组移动到适合的输出链路</li>
<li>转发是在数据平面中实现的唯一功能</li>
</ul>
</li>
<li><strong>路由选择</strong>:指确定分组从源到目的地所采取的端到端路径的网络范围处理过程
<ul>
<li>当分组从发送方流向接收方时，网络层必须决定这些分组所采用的路由或路径</li>
<li>计算这些路径的算法称为<strong>路由选择算法</strong>
<ul>
<li>路由选择算法决定了插入该路由器转发表的内容</li>
<li>运行在每台路由器中，并且在每台路由器中都包含转发和路由选择两种功能</li>
</ul>
</li>
</ul>
</li>
<li>每台网络路由器中有一个关键元素是它的<strong>转发表</strong>
<ul>
<li>路由器检查到达分组首部的一个或多个字段值，进而使用这些首部值在其转发表中索引，通过这种方法来转发分组。这些值对应存储在转发表项中的值，指出了该分组将被转发的路由器的输出链路接口</li>
</ul>
</li>
<li>控制平面:SDN方法
<ul>
<li><strong>软件定义网络(SDN)</strong>:计算转发表并与路由器交互的控制器是用软件实现的，网络是软件定义的</li>
</ul>
</li>
</ul>
<h3 id="412-网络服务模型"><a class="markdownIt-Anchor" href="#412-网络服务模型"></a> 4.1.2 网络服务模型</h3>
<ul>
<li>网络服务模型定义了分组在发送与接收端系统之间的端到端运输特性，该服务包括
<ul>
<li>确保交付</li>
<li>具有时延上界的确保交付</li>
<li>有序分组交付</li>
<li>确保最小带宽</li>
<li>安全性</li>
</ul>
</li>
<li>因特网的网络层提供单一的服务，称为<strong>尽力而为服务</strong>
<ul>
<li>传送的分组既不能保证以它们发送的顺序被接收，也不能保证它们最终交付</li>
<li>既不能保证端到端时延，也不能保证最小带宽</li>
</ul>
</li>
<li>分组交换机是一台通用分组交换设备，根据分组首部字段中的值，从输入链路接口到输出链路接口转移分组
<ul>
<li>某些链路层帧的字段值做出转发决定，交换机因此称为链路层(第二层)设备</li>
<li>其他分组交换机称为路由器，基于网络层数据报中的首部字段值做出转发决定</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="42-路由器工作原理"><a class="markdownIt-Anchor" href="#42-路由器工作原理"></a> 4.2 路由器工作原理</h2>
<ul>
<li>路由器的4个组件
<ul>
<li>输入端口</li>
<li>交换结构</li>
<li>输出端口</li>
<li>路由选择处理器</li>
</ul>
</li>
<li>路由器处理的信息
<ul>
<li>基于目的地转发</li>
<li>通用转发</li>
</ul>
</li>
</ul>
<h3 id="421-输入端口处理和基于目的地转发"><a class="markdownIt-Anchor" href="#421-输入端口处理和基于目的地转发"></a> 4.2.1 输入端口处理和基于目的地转发</h3>
<ul>
<li>输入端口的线路端接功能与链路层处理实现了用于各个输入链路的物理层和链路层。在输入端口中执行的查找对于路由器运行时至关重要的
<ul>
<li>路由器使用转发表来查找输出端口，使得到达的分组能经过交换结构转发到该输出端口。</li>
<li>转发表时路由选择处理器计算和更新的，或者转发表接收来自远程SDN控制器的内容</li>
<li>使用在每个输入端口的影子副本，转发决策能在每个输入端口本地做出，无须基于每个分组调用集中式路由选择处理器，避免了集中式处理的瓶颈</li>
</ul>
</li>
<li>当使用转发表时，路由器用分组目的地址的前缀与该表中的表象进行匹配
<ul>
<li>如果存在一个匹配项，则路由器向与该匹配项相关联的链路转发分组</li>
<li>当有多个匹配项时，该路由器使用<strong>最长前缀匹配规则</strong>，寻找在表中最长的匹配项，并与最长前缀匹配相关联的链路接口转发分组</li>
</ul>
</li>
</ul>
<h3 id="422-交换"><a class="markdownIt-Anchor" href="#422-交换"></a> 4.2.2 交换</h3>
<ul>
<li>经内存交换</li>
<li>经总线交换
<ul>
<li>输入端口经一根共享总线将分组直接传送到输出端口，不需要经过路哟选择处理器的干预</li>
<li>路由器的交换带宽受到总线速率的限制</li>
</ul>
</li>
<li>经互联网络交换
<ul>
<li>纵横式交换机是一种由2N条总线组成的互联网络，它连接N个输入端口与N个输出端口</li>
<li>纵横式交换机是非阻塞的，即只要没有其他分组当前被转发到该输出端口，转发到输出端口的分组将不会被到达输出端口的分组阻塞</li>
</ul>
</li>
</ul>
<h3 id="424-何时出现排队"><a class="markdownIt-Anchor" href="#424-何时出现排队"></a> 4.2.4 何时出现排队</h3>
<ul>
<li>因为随着队列的增长，路由器的缓存空间最终将会耗尽，并且当无内存可用于存储到达的分组时将会出现丢包</li>
<li><strong>线路前部阻塞(HOL)</strong>:在一个输入队列中排队的分组必须等待通过交换结构发哦是那个，因为它被位于线路前部的另一个分组所阻塞</li>
<li>当没有足够的内存来缓存一个入分组时
<ul>
<li>要么丢弃到达的分组(<strong>弃尾</strong>)</li>
<li>要么删除一个或多个已排队的分组</li>
</ul>
</li>
</ul>
<h3 id="425-分组调度"><a class="markdownIt-Anchor" href="#425-分组调度"></a> 4.2.5 分组调度</h3>
<ul>
<li><strong>先进先出(FIFO)</strong>
<ul>
<li>当链路当前正忙于传输另一个分组，到达链路输出队列的分组要排队等待传输，若没有足够的缓存空间来容纳到达的分组，队列的分组丢弃测量确定该分组是否被丢弃</li>
<li>按照分组到达输出链路队列的相同次序来选择分组在链路上传输</li>
</ul>
</li>
<li><strong>优先权排队</strong>
<ul>
<li>到达输出链路的分组被分类放入输出队列中的优先权类</li>
<li><strong>非抢占式优先排队</strong>:一旦分组开始传输，就不能打断</li>
</ul>
</li>
<li><strong>循环和加权公平排队</strong>
<ul>
<li><strong>循环排队规则</strong>:分组像使用优先权排队那样被分类，在类之间不存在严格的服务优先权，循环调度器在这些类之间轮流提供服务
<ul>
<li>最简单的循环调度中，类1的分组被传输，接着是类2的分组，接着又是类1的分组</li>
</ul>
</li>
<li><strong>保持工作排队规则</strong>
<ul>
<li>在有分组排序等待传输时，不允许链路保持空闲</li>
<li>当寻找给定类的分组但是没有找到时，保持工作的循环规则将立即检查循环序列中的下一个类</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="43-网络协议ipv4寻址ipv6及其他"><a class="markdownIt-Anchor" href="#43-网络协议ipv4寻址ipv6及其他"></a> 4.3 网络协议:IPv4,寻址,IPV6及其他</h2>
<h3 id="431-ipv4数据报格式"><a class="markdownIt-Anchor" href="#431-ipv4数据报格式"></a> 4.3.1 IPv4数据报格式</h3>
<ul>
<li><mark>网络层分组被称为数据报</mark></li>
<li>IPv4数据报的关键字
<ul>
<li>版本(号)，4比特规定了数据报的IP协议版本</li>
<li>首部长度，4比特确定IP数据报中的载荷实际开始的地方
<ul>
<li>大多数IP数据报不包含选项</li>
<li><mark>一般的IP数据报具有20字节的首部</mark></li>
</ul>
</li>
<li>服务类型
<ul>
<li>使不同类型的IP数据报能相互区别开来</li>
</ul>
</li>
<li>数据报长度
<ul>
<li>16比特，IP数据报的总长度，以字节计</li>
<li>IP数据报的理论最长长度为65535字节，数据报很少有超过1500字节的，该长度使得IP数据报能容纳最大长度以太网帧的载荷字段</li>
</ul>
</li>
<li>标识，标志，片偏移</li>
<li>寿命(TTL)
<ul>
<li>确保数据报不会永远在网络中循环</li>
<li>每当一台路由器处理数据报时，该字段的值减1，若TTL字段减为0，则该数据报必须丢弃</li>
</ul>
</li>
<li>协议
<ul>
<li>仅当一个IP数据报到达其最终目的地才会有用。该字段值指示了IP数据报的数据部分应当给哪个特定的运输层协议</li>
<li>值为6表明数据部分要交给TCP，值为17表明数据要交给UDP</li>
</ul>
</li>
<li>首部检验和:用于帮助路由器检测受到的IP数据报中的比特错误</li>
<li>源和目的IP地址:当源生成一个数据报时，在源IP字段中插入它的IP地址，在目的IP地址字段中插入其最终目的地的地址</li>
<li>选项:允许IP字段被扩展</li>
<li>数据:有效载荷</li>
</ul>
</li>
<li><mark>一个IP数据报有总长为20字节的首部，如果数据报承载一个TCP报文段，则每个数据报共承载总长40字节的首部(20字节的IP首部加上20字节的TCP首部)以及应用层报文</mark></li>
</ul>
<h3 id="432-ipv4数据报分片"><a class="markdownIt-Anchor" href="#432-ipv4数据报分片"></a> 4.3.2 IPv4数据报分片</h3>
<ul>
<li>一个链路层帧能承载的最大数据量叫做<strong>最大传输单元(MTU)</strong>
<ul>
<li>每个IP数据报封装在链路层帧中从一台路由器传输到下一台路由器，故链路层协议的MTU严格地限制着IP数据报的长度</li>
</ul>
</li>
<li>IPv4设计者将标识，标志和片偏移字段放在IP数据报首部中
<ul>
<li>当生成一个数据报时，发送主机在为该数据报设置源和目的地址的同时贴上标识号</li>
<li>发送主机通常将它的发送的每个数据报的标识号加1</li>
<li>当某路由器需要对一个数据报分片时，形成的每个数据报具有初始数据报的源地址，目的地址与标识号</li>
<li>当目的地从同一发送主机收到一系列数据报时，能够检查数据报的标识号以确定哪些数据报实际上是同一较大数据报的片</li>
<li>为了让目的主机绝对地相信它已收到了初始数据报地最后一个片，最后一个片地标志比特被设为0，而所有其他片地标志比特被设为1</li>
</ul>
</li>
</ul>
<h3 id="433-ipv4编址"><a class="markdownIt-Anchor" href="#433-ipv4编址"></a> 4.3.3 IPv4编址</h3>
<ul>
<li>简述主机与路由器连入网络的方法
<ul>
<li>一台主机通常只有一个链路连接网络；当主机中的IP想发送一个数据报时，它就在该链路上发送</li>
<li>主机与物理链路之间的边界叫做<strong>接口</strong>
<ul>
<li>路由器的任务是从链路层上接收数据报并从某些其他链路转发出去，路由器必须拥有两条或更多条链路与它连接</li>
<li>路由器与它的任意一条链路之间的边界称做接口</li>
</ul>
</li>
<li><strong>一个IP地址与一个接口相关联，而不是与包括该接口的主机或路由器相关联</strong></li>
</ul>
</li>
<li><strong>IP地址为32比特</strong>，采用<strong>点分十进制记法</strong>
<ul>
<li>地址中的每个字节用它的十进制形式书写，各字节间以句号隔开</li>
<li>在全球因特网中每台主机和路由器的每个接口都不许有全球唯一的IP地址</li>
<li>一个接口的IP地址的一部分需要由其连接的子网来决定</li>
</ul>
</li>
<li><strong>子网掩码，指示32比特中最左侧的x比特定义了子网地址</strong>
<ul>
<li>一个子网的IP地址定义并不局限于连接多台主机到一台路由器接口的以太网段</li>
</ul>
</li>
<li>确认子网
<ul>
<li>分开主机和路由器的每个接口，产生几个隔离的网络岛，使用接口端接这些隔离的网络的端口</li>
<li>隔离的网络中的每一个都叫做一个子网</li>
</ul>
</li>
<li>因特网的地址分配策略称为<strong>无类别域间路由选择(CIDR)</strong>
<ul>
<li>将子网的概念一般化</li>
<li>当使用子网寻址时，32比特的IP被划分为两部分，并且也具有点分十进制数形式<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi mathvariant="normal">.</mi><mi>d</mi><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">a.b.c.d/x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mord">.</span><span class="mord mathnormal">c</span><span class="mord">.</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal">x</span></span></span></span>
<ul>
<li>x指示了地址第一部分中的比特数,指示了<strong>子网掩码</strong></li>
<li>x最高比特构成了IP地址的网络部分，并且经常被称为<strong>前缀</strong>
<ul>
<li>使用单个网络前缀通过多个网络的能力称为<strong>地址聚合或路由聚合</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi mathvariant="normal">.</mi><mi>d</mi><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">a.b.c.d/x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mord">.</span><span class="mord mathnormal">c</span><span class="mord">.</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal">x</span></span></span></span>中前x比特定义了组织的网络前缀，网络部分，剩余的32-x部分在该组织中划分子网
<ul>
<li>网络部分划分为长度为8位,16或24比特分别为A,B和C类网络，是一种称为分类编址的编址方案</li>
<li>A(/8)类网络</li>
<li>B(/16)类网络，可容纳65534台主机</li>
<li>C(/24)类网络，可容纳<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>254</mn></mrow><annotation encoding="application/x-tex">2^8-2=254</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">4</span></span></span></span>台主机</li>
</ul>
</li>
<li>当主机发出一个目的地址位255.255.255.255的数据报时，该报文会交付给同一网络中的所有主机
<ul>
<li>也会向邻近的子网转发该报文</li>
</ul>
</li>
<li><strong>动态主机协议配置(DHCP)</strong>
<ul>
<li><strong>即插即用协议，零配置协议</strong></li>
<li>某些主机将被分配一个临时的IP地址，每次与网络连接时该地址也许不同</li>
<li>是一个客户-服务器协议，在最简单场合下，每个子网将具有一台DHCP服务器，如果在某子网中没有服务器，则需要一个DHCP中继代理</li>
<li>DHCP是一个4个步骤的过程
<ul>
<li><strong>DHCP服务器发现</strong>：
<ul>
<li>通过使用DHCP发送报文来完成，客户在UDP分组中向端口67发送该发现报文。该UDP分组封装在一个IP数据报中</li>
<li>在这种情况下，DHCP客户生成包含DHCP发现报文的IP数据报，其中使用广播目的地址255.255.255.255并且使用“本主机”源IP地址0.0.0.0</li>
<li>DHCP客户将该IP数据报传递给链路层，链路层然后将该帧广播到所有与该子网连接的节点</li>
</ul>
</li>
<li><strong>DHCP服务器提供</strong>
<ul>
<li>DHCP服务器收到一个DHCP发现报文时，用<strong>DHCP提供报文</strong>向客户做出响应，该报文向该子网的所有节点广播，仍然使用IP广播地址255.255.255.255</li>
<li>每台路由器提供的报文包含有收到的发现报文事务ID，向客户推荐的IP地址，网络掩码以及IP地址租用期</li>
</ul>
</li>
<li><strong>DHCP请求</strong>
<ul>
<li>新到达的客户从一个或多个服务器提供中选择一个，并向选中的服务器提供用<strong>DHCP请求报文</strong>进行响应，回显配置的参数</li>
</ul>
</li>
<li><strong>DHCP ACK</strong>
<ul>
<li>服务器用DHCP ACK报文对DHCP请求报文进行响应，证实所要求的参数</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="434-网络地址转换"><a class="markdownIt-Anchor" href="#434-网络地址转换"></a> 4.3.4 网络地址转换</h3>
<ul>
<li><strong>网络地址转换NAT</strong>
<ul>
<li>使能路由器对于外部世界来说甚至不像一台路由器</li>
<li>相反NAT路由器对外界的行为就如同具有单一IP地址的单一设备</li>
<li>从本质上讲，NAT使能路由器对外界隐藏了家庭网络的细节</li>
</ul>
</li>
<li>从广域网到达NAT路由器的所有数据报都具有相同的目的IP地址，<strong>路由器上的NAT转换表</strong>，并且在表项中包含了端口号及其IP地址，使路由器讲某个分组转发给内容主机</li>
<li><strong>NAT穿越</strong>和<strong>通用即插即用(UPnP)</strong>
<ul>
<li>UPnP是一种允许主机发现和配置邻近NAT的协议</li>
</ul>
</li>
</ul>
<h3 id="435-ipv6"><a class="markdownIt-Anchor" href="#435-ipv6"></a> 4.3.5 IPv6</h3>
<ul>
<li>IPv6数据报
<ul>
<li>扩大的地址容量
<ul>
<li><mark>IPv6将IP地址长度从32比特增加到128比特</mark></li>
<li>IPv6引入了一种任播地址的新型地址，可以是数据报交付给一组主机中的任意一个</li>
</ul>
</li>
<li>简化高效的40字节首部:形成的40字节定长首部允许路由器更快地处理IP数据报</li>
<li>流标签:具有流定义</li>
</ul>
</li>
<li><strong>IPv4向IPv6的迁移</strong>
<ul>
<li><strong>建隧道</strong>:两台IPv6路由器之间的IPv4路由器的集合称为隧道</li>
<li>借助于隧道，在隧道发送端的IPv6节点可将IPv6的数据报放在一个IPv4数据报的数据字段中</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="44-通用转发和sdn"><a class="markdownIt-Anchor" href="#44-通用转发和sdn"></a> 4.4 通用转发和SDN</h2>
<ul>
<li>将基于目的地转发的特征总结为两个步骤
<ul>
<li>查找目的IP地址(“匹配”)</li>
<li>然后将分组发送到有特定输出端口的交换结构(“动作”)</li>
</ul>
</li>
<li>匹配加动作转发表在OpenFlow中称为<strong>流表</strong>，表项包括
<ul>
<li>首部字段值的集合</li>
<li>计数器集合</li>
<li>当分组匹配流表项时所采取的动作集合</li>
</ul>
</li>
</ul>
<h3 id="441-匹配"><a class="markdownIt-Anchor" href="#441-匹配"></a> 4.4.1 匹配</h3>
<ul>
<li>11个分组首部字段和入端口ID，该ID能被OpenFlow 1.0中的匹配加动作规则所匹配
<ul>
<li>到达一台分组交换机的一个链路层（第二层）帧将包含一个网络层（第三层）数据报作为其有效载荷，该载荷通常依次将包含一个运输层（第四层）报文段</li>
<li>OpenFlow的匹配抽象允许对来自三个层次的协议首部所选择的字段进行匹配</li>
<li>源和目的MAC地址是与帧的发送和接收接口相关联的链路层地址；通过基于以太网地址而不是IP地址进行转发，OpenFlow使能的设备能够等价于路由器（第三层设备）转发数据报以及交换机（第二层设备）转发帧。以太网类型字段对应于较高层协议（例如IP），利用该字段分解该帧的载荷，并且VLAN字段与所谓虚拟局域网相关联</li>
<li>入端口是指分组交换机上接收分组的输入端口</li>
</ul>
</li>
</ul>
<h3 id="442-动作"><a class="markdownIt-Anchor" href="#442-动作"></a> 4.4.2 动作</h3>
<ul>
<li>每个流表项都有零个或多个动作列表，决定了应用与流表项匹配的分组的处理
<ul>
<li>若有多个动作，则按在表中规定的次序执行</li>
</ul>
</li>
<li>其中最为重要的动作可能是
<ul>
<li>转发</li>
<li>丢弃</li>
<li>修改字段</li>
</ul>
</li>
</ul>
<hr />
<h1 id="5-网络层控制平面"><a class="markdownIt-Anchor" href="#5-网络层控制平面"></a> 5 网络层:控制平面</h1>
<ul>
<li>转发表和流变计算，维护和安装的方法
<ul>
<li>每路由器控制：在每台路由器中运行一种路由选择算法的情况，每台路由器中都包含转发和路由功能</li>
<li>逻辑集中式控制：逻辑集中式控制器计算并分发转发表以供每台路由器使用</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="52-路由选择算法"><a class="markdownIt-Anchor" href="#52-路由选择算法"></a> 5.2 路由选择算法</h2>
<ul>
<li>用图来形式化描述路由选择问题
<ul>
<li>图<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>N</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G=(N,E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>是一个N个节点和E条边的集合，其中每条边是取自N的一对节点</li>
<li>在网络层路由选择的环境中，图中的节点表示路由器(做出分组转发决定的点)</li>
<li>连接节点的边表示路由器之间的物理链路</li>
</ul>
</li>
<li><strong>最低开销路径问题</strong>:找出源和目的地之间具有最低开销的一条路
<ul>
<li>最低开销路径就是最短路径，及在源和目的地之间具有最小链路数量的路径</li>
</ul>
</li>
<li>路由选择算法的分类
<ul>
<li>集中式路由选择算法
<ul>
<li>具有关于连通性和链路开销方面的完整信息</li>
<li>具有全局状态信息的算法称为<strong>链路状态(LS)算法</strong></li>
</ul>
</li>
<li>分散式路由选择算法
<ul>
<li>路由器以迭代，分布式的方式计算出最低开销路径</li>
<li><strong>距离向量(DV)算法</strong>的分散式路由选择算法</li>
</ul>
</li>
<li>静态路由选择算法,动态路由选择算法</li>
<li>负载敏感算法</li>
</ul>
</li>
</ul>
<h3 id="521-链路状态路由选择算法"><a class="markdownIt-Anchor" href="#521-链路状态路由选择算法"></a> 5.2.1 链路状态路由选择算法</h3>
<ul>
<li>在链路状态算法中，网络拓扑和所有的链路开销都是一致的，可用作LS算法的输入</li>
<li><strong>链路状态路由选择算法也叫做Dijkstra算法</strong>
<ul>
<li>在初始化步骤，从u到与其直接相连的邻居v、x、w的当前已知最低开销路径分别初始化为2、1和5。特别值得注意的是，到w的开销被设为5，因为这是从u到w的直接（一跳）链路开销。到y与z的开销被设为无穷大，因为它们不直接与u连接</li>
<li>在第一次迭代中，观察那些还未加到集合N＇中的节点，并且找出在前一次迭代结束时具有最低开销的节点。那个节点便是x，其开销是1，因此x被加到集合N＇中。于是LS算法中的第12行中的程序被执行，以更新所有节点v的D（v），产生表5-1中第2行（步骤1）所示的结果。到v的路径开销未变。经过节点x到w（在初始化结束时其开销为5）的路径开销被发现为4。因此这条具有更低开销的路径被选中，且沿从u开始的最短路径上w＇的前一节点被设为x。类似地，到y（经过x）的开销被计算为2，且该表也被相应地更新</li>
<li>在第二次迭代时，节点v与y被发现具有最低开销路径（2），并且我们任意改变次序将y加到集合N＇中，使得N＇中含有u、x和y。到仍不在N＇中的其余节点（即节点v、w和z）的开销通过LS算法中的第12行进行更新</li>
<li>如此等等</li>
</ul>
</li>
<li>链路状态算法在最差情况下复杂性为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="522-距离向量路由选择算法"><a class="markdownIt-Anchor" href="#522-距离向量路由选择算法"></a> 5.2.2 距离向量路由选择算法</h3>
<ul>
<li>距离向量算法是一种迭代器，异步的和分布式的算法
<ul>
<li>每个节点都要从一个或多个直接相连邻居接收某些信息，执行计算，然后将器计算结果分发给邻居</li>
<li>此过程一直要持续到邻居之间无更多信息要交换为止</li>
<li>不要求所有节点相互之间步伐一致地操作</li>
</ul>
</li>
<li>最低开销与Bellman_Ford方程<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>v</mi></msub><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>d</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mo separator="true">,</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>v</mi></msub><mtext>是对</mtext><mi>x</mi><mtext>地所有邻居的</mtext></mrow><annotation encoding="application/x-tex">d_x(y) = min_v { c(x,v) + d_v(y) },min_v是对x地所有邻居的</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">对</span><span class="mord mathnormal">x</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">邻</span><span class="mord cjk_fallback">居</span><span class="mord cjk_fallback">的</span></span></span></span></li>
<li>基本思想
<ul>
<li>每个节点x以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_x(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>开始，对在N中的所有结点y，估计从x到y的最低开销路径的开销</li>
<li>令<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo>=</mo><mo stretchy="false">[</mo><msub><mi>D</mi><mi>y</mi></msub><mo>:</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D_x = [D_y:y \in N]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">]</span></span></span></span>是节点x的距离向量，该向量是从x到在N中所有其他节点y的开销估计向量</li>
<li>使用DV算法，每个节点x维护下列路由选择信息
<ul>
<li>对于每个邻居v，从x到直接相连邻居v的开销为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">c(x,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span></li>
<li>节点x的距离向量，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo>=</mo><mo stretchy="false">[</mo><msub><mi>D</mi><mi>y</mi></msub><mo>:</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D_x = [D_y:y \in N]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">]</span></span></span></span>，包含了x到N中所有目的地y的开销估计值</li>
<li>它的每个邻居的距离向量，即对x的每个邻居v有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>v</mi></msub><mo>=</mo><mo stretchy="false">[</mo><msub><mi>D</mi><mi>v</mi></msub><mo>:</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D_v = [D_v:y \in N]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">]</span></span></span></span></li>
</ul>
</li>
<li>在该分布式，异步算法中，每个节点不时地向它的每个邻居发送它的距离向量副本</li>
<li>当节点x从任何一个邻居w接收到一个新距离向量，它保存w的距离向量，然后使用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>v</mi></msub><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>d</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">d_x(y) = min_v { c(x,v) + d_v(y) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span>方程更新自己的距离向量</li>
<li>如果节点x的距离向量因这个变化步骤而改变，节点x接下来将向它的每个邻居发送其更新后的距离向量，继而让所有邻居更新自己的距离向量</li>
<li><mark>每个开销估计<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mtext>收敛到</mtext><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_x(y) 收敛到 d_x(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">敛</span><span class="mord cjk_fallback">到</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></mark></li>
</ul>
</li>
<li>DV算法只需要两次迭代就达到了静止状态
<ul>
<li>在x与y之间开销减少的好消息通过网络得到了迅速传播</li>
<li>关于链路开销增加的坏消息传播很慢</li>
</ul>
</li>
<li>LS与DV算法的比较
<ul>
<li>在DV算法中，每个节点仅与它直接相连的邻居交谈，但为其邻居提供了从自己到网络中所有其他节点的最低开销估计
<ul>
<li>LS算法需要全局信息</li>
</ul>
</li>
<li>报文复杂性
<ul>
<li>LS算法要发送<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi>N</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>E</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(|N||E|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>的报文</li>
<li>DV算法要求在每次迭代时，在两个直接相连邻居之间交换报文
<ul>
<li>当链路开销改变时，DV算法仅当在新的链路开销导致与该链路相连节点的最低开销路径发生改变时，才传播以改变的链路开销</li>
</ul>
</li>
</ul>
</li>
<li>收敛速度
<ul>
<li>LS算法的实现时一个要求<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi>N</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>E</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(|N||E|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>个报文的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>算法</li>
<li>DV算法收敛较慢，且在收敛时会遇到路由选择环路，还会遭遇无穷计数问题</li>
</ul>
</li>
<li>健壮性</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="53-因特网中自治系统内部的路由选择ospf"><a class="markdownIt-Anchor" href="#53-因特网中自治系统内部的路由选择ospf"></a> 5.3 因特网中自治系统内部的路由选择:OSPF</h2>
<ul>
<li><strong>自治系统:AS</strong></li>
<li><strong>开放最短路有限(OSPF)</strong>
<ul>
<li>链路状态协议，使用洪泛链路状态信息和Dijkstra最低开销路径算法</li>
<li>使用OSPF，一台路由器构建了一幅关于整个自治系统的完整拓扑图。于是，每台路由器在本地运行Dijkstra的最短路径算法，以确定一个以自身为根节点到所有子网的最短路径树</li>
<li>使用时，路由器向自治系统内所有其他路由器广播路由选择信息。每当一条链路的状态发生变化，路由器就会广播链路状态信息。即使链路状态未发生变化，也要周期性地广播链路状态</li>
<li><mark>OSPF通告包含在OSPF报文中，该OSPF报文直接由IP承载，对OSPF其上层协议地值未89</mark></li>
</ul>
</li>
<li>OSPF的优点
<ul>
<li>安全</li>
<li>多条相同开销的路径</li>
<li>对单播与多播路由选择的综合支持</li>
<li>支持在单个AS中的层次结构</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="54-isp之间的路由选择bgp"><a class="markdownIt-Anchor" href="#54-isp之间的路由选择bgp"></a> 5.4 ISP之间的路由选择:BGP</h2>
<ul>
<li>OSPF是一个AS内部路由选择协议
<ul>
<li>当在相同AS内的源和目的地之间进行分组选路时，分组遵循的路径完全由AS内路由选择协议所决定</li>
<li>因为AS间路由选择协议涉及多个AS之间的协调，AS通信必须运行相同的AS间路由选择协议</li>
<li>在因特网中，所有的AS运行相同的AS间路由选择协议，称为<strong>边界网关协议(BGP)</strong>
<ul>
<li>BGP是一种分布式和异步的协议</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="541-bgp的作用"><a class="markdownIt-Anchor" href="#541-bgp的作用"></a> 5.4.1 BGP的作用</h3>
<ul>
<li>作为AS间的路由选择协议，BGP为每台路由器提供了一种完成以下任务的手段
<ul>
<li>从邻居AS获得前缀的可达性信息</li>
<li>确定到该前缀的最好的路由器</li>
</ul>
</li>
</ul>
<h3 id="542-通过bgp路由信息"><a class="markdownIt-Anchor" href="#542-通过bgp路由信息"></a> 5.4.2 通过BGP路由信息</h3>
<ul>
<li>每台路由器要么是一台<strong>网关路由器</strong>，要么是一台<strong>内部路由器</strong>
<ul>
<li>网关路由器是一台位于AS边缘的路由器，直接连接到在其他AS中的一台或多台路由器</li>
<li>内部路由器仅连接在它自己AS中的主机和路由器</li>
</ul>
</li>
<li>在BGP中，每对路由器通过使用179端口的半永久TCP连接交换路由选择信息
<ul>
<li>每条直接连接以及所有通过该连接发送的BGP报文，称为BGP连接</li>
<li>跨越两个AS的BGP连接称为<strong>外部BGP(eBGP)</strong></li>
<li>相同AS中的两台路由器之间的BGP会话称为<strong>内部BGP(iBGP)</strong>
<ul>
<li>iBGP连接并不总是与物理链路对应</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="543-确认最好的路由"><a class="markdownIt-Anchor" href="#543-确认最好的路由"></a> 5.4.3 确认最好的路由</h3>
<ul>
<li>当路由器通过BGP连接通告前缀时，它在前缀中包括一些BGP属性
<ul>
<li>前缀及其属性称为<strong>路由</strong></li>
<li>两个重要的属性是AS-PATH和NEXT-HOP
<ul>
<li>AS-PATH属性包含了通过已经通过的AS的列表</li>
<li>AS-PATH属性还用来检测和防止通过环路</li>
<li>NEXT-HOP是AS-PATH起始的路由器的接口IP的地址</li>
</ul>
</li>
</ul>
</li>
<li><strong>热土豆路由选择</strong>
<ul>
<li>使用热土豆路由选择，选择的路由到开始改路由的NEXT-HOP路由器具有最小的开销</li>
</ul>
</li>
<li><strong>路由选择算法</strong>
<ul>
<li>对于任何给定目的地前缀，进入BGP的路由选择算法的输入是到某前缀的所有路由的集合，该前缀是已被路由器学习和接受的
<ul>
<li>如果仅有一条路由，BGP则显然选择该路由</li>
<li>如果到相同的前缀有两条或多条路由，则顺序调用消除规则直到余一条路由
<ul>
<li>路由被指派一个本地偏好值作为其属性之一</li>
<li>从余下的路由中，将选择具有最短AS-PATH的路由</li>
<li>从余下的路由中使用热土豆路由选择</li>
<li>若还剩余多条路由，使用BGP标识符选择路由</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="544-ip任播"><a class="markdownIt-Anchor" href="#544-ip任播"></a> 5.4.4 IP任播</h3>
<ul>
<li>BGP还被用于实现IP任播服务，该服务通常用在DNS中</li>
</ul>
</div><div class="story post-story"><h2 id="55-sdn控制平面"><a class="markdownIt-Anchor" href="#55-sdn控制平面"></a> 5.5 SDN控制平面</h2>
<ul>
<li>SDN体系结构的4个关键特征
<ul>
<li>基于流的转发</li>
<li>数据平面与控制平面分离</li>
<li>网络控制功能</li>
<li>可编程的网络</li>
</ul>
</li>
<li>SDN控制器的功能大体分为3个层次
<ul>
<li>通信层:SDN控制器和受控网络设备之间的通信</li>
<li>网络范围状态管理层</li>
<li>对于网络控制应用程序层的接口</li>
</ul>
</li>
<li>OpenFlow协议运行在TCP之上，使用6653的默认端口号</li>
</ul>
<hr />
<h1 id="6-链路层和局域网"><a class="markdownIt-Anchor" href="#6-链路层和局域网"></a> 6 链路层和局域网</h1>
</div><div class="story post-story"><h2 id="61-链路层概述"><a class="markdownIt-Anchor" href="#61-链路层概述"></a> 6.1 链路层概述</h2>
<ul>
<li>将运行链路层协议的任何设备称为<strong>节点</strong></li>
<li>沿通信路径相邻节点的通信信道称为<strong>链路</strong>
<ul>
<li>为了将一个数据报从源主机传输到目的主机，数据报必须通过沿端到端路径上的各段链路传输</li>
<li>在通过特定的链路时，传输节点将数据报封装在链路层帧中，并将该帧传送到链路中</li>
</ul>
</li>
</ul>
<h3 id="611-链路层提供的服务"><a class="markdownIt-Anchor" href="#611-链路层提供的服务"></a> 6.1.1 链路层提供的服务</h3>
<ul>
<li>尽管任一链路层的基本服务都是将数据报通过单一通信链路从一个节点移动到相邻节点，但所提供的服务细节能够随着链路层协议的不同而变化</li>
<li>链路层提供的服务
<ul>
<li>成帧</li>
<li>链路接入
<ul>
<li>**媒体控制访问(MAC)**协议规定了帧在链路上传输的规则</li>
</ul>
</li>
<li>可靠交付</li>
<li>差错检测和纠正</li>
</ul>
</li>
</ul>
<h3 id="612-链路层在何处出现"><a class="markdownIt-Anchor" href="#612-链路层在何处出现"></a> 6.1.2 链路层在何处出现</h3>
<ul>
<li>链路层的主体部分是在网络适配器中实现的，网络适配器有时也称为网络接口卡
<ul>
<li>位于网络适配器核心的是链路层控制器，该控制器通常是一个实现了许多链路层服务的专用芯片</li>
<li>在发送端，控制器取得了由协议栈较高层生成并存储在主机内存中的数据报，在链路层帧中封装该数据报，然后遵循链路接入协议将该帧传进通信链路中</li>
<li>在接收端，控制器接受了整个帧，抽取出网络层数据报</li>
<li>如果链路层执行差错检测，则需要发送控制器在该帧的首部设置差错检测比特，由接收控制器执行差错检测</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="62-差错检测和纠正计数"><a class="markdownIt-Anchor" href="#62-差错检测和纠正计数"></a> 6.2 差错检测和纠正计数</h2>
<ul>
<li><strong>比特级差错检测和纠正</strong></li>
<li>奇偶校验，检测和方法和循环冗余检测</li>
</ul>
<h3 id="621-奇偶校验"><a class="markdownIt-Anchor" href="#621-奇偶校验"></a> 6.2.1 奇偶校验</h3>
<ul>
<li><strong>单个奇偶校验位</strong>
<ul>
<li>在偶校验方案中，发送方只需包含一个附加的比特，选择它的值，使得这d+1比特中1的总数是偶数</li>
</ul>
</li>
<li><strong>二维奇偶校验方案</strong>
<ul>
<li>D中的d个比特被划分为i行j列。对每行和每列计算奇偶值。产生的i+j+1奇偶比特构成链路层帧的差错检测比特</li>
<li>包含比特值改变的列和行的校验值都将会出现差错</li>
<li>接收方不仅可以检测到出现了单个比特差错的事实，而且能利用差错的索引来实际识别发生差错的比特并纠正</li>
</ul>
</li>
</ul>
<h3 id="622-检验和方法"><a class="markdownIt-Anchor" href="#622-检验和方法"></a> 6.2.2 检验和方法</h3>
<ul>
<li>将k比特整数加起来，并且用得到的和作为差错检测比特
<ul>
<li>接收方通过对接收的数据的和取反码，并且检测其结果是否全1比特来检测检验和</li>
</ul>
</li>
<li><mark>为什么运输层使用检验和而链路层使用CRC</mark>
<ul>
<li>运输层通常是在主机中作为用户操作系统的一部分用软件实现的</li>
<li>运输层差错检测用软件实现，采用简单而快速如检验和方案是重要的</li>
<li>链路层的差错检测在适配器中用专用的硬件实现，能够快速执行更复杂的CRC操作</li>
</ul>
</li>
</ul>
<h3 id="623-循环冗余检测"><a class="markdownIt-Anchor" href="#623-循环冗余检测"></a> 6.2.3 循环冗余检测</h3>
<ul>
<li>基于<strong>循环冗余检测(CRC)编码</strong>,也称为多项式编码
<ul>
<li>该编码能够将要发送的比特串看作系数是0和1的一个多项式，对比特串的操作被解释为多项式算术</li>
</ul>
</li>
<li>考虑d比特的数据D，发送节点要将它发送给接收节点
<ul>
<li>发送方和接收方首先必须协商一个r+1比特模式，称为生成多项式</li>
<li>要求G的最高有效位的比特(最左边)是1</li>
</ul>
</li>
<li>CRC编码的关键思想
<ul>
<li>对于一个给定的数据段D，发送方要选择r个附加比特R，并将它们附加到D上，使得得到的d+r比特模式用模2算数恰好能被G整除</li>
<li>进行差错检测的过程:接收方用G去除接收到的d+r比特。如果余数非零，则出现了差错；否则认为数据正确而被接收</li>
</ul>
</li>
<li>CRC计算采用模2运算，在加法中不进位，在减法中不借位
<ul>
<li><mark>等价与按位异或操作</mark></li>
</ul>
</li>
<li>求R公式<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>×</mo><msup><mn>2</mn><mi>r</mi></msup><mi>X</mi><mi>O</mi><mi>R</mi><mi>R</mi><mo>=</mo><mi>n</mi><mi>G</mi><mo>⇒</mo><mi>R</mi><mo>=</mo><mi>r</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi><mfrac><mrow><mi>D</mi><mo>×</mo><msup><mn>2</mn><mi>r</mi></msup></mrow><mi>G</mi></mfrac><mo separator="true">,</mo><mi>r</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi><mtext>为取余数</mtext></mrow><annotation encoding="application/x-tex">D \times 2^r XOR R = nG \Rightarrow R=remainder\frac{D \times 2^r}{G},remainder为取余数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.25598em;vertical-align:-0.345em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.91098em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">余</span><span class="mord cjk_fallback">数</span></span></span></span></li>
</ul>
</div><div class="story post-story"><h2 id="63-多路访问链路和协议"><a class="markdownIt-Anchor" href="#63-多路访问链路和协议"></a> 6.3 多路访问链路和协议</h2>
<ul>
<li>两种类型的网络链路
<ul>
<li><strong>点对点链路</strong>:由链路一端的单个发送方和链路另一端的单个接收方组成</li>
<li><strong>广播链路</strong>:能让多个发送和接收节点都连接相同的，单一的共享的广播信道上</li>
</ul>
</li>
<li>所有的节点都能够传输帧，所以多个节点可能会同时传输帧
<ul>
<li>发生这种情况时，所有节点同时接到多个帧</li>
<li>传输的帧在所有的接收方处发生碰撞</li>
<li>碰撞发生时，没有一个接收节点能够有效地获得任何传输的帧</li>
</ul>
</li>
<li>多路访问协议划分为3种类型:信道划分协议,随机接入协议和轮流协议</li>
</ul>
<h3 id="631-信道划分协议"><a class="markdownIt-Anchor" href="#631-信道划分协议"></a> 6.3.1 信道划分协议</h3>
<ul>
<li>时分多路复用(TDM)</li>
<li>频分多路复用(FDM)</li>
<li>码分多址(CDMA)</li>
</ul>
<h3 id="632-随机接入协议"><a class="markdownIt-Anchor" href="#632-随机接入协议"></a> 6.3.2 随机接入协议</h3>
<ul>
<li>时隙ALOHA</li>
<li>ALOHA</li>
<li>载波侦听多路访问(CSMA)</li>
<li>具有碰撞检测的载波侦听多路访问(CSMA/CD)</li>
</ul>
<h3 id="633-轮流协议"><a class="markdownIt-Anchor" href="#633-轮流协议"></a> 6.3.3 轮流协议</h3>
<ul>
<li>两种轮流协议
<ul>
<li>轮询协议
<ul>
<li>要求节点之一被指定为主节点，主节点以循环的方式轮询每个节点</li>
<li>主节点首先向节点1发送一个报文，告诉它能够传输帧的最多数量</li>
<li>在节点1传输率某些帧后，主节点告诉节点2能够传输的帧的最多数量</li>
</ul>
</li>
<li>轮询协议消除了碰撞和空时隙，提高了效率
<ul>
<li>但引入轮询时延</li>
<li>若主节点有故障，整个信道变得不可操作</li>
</ul>
</li>
<li>令牌传输协议
<ul>
<li>没有主节点，一个称为令牌的小的特殊帧在节点之间以某种固定的次序进行交换</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="story post-story"><h2 id="64-交换因特网"><a class="markdownIt-Anchor" href="#64-交换因特网"></a> 6.4 交换因特网</h2>
<h3 id="641-链路层寻址和arp"><a class="markdownIt-Anchor" href="#641-链路层寻址和arp"></a> 6.4.1 链路层寻址和ARP</h3>
<ul>
<li>MAC地址
<ul>
<li>并不是主机或路由器具有链路层地址，而是它们的适配器具有链路层地址</li>
<li>链路层交换机的任务是在主机与路由器之间承载数据报</li>
<li>主机或路由器不必明确地将帧寻址到其间的交换机</li>
<li>链路层地址称为<strong>LAN地址</strong>，<strong>物理地址</strong>，<strong>MAC地址</strong>
<ul>
<li>对于大多数局域网(包括以太网和802.11无线局域网)而言，MAC地址长度为6字节，共有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup><mn>8</mn></mrow><annotation encoding="application/x-tex">2^48</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord">8</span></span></span></span>个MAC地址</li>
<li>没有两块适配器具有相同的地址</li>
<li>分配地址的方式:固定MAC地址的前24比特，然后公司自己分配后24个比特</li>
</ul>
</li>
</ul>
</li>
<li>当某适配器要向某些目的适配器发送一个帧时，发送适配器将目的适配器的MAC地址插入到该帧中，并且将该帧发送到局域网中
<ul>
<li>当适配器接收到一个帧时，将检查该帧中的目的MAC地址是否与自己的MAC地址匹配</li>
<li>若匹配，该适配将提取封装的数据报，并将其沿协议栈向上传递</li>
<li>若不匹配，适配器丢弃该帧</li>
<li><mark>若需要让局域网上所有其他适配器接收并处理打算发送的帧，发送适配器在该帧的目的地址字段中插入一个特殊的MAC广播地址(FF-FF-FF-FF-FF-FF)</mark></li>
</ul>
</li>
<li>保持各层独立
<ul>
<li>局域网是为任意网络层协议而设计的，而不只是用于IP和局域网</li>
<li>若适配器被指派IP地址而不是中性的MAC地址，则适配器将不能够方便地支持其他网络层协议</li>
</ul>
</li>
<li><strong>地址解析协议(ARP)</strong>:存在网络层地址和链路层地址，需要在它们之间进行转换
<ul>
<li>发送主机使用ARP确认IP地址的目的主机的MAC地址</li>
<li>在发送主机中的ARP模块将取在相同局域网上的任何IP地址作为输入，然后返回相应的MAC地址</li>
<li>ARP将一个IP地址解析为一个MAC地址，和DNS类似，DNS将主机名解析为IP地址
<ul>
<li>每台主机或路由器在其内存中具有一个ARP表，包含IP地址到MAC地址的映射关系，并包含一个寿命值(TTL)值，指示了从表中删除每个映射的时间</li>
</ul>
</li>
</ul>
</li>
<li>ARP解析的过程
<ul>
<li>首先，发送方构造一个称为ARP分组的特殊分组</li>
<li>一个ARP分组有几个字段，包括发送和接收IP地址和MAC地址</li>
<li>ARP查询分组和响应分组都具有相同的格式
<ul>
<li>查询分组的目的是询问子网上所有其他主机和路由器，以确定对于要解析的IP地址的MAC地址</li>
</ul>
</li>
<li>主机向适配器传递一个ARP查询分组，并且指示适配器应该用MAC广播地址(FF-FF-FF-FF-FF-FF)来发送这个分组</li>
<li>适配器在链路层帧中封装这个ARP分组，用广播地址作为帧的目的地址，并将该帧传输进子网中</li>
<li><mark>有趣的事情:查询ARP报文是在广播帧中发送的，响应ARP报文在一个标准帧中发送</mark></li>
</ul>
</li>
<li>一个ARP分组封装在链路层帧中，因而在体系结构上位于链路层之上
<ul>
<li>一个ARP分组具有包含链路层地址的字段，因而可认为是链路层协议，但也包含网络层地址，因而也可以认为是网络层协议</li>
</ul>
</li>
<li><strong>发送数据报到子网之外</strong>
<ul>
<li>对于帧来说，MAC地址是路由器接口的适配器地址</li>
<li>在子网上的路由器适配器看到该链路层帧是向它寻址的，因此把帧传递给了路由器的网络层</li>
</ul>
</li>
</ul>
<h3 id="642-以太网"><a class="markdownIt-Anchor" href="#642-以太网"></a> 6.4.2 以太网</h3>
<ul>
<li>在安装中，主机(和路由器)直接用双绞对铜线与一台集线器相连
<ul>
<li><strong>集线器</strong>是一种屋里层设备，作用于各个比特而不是作用与帧。当表示一个0或一个1的比特到达一个接口时，集线器只是重新生成这个比特，将其能量强度放大，并将该比特向其他所有接口传输出去</li>
</ul>
</li>
<li>以太网帧结构
<ul>
<li>考虑从一台主机向另一台主机发送一个IP数据报，且这两台主机在相同的以太局域网上。(尽管以太网帧的负载是一个IP数据报，但我们注意到以太网帧也能够承载其他网络层分组)</li>
<li>设发送适配器A的MAC地址是AA-AA-AA-AA-AA-AA，接收适配器B的MAC地址是BB-BB-BB-BB-BB-BB。发送适配器在一个以太网帧中封装了一个IP数据报，并把该帧传递到物理层。接收适配器从物理层收到这个帧，提取出IP数据报，并将该IP数据报传递给网络层</li>
<li>6个字段
<ul>
<li>数据字段(46-1500字节),承载IP数据报，以太网的最大传输单元(MTU)是1500字节，数据字段的最小长度是46字节</li>
<li>目的地址(6字节),包含目的适配器的MAC地址
<ul>
<li>当适配器B收到一个以太网帧，该帧的目的地址无论是BB-BB-BB-BB-BB-BB，还是MAC广播地址，都将该帧的数据字段的内容传递给网络层;若它收到了具有任何其他MAC地址的帧，则丢弃</li>
</ul>
</li>
<li>源地址(6字节),包含了传输该帧到局域网上的适配器上的MAC地址</li>
<li>类型字段(2字节)</li>
<li>CRC(4字节),循环冗余检测字段的目的是使得接收适配器检测帧中是否引入了差错</li>
<li>前同步码(8字节)
<ul>
<li>以太网帧以一个8字节的前同步码字段开始</li>
<li>该前同步码的前7个字节都是10101010，最后一个字节是10101011</li>
<li>前7个字节用于唤醒接收适配器，并将其时钟和发送方的时钟同步
<ul>
<li>为什么时钟不同步?适配器A的目的是根据以太网类型的不同，分别以10Mbps,100Mbps,1Gbps的速率传输帧</li>
</ul>
</li>
<li>适配器只需通过锁定前同步码的前7字节的比特，就能锁定适配器的时钟</li>
<li>前同步码的第8个字节的最后两个比特警告适配器有重要的内容到达</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><mark>所有的以太网计数都向网络层提供无连接，不可靠服务</mark></li>
<li>以太网技术
<ul>
<li>物理媒介仅承载以太网流量</li>
<li>所有的802.3标准都适用于基带以太网</li>
<li>通过使用转发器能够得到更长的运行距离，而转发器是一种物理层设备，能在输入端接收信号并在输出端再生该信号</li>
</ul>
</li>
<li>吉比特以太网为IEEE802.3z,完成的工作
<ul>
<li>使用标准以太网帧结构，并且向后兼容10BASE-T与100BASE-T技术</li>
<li>允许点对点链路以及共享的广播信道</li>
<li>使用CSMA/CD来共享广播信道</li>
<li>对于点对点信道，允许在两个方向上以40Gbps全双工操作</li>
</ul>
</li>
</ul>
<h3 id="643-链路层交换机"><a class="markdownIt-Anchor" href="#643-链路层交换机"></a> 6.4.3 链路层交换机</h3>
<ul>
<li>交换机的任务是接收入链路层帧并将它们转发到出链路</li>
<li>交换机自身对子网中的主机和路由器是透明的
<ul>
<li>某主机/路由器向另一个主机/路由器寻址一个帧(而不是向交换机寻址该帧)，顺利地将该帧发送进局域网，并不知道某交换机将会接收该帧并将它转发到另一个节点</li>
</ul>
</li>
<li>交换机转发和过滤
<ul>
<li><strong>过滤</strong>是决定一个帧应该转发到某个接口还是应当将其丢弃的交换机功能</li>
<li><strong>转发</strong>是决定一个帧应该被导向哪个接口，并把该帧移动到那些接口的交换机功能</li>
<li><strong>交换机的过滤和转发借助于交换机表</strong>
<ul>
<li>该交换机表包含某局域网上某些主机和路由器的但不必是全部的表项。交换机表中的一个表项包含：一个MAC地址;通向该MAC地址的交换机接口;表项放置在表中的时间</li>
</ul>
</li>
</ul>
</li>
<li>交换机过滤和转发的3种可能的情况
<ul>
<li>表中没有对于DD-DD-DD-DD-DD-DD的表项。在这种情况下，交换机向除接口x外的所有接口前面的输出缓存转发该帧的副本。换言之，如果没有对于目的地址的表项，交换机广播该帧</li>
<li>表中有一个表项将DD-DD-DD-DD-DD-DD与接口x联系起来。在这种情况下，该帧从包括适配器DD-DD-DD-DD-DD-DD的局域网网段到来。无须将该帧转发到任何其他接口，交换机通过丢弃该帧执行过滤功能即可</li>
<li>表中有一个表项将DD-DD-DD-DD-DD-DD与接口y≠x联系起来。在这种情况下，该帧需要被转发到与接口y相连的局域网网段。交换机通过将该帧放到接口y前面的输出缓存完成转发功能</li>
</ul>
</li>
<li><strong>自学习</strong>
<ul>
<li>交换机的表是自动，动态和自治地建立的，交换机是<strong>自学习的</strong>，是即插即用设备</li>
<li>能力的实现方式
<ul>
<li>交换机表初始为空</li>
<li>对于每个接口接收到的每个入帧，交换机在其表中存储
<ul>
<li>在该帧源地址字段中的MAC地址</li>
<li>该帧到达的接口</li>
<li>当前时间</li>
</ul>
</li>
<li>如果在一段时间(老化期)后，交换机没有接收到以该地址作为源地址的帧，就在表中删除这个地址</li>
</ul>
</li>
</ul>
</li>
<li>链路层交换机的性质
<ul>
<li>消除碰撞</li>
<li>异质的链路</li>
<li>管理</li>
</ul>
</li>
<li>交换机和路由器的比较
<ul>
<li>路由器是使用网络层地址转发分组的存储转发分组交换机</li>
<li>尽管交换机是一个存储转发分组交换机，而路由器是第三层的分组交换机，使用“匹配加动作”的现代交换机能够转发基于帧的目的MAC地址的第二层帧，也能转发使用数据报目的IP地址的第三层数据报</li>
</ul>
</li>
<li>交换机的优点
<ul>
<li>即插即用</li>
<li>具有相对高的分组过滤和转发速率</li>
<li>处理高至第二层的帧，而路由器必须处理高至第三层的数据报</li>
<li>交换网络的活跃拓扑限制为一棵生成树</li>
<li>交换机对于广播风暴并不提供给任何保护措施</li>
</ul>
</li>
<li>网络寻址通常是分层次的，即使当网络种存在冗余路径时，分组通常也不会通过路由器循环</li>
</ul>
<h3 id="644-虚拟局域网"><a class="markdownIt-Anchor" href="#644-虚拟局域网"></a> 6.4.4 虚拟局域网</h3>
<ul>
<li>使用支持虚拟局域网(VLAN)处理的难题
<ul>
<li>缺乏流量隔离</li>
<li>交换机的无效使用</li>
<li>管理用户</li>
</ul>
</li>
</ul>

</div>
  </div>
  
  
    
    <div class='footer'>
       <!-- 参考资料、相关资料等 -->
      
       <!-- 相关文章 -->
      
      <!-- 版权声明组件 -->
      
      <!-- 打赏组件 -->
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateModified" datetime="2023-04-09T21:39:29+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2023年4月9日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Basic/" rel="nofollow"><i class="fa-solid fa-hashtag fa-fw" aria-hidden="true"></i><p>Basic</p></a></div>
  <span hidden itemprop="keywords">Basic</span>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/&title=计算机网络 - CodingStudio&summary= 引言

《计算机网络|自顶向下方法|第七版》学习笔记
"
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/&title=计算机网络 - CodingStudio&summary= 引言

《计算机网络|自顶向下方法|第七版》学习笔记
"
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://service.weibo.com/share/share.php?url=http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/&title=计算机网络 - CodingStudio&summary= 引言

《计算机网络|自顶向下方法|第七版》学习笔记
"
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
    
      
    
  </div>
</div>



        
      
    </div>
    <!-- Custom Files bottomMeta begin -->
    
    <!-- Custom Files bottomMeta end -->
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/2022/03/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/C++Primer/'>
          <p class='title'><i class="fa-solid fa-chevron-left" aria-hidden="true"></i>C++Primer</p>
          <p class='content'> 引言

C++ Primer的学习笔记


 1 开始
 1.2 初始输入输出

iostream库为IO库,其中包含两个基本类型istream和ostream,分别表示输入流和输出流

一个...</p>
        </a>
      
      
        <a class='next' href='/2022/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/'>
          <p class='title'>数据结构与算法<i class="fa-solid fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'> 引言

数据结构与算法的学习笔记
包含Leetcode刷题笔记



 1 数据结构绪论

数据：是描述客观事物的符号，是计算机中可以操作的对象，是能被计算机识别，并输入给计算机处理的符号集合...</p>
        </a>
      
    </div>
  
  <!-- Custom Files postEnd begin-->
  
  <!-- Custom Files postEnd end-->
</article>


  


  <article class="post white-box shadow floatable blur" id="comments">
    <span hidden>
      <meta itemprop="discussionUrl" content="/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html#comments">
    </span>
    <p ct><i class='fa-solid fa-comments'></i> 评论</p>
    

    <div id="layoutHelper-comments"></div>

  </article>






</div>
<aside id='l_side' itemscope itemtype="http://schema.org/WPSideBar">
  

  
    
    
      
    
  


<div class="widget-sticky pjax">

  
  


  <section class="widget toc-wrapper desktop mobile " id="toc-div" >
    
  <header>
    
      <i class="fa-solid fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text"> 引言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">2.</span> <span class="toc-text"> 1. 计算机网络和因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">2.1.</span> <span class="toc-text"> 1.1 什么是因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#111-%E5%85%B7%E4%BD%93%E6%9E%84%E6%88%90%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 1.1.1 具体构成描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#112-%E6%9C%8D%E5%8A%A1%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 1.1.2 服务描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#113-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 1.1.3 什么是协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98"><span class="toc-number">2.2.</span> <span class="toc-text"> 1.2 网络边缘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83"><span class="toc-number">2.3.</span> <span class="toc-text"> 1.3 网络核心</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#131-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 1.3.1 分组交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#132-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 1.3.2 电路交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#133-%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">2.3.3.</span> <span class="toc-text"> 1.3.3 网络的网络</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%BD%91%E4%B8%AD%E7%9A%84%E6%97%B6%E5%BB%B6%E4%B8%A2%E5%8C%85%E5%92%8C%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">2.4.</span> <span class="toc-text"> 1.4 分组交换网中的时延,丢包和吞吐量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#141-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%BD%91%E4%B8%AD%E7%9A%84%E6%97%B6%E5%BB%B6%E6%A6%82%E5%BF%B5"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 1.4.1 分组交换网中的时延概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#142-%E6%8E%92%E9%98%9F%E6%97%B6%E5%BB%B6%E5%92%8C%E4%B8%A2%E5%8C%85"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 1.4.2 排队时延和丢包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#143-%E7%AB%AF%E5%88%B0%E7%AB%AF%E6%97%B6%E5%BB%B6"><span class="toc-number">2.4.3.</span> <span class="toc-text"> 1.4.3 端到端时延</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#144-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">2.4.4.</span> <span class="toc-text"> 1.4.4 计算机网络中的吞吐量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%8D%8F%E8%AE%AE%E5%B1%82%E6%AC%A1%E5%8F%8A%E5%85%B6%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text"> 1.5 协议层次及其服务模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#151-%E5%88%86%E5%B1%82%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 1.5.1 分层的体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#152-%E5%B0%81%E8%A3%85"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 1.5.2 封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E9%9D%A2%E5%AF%B9%E6%94%BB%E5%87%BB%E7%BD%91%E7%BB%9C"><span class="toc-number">2.6.</span> <span class="toc-text"> 1.6 面对攻击网络</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text"> 2 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text"> 2.1 应用层协议原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#211-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 2.1.1 网络应用程序体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#212-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 2.1.2 进程通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#213-%E5%8F%AF%E4%BE%9B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 2.1.3 可供应用程序使用的运输服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#214-%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.1.4.</span> <span class="toc-text"> 2.1.4 因特网提供的运输服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#215-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.1.5.</span> <span class="toc-text"> 2.1.5 应用层协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-web%E5%92%8Chttp"><span class="toc-number">3.2.</span> <span class="toc-text"> 2.2 Web和HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#221-http%E6%A6%82%E5%86%B5"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 2.2.1 HTTP概况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#222-%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 2.2.2 非持续连接和持续连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#223-http%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 2.2.3 HTTP报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#224-%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92cookie"><span class="toc-number">3.2.4.</span> <span class="toc-text"> 2.2.4 用户与服务器的交互:cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#225-web%E7%BC%93%E5%AD%98"><span class="toc-number">3.2.5.</span> <span class="toc-text"> 2.2.5 Web缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#226-%E6%9D%A1%E4%BB%B6get%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.6.</span> <span class="toc-text"> 2.2.6 条件GET方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%AD%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text"> 2.3 因特网中的电子邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-dns%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.4.</span> <span class="toc-text"> 2.4 DNS:因特网的目录服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#241-dns%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 2.4.1 DNS提供的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#242-dns%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 2.4.2 DNS工作机理概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#243-dns%E8%AE%B0%E5%BD%95%E5%92%8C%E6%8A%A5%E6%96%87"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 2.4.3 DNS记录和报文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-p2p%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91"><span class="toc-number">3.5.</span> <span class="toc-text"> 2.5 P2P文件分发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E8%A7%86%E9%A2%91%E6%B5%81%E5%92%8C%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91"><span class="toc-number">3.6.</span> <span class="toc-text"> 2.6 视频流和内容分发网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#262-http%E6%B5%81%E5%92%8Cdash"><span class="toc-number">3.6.1.</span> <span class="toc-text"> 2.6.2 HTTP流和DASH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#263-%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91"><span class="toc-number">3.6.2.</span> <span class="toc-text"> 2.6.3 内容分发网</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B%E7%94%9F%E6%88%90%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8"><span class="toc-number">3.7.</span> <span class="toc-text"> 2.7 套接字编程:生成网络应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text"> 3 运输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E6%A6%82%E8%BF%B0%E5%92%8C%E8%BF%90%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text"> 3.1 概述和运输层服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#311-%E8%BF%90%E8%BE%93%E5%B1%82%E5%92%8C%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 3.1.1 运输层和网络层的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#312-%E5%9B%A0%E7%89%B9%E7%BD%91%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 3.1.2 因特网运输层概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%A4%9A%E8%B7%AF%E5%88%86%E8%A7%A3"><span class="toc-number">4.2.</span> <span class="toc-text"> 3.2 多路复用与多路分解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E6%97%A0%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1udp"><span class="toc-number">4.3.</span> <span class="toc-text"> 3.3 无连接服务:UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#332-udp%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">4.3.1.</span> <span class="toc-text"> 3.3.2 UDP检验和</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86"><span class="toc-number">4.4.</span> <span class="toc-text"> 3.4 可靠数据传输原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#341-%E6%9E%84%E9%80%A0%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.4.1.</span> <span class="toc-text"> 3.4.1 构造可靠数据传输协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#342-%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.4.2.</span> <span class="toc-text"> 3.4.2 流水线可靠数据传输协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#343-%E5%9B%9E%E9%80%80n%E6%AD%A5"><span class="toc-number">4.4.3.</span> <span class="toc-text"> 3.4.3 回退N步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#344-%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0"><span class="toc-number">4.4.4.</span> <span class="toc-text"> 3.4.4 选择重传</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%BF%90%E8%BE%93tcp"><span class="toc-number">4.5.</span> <span class="toc-text"> 3.5 面向连接的运输:TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#351-tcp%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.5.1.</span> <span class="toc-text"> 3.5.1 TCP连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#352-tcp%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">4.5.2.</span> <span class="toc-text"> 3.5.2 TCP报文段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#353-%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4%E7%9A%84%E4%BC%B0%E8%AE%A1%E4%B8%8E%E8%B6%85%E6%97%B6"><span class="toc-number">4.5.3.</span> <span class="toc-text"> 3.5.3 往返时间的估计与超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#354-%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">4.5.4.</span> <span class="toc-text"> 3.5.4 可靠数据传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#355-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">4.5.5.</span> <span class="toc-text"> 3.5.5 流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#356-tcp%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">4.5.6.</span> <span class="toc-text"> 3.5.6 TCP连接管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">4.6.</span> <span class="toc-text"> 3.6 拥塞控制机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#361-%E6%8B%A5%E5%A1%9E%E5%8E%9F%E5%9B%A0%E4%B8%8E%E4%BB%A3%E4%BB%B7"><span class="toc-number">4.6.1.</span> <span class="toc-text"> 3.6.1 拥塞原因与代价</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#362-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">4.6.2.</span> <span class="toc-text"> 3.6.2 拥塞控制方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#37-tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">4.7.</span> <span class="toc-text"> 3.7 TCP拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#371-%E5%85%AC%E5%B9%B3%E6%80%A7"><span class="toc-number">4.7.1.</span> <span class="toc-text"> 3.7.1 公平性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="toc-number">5.</span> <span class="toc-text"> 4 网络层:数据平面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text"> 4.1 网络层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#411-%E8%BD%AC%E5%8F%91%E5%92%8C%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E5%92%8C%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">5.1.1.</span> <span class="toc-text"> 4.1.1 转发和路由选择:数据平面和控制平面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#412-%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 4.1.2 网络服务模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text"> 4.2 路由器工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#421-%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86%E5%92%8C%E5%9F%BA%E4%BA%8E%E7%9B%AE%E7%9A%84%E5%9C%B0%E8%BD%AC%E5%8F%91"><span class="toc-number">5.2.1.</span> <span class="toc-text"> 4.2.1 输入端口处理和基于目的地转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#422-%E4%BA%A4%E6%8D%A2"><span class="toc-number">5.2.2.</span> <span class="toc-text"> 4.2.2 交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#424-%E4%BD%95%E6%97%B6%E5%87%BA%E7%8E%B0%E6%8E%92%E9%98%9F"><span class="toc-number">5.2.3.</span> <span class="toc-text"> 4.2.4 何时出现排队</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#425-%E5%88%86%E7%BB%84%E8%B0%83%E5%BA%A6"><span class="toc-number">5.2.4.</span> <span class="toc-text"> 4.2.5 分组调度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AEipv4%E5%AF%BB%E5%9D%80ipv6%E5%8F%8A%E5%85%B6%E4%BB%96"><span class="toc-number">5.3.</span> <span class="toc-text"> 4.3 网络协议:IPv4,寻址,IPV6及其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#431-ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.3.1.</span> <span class="toc-text"> 4.3.1 IPv4数据报格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#432-ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="toc-number">5.3.2.</span> <span class="toc-text"> 4.3.2 IPv4数据报分片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#433-ipv4%E7%BC%96%E5%9D%80"><span class="toc-number">5.3.3.</span> <span class="toc-text"> 4.3.3 IPv4编址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#434-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2"><span class="toc-number">5.3.4.</span> <span class="toc-text"> 4.3.4 网络地址转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#435-ipv6"><span class="toc-number">5.3.5.</span> <span class="toc-text"> 4.3.5 IPv6</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#44-%E9%80%9A%E7%94%A8%E8%BD%AC%E5%8F%91%E5%92%8Csdn"><span class="toc-number">5.4.</span> <span class="toc-text"> 4.4 通用转发和SDN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#441-%E5%8C%B9%E9%85%8D"><span class="toc-number">5.4.1.</span> <span class="toc-text"> 4.4.1 匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#442-%E5%8A%A8%E4%BD%9C"><span class="toc-number">5.4.2.</span> <span class="toc-text"> 4.4.2 动作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">6.</span> <span class="toc-text"> 5 网络层:控制平面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#52-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">6.1.</span> <span class="toc-text"> 5.2 路由选择算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#521-%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">6.1.1.</span> <span class="toc-text"> 5.2.1 链路状态路由选择算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#522-%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">6.1.2.</span> <span class="toc-text"> 5.2.2 距离向量路由选择算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53-%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%AD%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9ospf"><span class="toc-number">6.2.</span> <span class="toc-text"> 5.3 因特网中自治系统内部的路由选择:OSPF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#54-isp%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9bgp"><span class="toc-number">6.3.</span> <span class="toc-text"> 5.4 ISP之间的路由选择:BGP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#541-bgp%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">6.3.1.</span> <span class="toc-text"> 5.4.1 BGP的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#542-%E9%80%9A%E8%BF%87bgp%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">6.3.2.</span> <span class="toc-text"> 5.4.2 通过BGP路由信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#543-%E7%A1%AE%E8%AE%A4%E6%9C%80%E5%A5%BD%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-number">6.3.3.</span> <span class="toc-text"> 5.4.3 确认最好的路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#544-ip%E4%BB%BB%E6%92%AD"><span class="toc-number">6.3.4.</span> <span class="toc-text"> 5.4.4 IP任播</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#55-sdn%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">6.4.</span> <span class="toc-text"> 5.5 SDN控制平面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">7.</span> <span class="toc-text"> 6 链路层和局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#61-%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">7.1.</span> <span class="toc-text"> 6.1 链路层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#611-%E9%93%BE%E8%B7%AF%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">7.1.1.</span> <span class="toc-text"> 6.1.1 链路层提供的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#612-%E9%93%BE%E8%B7%AF%E5%B1%82%E5%9C%A8%E4%BD%95%E5%A4%84%E5%87%BA%E7%8E%B0"><span class="toc-number">7.1.2.</span> <span class="toc-text"> 6.1.2 链路层在何处出现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B%E5%92%8C%E7%BA%A0%E6%AD%A3%E8%AE%A1%E6%95%B0"><span class="toc-number">7.2.</span> <span class="toc-text"> 6.2 差错检测和纠正计数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#621-%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">7.2.1.</span> <span class="toc-text"> 6.2.1 奇偶校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#622-%E6%A3%80%E9%AA%8C%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">7.2.2.</span> <span class="toc-text"> 6.2.2 检验和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#623-%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E6%B5%8B"><span class="toc-number">7.2.3.</span> <span class="toc-text"> 6.2.3 循环冗余检测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#63-%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.3.</span> <span class="toc-text"> 6.3 多路访问链路和协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#631-%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.3.1.</span> <span class="toc-text"> 6.3.1 信道划分协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#632-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.3.2.</span> <span class="toc-text"> 6.3.2 随机接入协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#633-%E8%BD%AE%E6%B5%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.3.3.</span> <span class="toc-text"> 6.3.3 轮流协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#64-%E4%BA%A4%E6%8D%A2%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">7.4.</span> <span class="toc-text"> 6.4 交换因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#641-%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AF%BB%E5%9D%80%E5%92%8Carp"><span class="toc-number">7.4.1.</span> <span class="toc-text"> 6.4.1 链路层寻址和ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#642-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">7.4.2.</span> <span class="toc-text"> 6.4.2 以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#643-%E9%93%BE%E8%B7%AF%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">7.4.3.</span> <span class="toc-text"> 6.4.3 链路层交换机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#644-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">7.4.4.</span> <span class="toc-text"> 6.4.4 虚拟局域网</span></a></li></ol></li></ol></li></ol>
    </div>
  </section>

  

</div>


<!-- 没有 pjax 占位会报错 万恶的 pjax -->

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <!-- Custom Files side begin -->
  
  <!-- Custom Files side end -->
</aside>



          <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->

<pjax>
<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  pdata.commentConfig={};
  //  see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs
  
    // header
    var l_header=document.getElementById("l_header");
    
    l_header.classList.remove("show");
    
    
      // cover
      var cover_wrapper=document.querySelector('#l_cover .cover-wrapper');
      var scroll_down=document.getElementById('scroll-down');
      cover_wrapper.id="half";
      cover_wrapper.style.display="";
      scroll_down.style.display="none";
    
  
</script>
</pjax>
        </div>
        
  
  <footer class="footer clearfix"  itemscope itemtype="http://schema.org/WPFooter">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.4'
      loop='all'
      order='random'
      fixed='false'
      list-max-height='320px'
      server='netease'
      type='playlist'
      id='5062959861'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper" itemprop="about" itemscope itemtype="http://schema.org/Thing">
          
            
              <a href="mailto:jay1060950003@gmail.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer" itemprop="url">
                
              </a>
            
          
            
              <a href="https://github.com/jay1060950003/"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer" itemprop="url">
                
              </a>
            
          
        </div>
      
    
      
        <p>本站使用 <a target="_blank" rel="noopener" href="https://github.com/volantis-x/hexo-theme-volantis/#5.8.0">Volantis</a> 作为主题，您可以在 GitHub 找到<a target="_blank" rel="noopener" href="https://github.com/volantis-x/volantis-docs">本站源码</a>。</p>

      
    
      
        <div class='copyright'>
        <p>Copyright © Since 2017</p>

        </div>
      
    
    <!-- Custom Files footer begin-->
    
    <!-- Custom Files footer end-->
  </footer>


        <a id="s-top" class="fa-solid fa-arrow-up fa-fw" href="/" onclick="return false;" title="top"></a>
      </div>
    </div>
    <div>
      <script>
  /******************** volantis.dom ********************************/
  // 页面选择器 将dom对象缓存起来 see: /source/js/app.js etc.
  volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // 页面主体
  volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // 向上
  volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // 整个导航栏
  volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l_cover .cover-wrapper')); // 1个
  volantis.dom.switcher = volantis.dom.$(document.querySelector('#l_header .switcher .s-search')); // 搜索按钮   移动端 1个
  volantis.dom.header = volantis.dom.$(document.getElementById('l_header')); // 移动端导航栏
  volantis.dom.search = volantis.dom.$(document.querySelector('#l_header .m_search')); // 搜索框 桌面端 移动端 1个
  volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l_header .m-phone .list-v')); //  手机端 子菜单 多个
</script>

<script>
  
  volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fortawesome/fontawesome-pro/css/all.min.css");
  
  
  
</script>

<!-- required -->


<!-- internal -->

<script src="/js/app.js"></script>





  













<div id="rightmenu-wrapper">
  <ul class="list-v rightmenu" id="rightmenu-content">
    
  <li class='navigation menuNavigation-Content'>


    <a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa-duotone fa-arrow-left PETERRIVE fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa-duotone fa-arrow-right PETERRIVE fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa-duotone fa-redo PETERRIVE fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" href="/"><i class="fa-duotone fa-home PETERRIVE fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)"><i class="fa-duotone fa-arrow-up PETERRIVE fa-fw"></i></a>


  </li>


    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyPaste" data-event="copyPaste" data-group="inputBox">
      <i class="fa-duotone PETERRIVE fa-paste fa-fw"></i>
      粘贴文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyAll" data-event="copyAll" data-group="inputBox">
      <i class="fa-duotone PETERRIVE fa-object-ungroup fa-fw"></i>
      全选文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyCut" data-event="copyCut" data-group="inputBox">
      <i class="fa-duotone PETERRIVE fa-cut fa-fw"></i>
      剪切文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyText" data-event="copyText" data-group="seletctText">
      <i class="fa-duotone PETERRIVE fa-copy fa-fw"></i>
      复制文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="searchWord" data-event="OpenSearch(__text__)" data-group="seletctText">
      <i class="fa-duotone PETERRIVE fa-search fa-fw"></i>
      站内搜索
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="bingSearch" data-event="window.open(`https://cn.bing.com/search?q=${__text__}`)" data-group="seletctText">
      <i class="fa-duotone PETERRIVE fa-search fa-fw"></i>
      必应搜索
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="openTab" data-event="window.open(__link__)" data-group="elementCheck">
      <i class="fa-duotone PETERRIVE fa-external-link-square-alt fa-fw"></i>
      新标签页打开
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyLink" data-event="copyLink" data-group="elementCheck">
      <i class="fa-duotone PETERRIVE fa-link fa-fw"></i>
      复制链接地址
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyImg" data-event="copyImg" data-group="elementImage">
      <i class="fa-duotone PETERRIVE fa-image fa-fw"></i>
      复制图片
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="googleImg" data-event="window.open(`https://www.google.com/searchbyimage?image_url=${__link__}`)" data-group="elementImage">
      <i class="fa-duotone PETERRIVE fa-images fa-fw"></i>
      谷歌识图
    </span>
  </li>



    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="darkMode" data-event="volantis.dark.toggle()" data-group="darkMode">
      <i class="fa-duotone fa-eclipse-alt WISTERIA fa-fw"></i>
      暗黑模式
    </span>
  </li>



    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="printMode" data-event="printMode" data-group="articlePage">
      <i class="fa-duotone fa-print TURQUOISE fa-fw"></i>
      打印页面
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="readMode" data-event="readMode" data-group="articlePage">
      <i class="fa-duotone fa-book-open EMERALD fa-fw"></i>
      阅读模式
    </span>
  </li>



    <hr class="menuLoad-Content" >


<div id="menuMusic">
  <li class='music name menuOption-Content'>
    <p class='nav music-title fix-cursor-default'></p>
  </li>
  <li class='music ctrl'>
    <a class='nav icon-only backward fix-cursor-default' href="/" onclick="return false;" title="backward">
      <i class='fa-duotone PETERRIVE fa-step-backward fa-fw'></i>
    </a>
    <a class='nav icon-only toggle fix-cursor-default' href="/" onclick="return false;" title="toggle">
      <i class='fa-duotone PETERRIVE fa-play fa-fw'></i>
    </a>
    <a class='nav icon-only forward fix-cursor-default' href="/" onclick="return false;" title="forward">
      <i class='fa-duotone PETERRIVE fa-step-forward fa-fw'></i>
    </a>
  </li>
  <li class='music volume'>
    <div class='nav volume'>
      <div class="aplayer-volume-bar-wrap">
        <div class="aplayer-volume-bar fix-cursor-pointer">
          <div class="aplayer-volume"></div>
          <i class='left fa-duotone PETERRIVE fa-volume-off fa-fw'></i>
          <i class='right fa-duotone PETERRIVE fa-volume-up fa-fw'></i>
        </div>
      </div>
    </div>
  </li>
</div>

  </ul>
</div>
<script src="/js/plugins/rightMenus.js"></script>
<script>
  const RightMenusFunction = {};
  














  //RightMenusFunction['copyPaste'] = (fun) => {fun()}





  //RightMenusFunction['copyAll'] = (fun) => {fun()}





  //RightMenusFunction['copyCut'] = (fun) => {fun()}





  //RightMenusFunction['copyText'] = (fun) => {fun()}





  RightMenusFunction['searchWord'] = (__text__) => {OpenSearch(__text__)}





  RightMenusFunction['bingSearch'] = (__text__) => {window.open(`https://cn.bing.com/search?q=${__text__}`)}





  RightMenusFunction['openTab'] = (__link__) => {window.open(__link__)}





  //RightMenusFunction['copyLink'] = (fun) => {fun()}





  //RightMenusFunction['copyImg'] = (fun) => {fun()}





  RightMenusFunction['googleImg'] = (__link__) => {window.open(`https://www.google.com/searchbyimage?image_url=${__link__}`)}







  RightMenusFunction['darkMode'] = () => {volantis.dark.toggle()}







  //RightMenusFunction['printMode'] = (fun) => {fun()}





  //RightMenusFunction['readMode'] = (fun) => {fun()}







</script>



<!-- rightmenu要在darkmode之前（ToggleButton） darkmode要在comments之前（volantis.dark.push）-->

  <script>
const rootElement = document.documentElement;
const darkModeStorageKey = "color-scheme";
const rootElementDarkModeAttributeName = "color-scheme";
const setLS = (k, v) => {
    localStorage.setItem(k, v);
};
const removeLS = (k) => {
    localStorage.removeItem(k);
};
const getLS = (k) => {
    return localStorage.getItem(k);
};
const getModeFromCSSMediaQuery = () => {
  return window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
};
const resetRootDarkModeAttributeAndLS = () => {
  rootElement.removeAttribute(rootElementDarkModeAttributeName);
  removeLS(darkModeStorageKey);
};
const validColorModeKeys = {
  dark: true,
  light: true,
};
const applyCustomDarkModeSettings = (mode) => {
  const currentSetting = mode || getLS(darkModeStorageKey);
  getCustomDarkMode();
  if (currentSetting === getModeFromCSSMediaQuery()) {
    resetRootDarkModeAttributeAndLS();
  } else if (validColorModeKeys[currentSetting]) {
    rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting);
  } else {
    resetRootDarkModeAttributeAndLS();
  }
};
const invertDarkModeObj = {
  dark: "light",
  light: "dark",
};
/**
 * get target mode
 */
 const getCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  if(currentSetting=="dark"){
    volantis.dark.mode="light";
  }else{
    volantis.dark.mode="dark";
  }
  // console.log(volantis.dark.mode)
};
const toggleCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  setLS(darkModeStorageKey, currentSetting);
  return currentSetting;
};
/**
 * 暗黑模式触发器
 */
volantis.dark.toggle=()=>{
  const mode = toggleCustomDarkMode();
  applyCustomDarkModeSettings(mode);
  // 使用 volantis.dark.push 方法传入volantis.dark.toggle回调函数 参见layout/_partial/scripts/global.ejs
  volantis.dark.method.toggle.start();
}
/**
 * bind event for toggle button
 */

function bindToggleButton() {
  var btn= document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn")
  btn.forEach(function (e) {
    volantis.dom.$(e).on('click',volantis.dark.toggle);
  })
}
applyCustomDarkModeSettings();
document.addEventListener("DOMContentLoaded", ()=>{
  volantis.requestAnimationFrame(bindToggleButton)
});
volantis.pjax.push(bindToggleButton);

const darkModelListeners={
  dark:(mediaQueryList )=>{
    if(mediaQueryList.matches){
      volantis.dark.mode = "dark";
    }
    volantis.dark.method.toggle.start();
  },
  light:(mediaQueryList)=>{
    if(mediaQueryList.matches){
      volantis.dark.mode = "light";
    }
    volantis.dark.method.toggle.start();
  }
}
window.matchMedia('(prefers-color-scheme: dark)').addListener(darkModelListeners.dark)
window.matchMedia('(prefers-color-scheme: light)').addListener(darkModelListeners.light)
</script>




<script>
  function loadIssuesJS() {
    
      const sites_api = document.getElementById('sites-api');
      if (sites_api != undefined && typeof SitesJS === 'undefined') {
        volantis.js("/js/plugins/tags/sites.js")
      }
    
    
      const friends_api = document.getElementById('friends-api');
      if (friends_api != undefined && typeof FriendsJS === 'undefined') {
        volantis.js("/js/plugins/tags/friends.js")
      }
    
    
      const contributors_api = document.getElementById('contributors-api');
      if (contributors_api != undefined && typeof ContributorsJS === 'undefined') {
        volantis.js("/js/plugins/tags/contributors.js")
      }
    
  };
  loadIssuesJS()
  volantis.pjax.push(()=>{
    loadIssuesJS();
  })

</script>




  <script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/vanilla-lazyload/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: ["#"],
	maxRPS: 6,
	hoverDelay: 0
  };
</script>
<script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/flying-pages/flying-pages.min.js"></script>





   <script type="text/javascript">
  function pjax_scrollrebeal() {
    ScrollReveal().reveal("#l_main .reveal", {
      distance: "32px",
      duration: "800",
      interval: "20",
      scale: "1",
      easing: "ease-out",
    });
  }
  function init_scrollrebeal() {
    if (typeof ScrollReveal == "undefined") {
      volantis.requestAnimationFrame(init_scrollrebeal);
    } else {
      pjax_scrollrebeal();
    }
  }
  volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/scrollreveal/dist/scrollreveal.min.js");
  document.addEventListener("DOMContentLoaded", init_scrollrebeal);
  volantis.pjax.push(
    pjax_scrollrebeal,
    "pjax_scrollrebeal",
    (setRequestAnimationFrame = false)
  );
</script>




  <script>
  volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/aplayer/dist/APlayer.min.css");
  (async () => {
    // APlayer 需要在  MetingJS 之前加载
    await volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/aplayer/dist/APlayer.min.js")
    await volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/meting/dist/Meting.min.js")
  
    // 右键 music 需要在 APlayer  MetingJS 之后加载
    await volantis.js('/js/plugins/aplayer.js')
  
  })();

  function SetAPlayerPlugin(){
    let Metings = document.querySelectorAll('meting-js');
    if (Metings.length === 0) {return;};
    if (Metings[0].aplayer && Metings[0].aplayer.on) {
      // improve the accessibility https://web.dev/button-name/
      document.querySelectorAll(".aplayer-icon-menu").forEach(e=>{
        e.setAttribute("aria-label","Aplayer Menu")
      })
      // message see: /layout/_plugins/message/script.ejs
      
        try {
          setTimeout(() => {
            Metings.forEach((item, index) => {
              const aplayerItem = item.aplayer; if(!aplayerItem) return;
              const rightAplayerCheck = 'true' === 'true'
                && item.meta.id === '5062959861';
              if(rightAplayerCheck && typeof RightMenuAplayer !="undefined") RightMenuAplayer.checkAPlayer();
              if(aplayerItem.events.events.play.every(item => {return item.name !== 'messagePlay'})) {
                aplayerItem.on('play', function messagePlay() {
                  let index = aplayerItem.list.index;
                  let title = aplayerItem.list.audios[index].title;
                  let artist = aplayerItem.list.audios[index].artist;
                  setTimeout(() => {
                    VolantisApp.message('音乐通知', title + ' - ' + artist, {
                      icon: 'fa-light fa-play light-blue',
                      transitionIn: 'flipInX',
                      transitionOut: 'flipOutX'
                    });
                  }, 100)
                });
              }
              if(aplayerItem.events.events.pause.every(item => {return item.name !== 'messagePause'})) {
                aplayerItem.on('pause', function messagePause() {
                  let index = aplayerItem.list.index;
                  let title = aplayerItem.list.audios[index].title;
                  let artist = aplayerItem.list.audios[index].artist;
                  setTimeout(() => {
                    // 歌曲播放结束也会触发 pause 事件，为了避免错误提示，等待一会儿
                    if(aplayerItem.paused) {
                      VolantisApp.message('音乐通知', title + ' - ' + artist, {
                        icon: 'fa-light fa-pause light-blue',
                        transitionIn: 'flipInX',
                        transitionOut: 'flipOutX'
                      });
                    }
                  }, 100)
                });
              }
            });
          }, 500)
        } catch (error) { console.error(error); }
      
    }else{
      volantis.requestAnimationFrame(SetAPlayerPlugin)
    }
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    SetAPlayerPlugin();
  });
  volantis.pjax.push(SetAPlayerPlugin);
</script>




      <script>
  volantis.layoutHelper("comments",`<div id="giscus_container"></div>`)

  volantis.giscus = {};

  function check_giscus() {
    if (volantis.dark.mode === "dark") {
      volantis.giscus.Theme = 'dark';
    } else {
      volantis.giscus.Theme = 'light';
    }

    return document.getElementById("giscus_container");
  }

  function pjax_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;
    let cfg = Object.assign({"theme":{"light":"light","dark":"dark"},"repo":"jay1060950003/comments","repo-id":"R_kgDOJfmU6A","category":"Announcements","category-id":"DIC_kwDOJfmU6M4CWTdE","mapping":"pathname","reactions-enabled":"1","emit-metadata":"0","lang":"zh-CN"},pdata.commentConfig)
    const script = document.createElement('script');
    script.setAttribute('src', 'https://giscus.app/client.js');
    Object.keys(cfg).forEach(k=>{
      if (k != "theme") {
        script.setAttribute('data-'+k, cfg[k]);
      }
    })
    script.setAttribute('data-theme', volantis.giscus.Theme);
    script.setAttribute('crossorigin', "anonymous");
    HEAD.appendChild(script);
  }

  function dark_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;

    const message = {
      setConfig: {
        theme: volantis.giscus.Theme
      }
    };
    const giscusIframe = document.querySelector('iframe.giscus-frame');
    giscusIframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }
  pjax_giscus();
  volantis.pjax.push(pjax_giscus);
  volantis.dark.push(dark_giscus);
</script>

    




  <script defer src="https://gcore.jsdelivr.net/gh/volantis-x/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js" data-pjax></script>


<!-- optional -->

  <script>
  const SearchServiceDataPathRoot = ("/" || "/").endsWith("/") ?
    "/" || "/" :
    "//" || "/";
  const SearchServiceDataPath = SearchServiceDataPathRoot + "content.json";

  function loadSearchScript() {
    // see: layout/_partial/scripts/_ctrl/cdnCtrl.ejs
    return volantis.js("/js/search/hexo.js");
  }

  function loadSearchService() {
    loadSearchScript();
    document.querySelectorAll(".input.u-search-input").forEach((e) => {
      e.removeEventListener("focus", loadSearchService, false);
    });

    document.querySelectorAll(".u-search-form").forEach((e) => {
      e.addEventListener("submit", (event) => {
        event.preventDefault();
      }, false);
    });
  }

  // 打开并搜索 字符串 s
  function OpenSearch(s) {
    if (typeof SearchService === 'undefined')
      loadSearchScript().then(() => {
        SearchService.setQueryText(s);
        SearchService.search();
      });
    else {
      SearchService.setQueryText(s);
      SearchService.search();
    }
  }

  // 访问含有 ?s=xxx  的链接时打开搜索 // 与搜索引擎 structured data 相关: /scripts/helpers/structured-data/lib/config.js
  if (window.location.search && /^\?s=/g.test(window.location.search)) {
    let queryText = decodeURI(window.location.search)
      .replace(/\ /g, "-")
      .replace(/^\?s=/g, "");
    OpenSearch(queryText);
  }

  // 搜索输入框获取焦点时加载搜索
  document.querySelectorAll(".input.u-search-input").forEach((e) => {
    e.addEventListener("focus", loadSearchService, false);
  });
</script>







  <script>



  function pjax_highlightjs_copyCode(){
    if (!(document.querySelector(".highlight .code pre") ||
      document.querySelector(".article pre code"))) {
      return;
    }
    VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")
  }
  volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
  volantis.pjax.push(pjax_highlightjs_copyCode)

</script>










  <script>
  let imgs = ["https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/019.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/035.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/046.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/051.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/003.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/002.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/054.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/005.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/025.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/034.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/006.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/012.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/056.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/052.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/004.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/016.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/038.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/033.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/039.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/042.webp","https://unpkg.com/volantis-static@0.0.1654736714924/media/wallpaper/minimalist/2020/001.webp"];
  let index = 0;
  let IntervalParallax = null;

  function parallax(){
    let ParallaxWindow = document.querySelector("#parallax-window");
    
    Parallax.window = ParallaxWindow;
    Parallax.options.fade = 1500;
    Parallax.cache = 1;
    next_parallax();
    Parallax.init();
    if (imgs.length>1) {
      IntervalParallax = setInterval(function () {
        next_parallax();
      }, '10000');
    }
  }

  function next_parallax() {
    if (typeof Parallax == "undefined") {
      return
    }
    
      if (!document.querySelector("#full")&&!document.querySelector("#half")) {
        return
      }
    
    if (imgs.length>=1) {
      Parallax.options.src = imgs[index % imgs.length];
      Parallax.start();
      index++;
      if (Parallax.cache) {
        fetch(imgs[index % imgs.length] +"?t=" + new Date().getTime());
        if (index == imgs.length) {
          Parallax.cache = 0;
        }
      }
    }
  }
  var runningOnBrowser = typeof window !== "undefined";
  var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
  if (!isBot) {
    volantis.js('/js/plugins/parallax.js').then(()=>{
      parallax()
    })
    volantis.pjax.send(()=>{
      clearInterval(IntervalParallax)
    },"clearIntervalParallax");
    volantis.pjax.push(parallax);
  }
</script>




  <script>
  function load_swiper() {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.css");
    volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.js").then(() => {
      pjax_swiper();
    });
  }

  load_swiper();

  function pjax_swiper() {
    volantis.swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 8,
      centeredSlides: true,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  }

  volantis.pjax.push(() => {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    if (typeof volantis.swiper === "undefined") {
      load_swiper();
    } else {
      pjax_swiper();
    }
  });
</script>


<!-- pjax 标签必须存在于所有页面 否则 pjax error -->
<pjax>

</pjax>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    let targets = []
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
        decodeURI(link.getAttribute("href")).replace("#", "")
      );
      targets.push(target)
      // 解除 a 标签 href 的 锚点定位, a 标签 href 的 锚点定位 会随机启用?? 产生错位???
      link.setAttribute("onclick","return false;")
      link.setAttribute("toc-action","toc-"+decodeURI(link.getAttribute("href")).replace("#", ""))
      link.setAttribute("href","/")
      // 配置 点击 触发新的锚点定位
      link.addEventListener("click", (event) => {
        event.preventDefault();
        // 这里的 addTop 是通过错位使得 toc 自动展开.
        volantis.scroll.to(target,{addTop: 5, observer:true})
        // Anchor id
        history.pushState(null, document.title, "#" + target.id);
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    // 方案一：
    volantis.activateNavIndex=0
    activateNavByIndex(navItems[volantis.activateNavIndex])
    volantis.scroll.push(()=>{
      if (targets[0].getBoundingClientRect().top >= 0) {
        volantis.activateNavIndex = 0
      }else if (targets[targets.length-1].getBoundingClientRect().top < 0) {
        volantis.activateNavIndex = targets.length-1
      } else {
        for (let index = 0; index < targets.length; index++) {
          const target0 = targets[index];
          const target1 = targets[(index+1)%targets.length];
          if (target0.getBoundingClientRect().top < 0&&target1.getBoundingClientRect().top >= 0) {
            volantis.activateNavIndex=index
            break;
          }
        }
      }
      activateNavByIndex(navItems[volantis.activateNavIndex])
    })

    // 方案二：
    // IntersectionObserver 不是完美精确到像素级别 也不是低延时性的
    // function findIndex(entries) {
    //   let index = 0;
    //   let entry = entries[index];
    //   if (entry.boundingClientRect.top > 0) {
    //     index = sections.indexOf(entry.target);
    //     return index === 0 ? 0 : index - 1;
    //   }
    //   for (; index < entries.length; index++) {
    //     if (entries[index].boundingClientRect.top <= 0) {
    //       entry = entries[index];
    //     } else {
    //       return sections.indexOf(entry.target);
    //     }
    //   }
    //   return sections.indexOf(entry.target);
    // }
    // function createIntersectionObserver(marginTop) {
    //   marginTop = Math.floor(marginTop + 10000);
    //   let intersectionObserver = new IntersectionObserver(
    //     (entries, observe) => {
    //       let scrollHeight = document.documentElement.scrollHeight;
    //       if (scrollHeight > marginTop) {
    //         observe.disconnect();
    //         createIntersectionObserver(scrollHeight);
    //         return;
    //       }
    //       let index = findIndex(entries);
    //       activateNavByIndex(navItems[index]);
    //     }, {
    //       rootMargin: marginTop + "px 0px -100% 0px",
    //       threshold: 0,
    //     }
    //   );
    //   sections.forEach((element) => {
    //     element && intersectionObserver.observe(element);
    //   });
    // }
    // createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
  document.addEventListener("pjax:success", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
</script>


  <script>
  try {
    // https://web.dev/content-visibility/
    // https://www.caniuse.com/?search=content-visibility
    // https://infrequently.org/2020/12/content-visibility-scroll-fix/
    // https://infrequently.org/2020/12/resize-resilient-deferred-rendering/

    // 备注 目前已知的问题:
    // 动态修改导致的内容高度变化(例如评论框异步渲染的外部盒子高度变化) 无法提前获知, 进而导致的首次滚动条跳动无法去除 (wontfix) 事实上不使用 content-visibility 也会有跳动, 不过是比使用 content-visibility 跳动提前
    // scrollreveal 插件潜在问题 目前尚不明确

    let eqIsh = (a, b, fuzz = 2) => {
      return Math.abs(a - b) <= fuzz;
    };

    let rectNotEQ = (a, b) => {
      return !eqIsh(a.width, b.width) || !eqIsh(a.height, b.height);
    };

    // Keep a map of elements and the dimensions of
    // their place-holders, re-setting the element's
    // intrinsic size when we get updated measurements
    // from observers.
    let spaced = new WeakMap();

    // Only call this when known cheap, post layout
    let reserveSpace = (el, rect = el.getClientBoundingRect()) => {
      let old = spaced.get(el);
      // Set intrinsic size to prevent jumping on un-painting:
      //    https://drafts.csswg.org/css-sizing-4/#intrinsic-size-override
      if (!old || rectNotEQ(old, rect)) {
        spaced.set(el, rect);
        el.style["contain-intrinsic-size"] = `${rect.width}px ${rect.height}px`;
      }
    };

    let iObs = new IntersectionObserver(
      (entries, o) => {
        entries.forEach((entry) => {
          // We don't care if the element is intersecting or
          // has been laid out as our page structure ensures
          // they'll get the right width.
          reserveSpace(entry.target, entry.boundingClientRect);
        });
      },
      { rootMargin: "500px 0px 500px 0px" }
    );

    let rObs = new ResizeObserver((entries, o) => {
      entries.forEach((entry) => {
        reserveSpace(entry.target, entry.contentRect);
      });
    });

    let resizeResilientDeferredRendering = (Selector) => {
      let articles = document.querySelectorAll(Selector);

      if (articles.length) {
        articles.forEach((el) => {
          iObs.observe(el);
          rObs.observe(el);
        });

        // Workaround for Chrome bug, part 2.
        //
        // Re-enable browser management of rendering for the
        // first article after the first paint. Double-rAF
        // to ensure we get called after a layout.
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            articles[0].style["content-visibility"] = "auto";
          });
        });
      }
    };

    let contentVisibilityScrollFix = () => {
      if (!("content-visibility" in document.documentElement.style)) {
        return;
      }
      resizeResilientDeferredRendering(".post-story");
    };
    contentVisibilityScrollFix();
    volantis.pjax.push(contentVisibilityScrollFix);
  } catch (error) {
    console.log(error);
  }
</script>



<script>
  document.onreadystatechange = function () {
    if (document.readyState == 'complete') {
      // 页面加载完毕 样式加载失败，或是当前网速慢，或是开启了省流模式
      const { saveData, effectiveType } = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {}
      if (getComputedStyle(document.querySelector("#safearea"), null)["display"] == "none" || saveData || /2g/.test(effectiveType)) {
        document.querySelectorAll(".reveal").forEach(function (e) {
          e.style["opacity"] = "1";
        });
        document.querySelector("#safearea").style["display"] = "block";
      }
    }
  }
</script>


  <script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"CodingStudio","url":"http://jay1060950003.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"jay1060950003","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://jay1060950003.github.io/","sameAs":["https://github.com/volantis-x"],"description":"自己的创作及学习空间"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"http://jay1060950003.github.io/","name":"CodingStudio"}},{"@type":"ListItem","position":2,"item":{"@id":"http://jay1060950003.github.io/categories/Basic/","name":"Basic"}},{"@type":"ListItem","position":3,"item":{"@id":"http://jay1060950003.github.io/2022/03/20/计算机基础知识/计算机网络/","name":"计算机网络"}}]},{"@context":"http://schema.org","@type":"WebSite","name":"CodingStudio","url":"http://jay1060950003.github.io/","keywords":"C++,Java,Qt,OpenCV,后端,开发者,程序猿,极客,编程,代码,开源,IT网站,Developer,Programmer,Coder, 摄影","description":"自己的创作及学习空间","author":{"@type":"Person","name":"jay1060950003","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://jay1060950003.github.io/","description":"自己的创作及学习空间"},"publisher":{"@type":"Organization","name":"CodingStudio","url":"http://jay1060950003.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"http://jay1060950003.github.io?s={search_term_string}"},"query-input":"required name=search_term_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"计算机网络","description":" 引言\n\n《计算机网络|自顶向下方法|第七版》学习笔记\n","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},"author":{"@type":"Person","name":"jay1060950003","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://jay1060950003.github.io/"},"publisher":{"@type":"Organization","name":"CodingStudio","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"http://jay1060950003.github.io/2022/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","wordCount":28,"datePublished":"2022-03-20T09:25:58.000Z","dateModified":"2023-04-09T13:39:29.972Z","articleSection":"Basic","keywords":"Basic","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script>



      
        <!--
  pjax重载区域接口：
  1.  <pjax></pjax> 标签 pjax 标签必须存在于所有页面 否则 pjax error
  2.  script[data-pjax]
  3.  .pjax-reload script
  4.  .pjax
-->



<script src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/pjax/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([onclick="return!1"]):not([target="_blank"]):not([target="view_window"]):not([href$=".xml"])',
        selectors: [
          "head title",
          "head meta[name=keywords]",
          "head meta[name=description]",
          
          "#l_main",
          "#pjax-header-nav-list",
          ".pjax",
          "pjax", // <pjax></pjax> 标签
          "script[data-pjax], .pjax-reload script" // script标签添加data-pjax 或 script标签外层添加.pjax-reload 的script代码段重载
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000,
        
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      // 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.complete.start();
    });

    document.addEventListener('pjax:error', function (e) {
      if(volantis.debug) {
        console.error(e);
        console.log('pjax error: \n' + JSON.stringify(e));
      }else{
        // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
        volantis.pjax.method.error.start();
        window.location.href = e.triggerElement.href;
      }
    });
</script>

      
    </div>
    <!-- import body_end begin-->
    <!-- import body_end end-->
    <!-- Custom Files bodyEnd begin-->
    
    <!-- Custom Files bodyEnd end-->
    <!-- front-matter body_end begin -->
    <!-- front-matter body_end end -->
  </body>
</html>
